
## 정리 
``` bash 
- 스코프란 
	- 변수의 값을 '참조' 할 때, '참조할 수 있는 유효 범위' 를 의미. 
	- 스코프의 물리적 실체는 '렉시컬 환경' (출처 : 모던 자바스크립트 p195)

- 스코프가 결정되는 순간 
	- '선언 된 위치'에 의해, 식별자가 결정됨. 
	- 왜냐하면, '평가' 를 하면서, 해당 식별자를 렉시컬 환경의 환경 레코드에 등록하기 때문 

- 스코프의 종류 
	- 전역 스코프 
	- 지역 스코프 
		- var 키워드로 선언된 변수는 함수 레벨 스코프를 가짐 -> 함수의 블록만을 지역 스코프로 인정. so, if, for, 등의 블록안의 변수는 재할당될 위험성이 있음. (출처 : 모던 자바스크립트 p197) 
		- let, const 키워드로 선언된 변수는 블록 레벨 스코프를 가짐 -> 함수 뿐 아니라, if, for 등의 블록 안에서 별도의 렉시컬 환경을 갖게 됨. 

- 스코프 체인 
	- [의의] '스코프' 가 '계층적' 으로 연결된 것. 
	- [원인] 렉시컬 환경 중 외부 참조 영역에, 상위 스코프를 binding 하게 됨. -> 따라서, '스코프가 계층적' 으로 연결될 수 있게 됨. 
	- [쓰임] '식별자 검색' 시, 해당 스코프에 식별자가 없다면, '상위 스코프로 이동'하여 식별자를 검색하게 됨. 
```


<br>


## 추가 


### 1. var, let 키워드 영향 범위

- let 키워드를 사용하게 되면 -> 블록 레벨 스코프가 적용됨
	- 전역에 선언된 foo 와 {  } 안에 선언된 foo 는 ⭐⭐⭐⭐⭐ '별개의 foo' 변수가 됨. -> so, 재할당이 일어나지 않음. (출처 : 모던 자바스크립트 p211)
	- bar 변수의 경우 -> 1) 전역 스코프에 선언된 식별자가 없음. 2) 스코프 체인을 따라서, 값을 탐색할 상황도 아님 3) { } 변수는 지역 스코프이기 때문에, 접근할 수도 없음 

``` js
let foo = 1; 

{
	let foo = 2;
	let bar = 3; 
}

console.log(foo)  // 1
console.log(bar)  // reference error
```


- var 키워드를 사용하게 되면 -> 함수레벨 스코프 이므로 -> 전역에 사용된 foo 와 { } 안에 사용된 foo 는 '동일한 foo' 변수가 됨 -> 따라서 '재할당' 이 일어남
``` js
var foo = 1; 

{
	var foo = 2;
	var bar = 3; 
}

console.log(foo)  // 2 
console.log(bar)  // 3
```


<br>


### 2. 블록 레벨 스코프는 어떻게 평가가 이루어지는가. 

- `variable environment` 
	- 모던 자바스크립트 p387 에 if 문 만났을 때, 렉시컬 환경 변경이 나옴. 

``` js 
// 전역 변수 선언
var x = 1;
const y = 2; 

// 함수 정의 
function foo(a) {
	// 지역 변수 선언
	let x = 3;
	let hello = 4;

	// 'if 의 블록' 은 블록 레벨 스코프임 -> so, foo 함수 평가 시, let x = 5; 는 처음에 평가 되지 않음. 
	// if 블록을 만나고 -> 그제서야 '평가' 가 됨 (다만, 이때, 함수가 아니니, 실행 컨텍스트를 만들지는 않음.)
	// 평가를 하면, 해당 정보는 ''block lexical environment' 에 넣는다. ⭐⭐⭐⭐⭐ 
	// 그리고 '현재 실행 컨텍스트' 의 '렉시컬 환경' 은 'block lexical environment' 가 된다. ⭐⭐⭐⭐⭐  (즉, 렉시컬 환경 키에 들어갈 수 있는 값은 하나 이고, 그게 들어간 것 임. )
	
	if(true) {
		let x = 5; 
		console.log(a + b + x + y + z);
	}
	
	bar(10)
}

// 함수 호출 
foo(20);  // 42
```


<br>

### 추가 학습 
- 모듈 패턴 😥😥😥😥😥 (출처 : 모던 자바스크립트 p206)



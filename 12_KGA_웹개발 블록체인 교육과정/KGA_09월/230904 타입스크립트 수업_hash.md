

---
createDate : 2023-09-07

publish : ë²¨ë¡œê·¸ 
blogTitle : reduce ë©”ì†Œë“œ 
publishURL : 
postDate : 

tags : #javascript, #1ì°¨ì‘ì„±, 

---

---
createDate : 2023-09-07

isPublished : 
publish : 
blogTitle : 
publishURL : 
postDate : 

tags : #íƒ€ì…ìŠ¤íŠ¸ë¦½íŠ¸, #typescript,

---





> ëª©í‘œëŠ” ì™„ì „í•œ í•´ì„ë³¸ì„ ì ëŠ” ê²ƒ. 
> ëª©í‘œëŠ” ë‚´ê°€ ì´í•´í•´ì„œ, í•´ì„ë³¸ì„ ì ëŠ” ê²ƒ. 
> ë¸”ë¡ì²´ì¸ì„ ì–´ë””ì— ì“¸ ìˆ˜ ìˆë‚˜. ë‹¹ì¥ì— ë³´ì´ì§€ê°€ ì•ŠëŠ”ë‹¤. 
> 'git ì— ìˆëŠ” íŒŒì¼' ê³¼ 'ì´ ë…¸íŠ¸' ì˜ sync ë¥¼ ë§ì¶˜ë‹¤. 


> 'êµ¬ì¡°' ë¥¼ ì•ˆë‹¤ëŠ” ê±´, UML ì„ ê·¸ë ¤ì•¼ë§Œ í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. 
> 



# 01_hash íŒŒì¼ 

### git ì¶œì²˜ 
```
https://github.com/JEONGDEOKJIN/studyNote/tree/master/Typescript/kga/230904_study
```

<br>

### 01_hash íŒŒì¼ í„°ë¯¸ë„ ëª…ë ¹ì–´ 
``` sh
# (@hash.js) ì‹¤í–‰ ìˆœì„œ 

    # package.json í•„ìš”í•œ ëª¨ë“ˆ ì„¤ì¹˜
    npm init -y

    # JavaScriptì—ì„œ ì•”í˜¸í™” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ 
    npm i crypto-js

    # hash íŒŒì¼ ì‹¤í–‰
    node hash.js
```

```sh
# ë¨¸í´ íŠ¸ë¦¬ (@merkle.js)
npm i merkle
```



### [`hash.js` íŒŒì¼ ë¶„ì„] SHA256 í•´ì‹œ í•¨ìˆ˜ì™€ ë°ì´í„° ë¬´ê²°ì„±

``` js
// ë°ì´í„° ë¬´ê²°ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ê·¸ë¦¬ê³  ë¸”ë¡ì˜ ì—°ê²° êµ¬ì¡°ë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•œ SHA256 í•´ì‹œ í•¨ìˆ˜ ì‚¬ìš©  
    const {SHA256} = require("crypto-js")

    /* [SHA256 ì´í•´]
        [íŠ¹ì§•]
            - 256ë¹„íŠ¸ë¡œ êµ¬ì„±ë¨. 64ìë¦¬ ë¬¸ìì—´ë¡œ ì•”í˜¸í™” í•´ì¤Œ
            - 'ì–´ë– í•œ input' ì„ ë„£ì–´ë„, 'ë™ì¼í•œ ê¸¸ì´ì˜ ì¶œë ¥' ì„ ìƒì„± -> ë‹¤ì–‘í•œ ì…ë ¥ì— ëŒ€í•´ 'ê³ ìœ í•œ ê°’' ì„ ê°€ì§ˆ í™•ë¥ ì´ ë†’ì•„ì§. 
            - 'ê³ ìœ í•œ ê°’' ì„ ê°–ëŠ”ê²Œ ì¤‘ìš”í•œê°€? ê³ ìœ í•œ ê°’ì„ ê°–ê²Œ í•˜ëŠ”ë° ìˆì–´, ë™ì¼í•œ ê¸¸ì´ì˜ ì¶œë ¥ì´ ë¯¸ì¹˜ëŠ” ì˜í–¥ì€? 
            - ì´ê±¸ ì•Œê¸° ìœ„í•´ ìš°ì„  'ë°ì´í„° ë¬´ê²°ì„±' ì— ëŒ€í•´ ê³µë¶€í•˜ì
            
        [ë°ì´í„° ë¬´ê²°ì„±(Data Integrity)]
            [ì˜ì˜]
                - ë°ì´í„° 'ì „ì†¡, ì €ì¥ ë“±' ì˜ ê³¼ì •ì—ì„œ, 'ë°ì´í„°ê°€ ì†ìƒë˜ì§€ ì•Šì•˜ìŒ!' ì„ ì˜ë¯¸í•˜ëŠ” ì„±ì§ˆ 
                - ex) íŒŒì¼ ì „ì†¡, ì´ë©”ì¼ ì „ì†¡ê³¼ì •ì—ì„œ, ì›ë³¸ íŒŒì¼ê³¼ ìˆ˜ì‹ ìê°€ ë°›ì€ íŒŒì¼ì´ ë˜‘ê°™ì•„! 

            [í•„ìš”ì„±]
                - ë§Œì•½, ì „ì†¡ ì¤‘ ë°ì´í„°ê°€ ì†ì‹¤ëœë‹¤ë©´, ë‚´ê°€ ë³´ê³  ìˆëŠ” íŒŒì¼ì— ëŒ€í•œ 'ì‹ ë¢°ë„' ê°€ ì—†ì–´ì§ˆ ê²ƒ

            [ë¬´ê²°ì„± í™•ë³´ì— ìˆì–´ í•´ì‹œí•¨ìˆ˜ì˜ ì—­í• ]
                - í•´ì‹œí•¨ìˆ˜ëŠ” 'ì–´ë– í•œ input' ì´ ì…ë ¥ë˜ì–´ë„, 'ë™ì¼í•œ output' ì„ ë‚´ë†“ëŠ”ë‹¤. 
                - ê·¸ë¡œ ì¸í•´ 
                    1) ì² ì í•˜ë‚˜ê°€ ë³€ê²½ë˜ëŠ” ê²ƒ ê°™ì´, ì¡°ê·¸ë§ˆí•œ ë³€í™”ì—ë„, í° output ì°¨ì´ë¥¼ ë‚¸ë‹¤. -> ê·¸ë˜ì„œ, ë³€ê²½ì—¬ë¶€ íƒì§€ì— ìš©ì´í•˜ë‹¤. 
                    2) ë˜í•œ, ì¶œë ¥ê°’ìœ¼ë¡œ ë¶€í„°, ì…ë ¥ê¸¸ì´ë¥¼ ìœ ì¶”í•˜ê¸° í˜ë“¤ê¸° ë•Œë¬¸ì—, ë³´ì•ˆì—ì„œ ìœ ë¦¬í•˜ë‹¤. (ì´ê±´ ë³´ì¡°ì )
                    3) ê·¸ë¦¬ê³ , í•´ì‹œê°’ì€ â­'ê³ ìœ (ë””ì§€í„¸ ì§€ë¬¸)'â­ í•˜ë‹¤. 
                        - ë‹¤ë§Œ, 'ì¤‘ë³µ' ì´ ì¼ì–´ë‚  ìˆ˜ ìˆëŠ”ë°, ì´ë¥¼ 'í•´ì‹œ ì¶©ëŒ' ì´ë¼ê³  í•œë‹¤. ë‹¤ë§Œ, í˜„ëŒ€ì ì¸ SHA256 ì—ì„œëŠ”, ê±°ì˜ ì—†ìŒ.  

        [í•´ì‹œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ 'ì´ íŒŒì¼ì´ ì „ì†¡ ì¤‘ì—, ë³€ê²½ëœê±´ê°€?' ë¥¼ íŒë‹¨í•˜ëŠ” ê³¼ì • ]
            1) ë°ì´í„° ìƒì„±ì(A, ë•ì§„)ëŠ” 'ì›ë³¸ ë°ì´í„° íŒŒì¼ ex) 09ì›”í•™ìŠµì¼ì§€' ë¥¼ ì‘ì„±í•˜ê³  -> 'í•´ì‹œ í•¨ìˆ˜' ì— ë„£ì–´ì„œ -> â­'ê³ ìœ í•œ í•´ì‹œê°’(ë””ì§€í„¸ ì§€ë¬¸)'â­ ì„ ì–»ëŠ”ë‹¤. 
            2) ë°ì´í„° ìƒì„±ì(A, ë•ì§„)ëŠ” 'ì›ë³¸ ë°ì´í„°' ì™€ 'í•´ì‹œê°’' ì„ ë°ì´í„° ìˆ˜ì‹ ì(B, í•™ìŠµì¼ì§€ë¥¼ ë°›ëŠ” ì‚¬ëŒ) ì—ê²Œ ì „ë‹¬í•œë‹¤. 
            3) ì´ë•Œ, 'ì „ë‹¬í•˜ëŠ” í–‰ìœ„' ì—ì„œ 'ì›ë³¸ ë°ì´í„°ì˜ ë³€ê²½' ì´ ë°œìƒí•  ìˆ˜ë„ ìˆë‹¤. 
            4) ì´ì— ìˆ˜ì‹ ì(B) ëŠ” ìì‹ ì´ ë°›ì€ 'ì›ë³¸ ë°ì´í„°' ê°€ 'ë•ì§„ì´ ì‹¤ì œë¡œ ë³´ë‚¸ ë°ì´í„°ì™€ ë§ëŠ”ì§€' í™•ì¸í•˜ê³  ì‹¶ì–´ í•œë‹¤. 
            5) ë”°ë¼ì„œ, ìˆ˜ì‹ ì(B) ëŠ” 'ìì‹ ì´ ì›ë³¸ë°ì´í„°ë¼ê³  ë°›ì€ ì›ë³¸ë°ì´í„°'ë¥¼ 'í•´ì‹œ í•¨ìˆ˜' ì— ë„£ê³ , í•´ì‹œê°’ì€ ì–»ëŠ”ë‹¤. 
            6) ìˆ˜ì‹ ì(B)ëŠ” 'Aë¡œë¶€í„° ë°›ì€ í•´ì‹œê°’' ê³¼ 'ìŠ¤ìŠ¤ë¡œ ê³„ì‚°í•œ í•´ì‹œê°’' ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. 
            CF. í•´ì‹œí•¨ìˆ˜ëŠ” ì¡°ê·¸ë§ˆí•œ input ì˜ ë³€í™”ì—ë„, í° output ì°¨ì´ë¥¼ ë‚´ê¸° ë•Œë¬¸ì—, íŒŒì¼ì´ ì¡°ê¸ˆë§Œ ìˆ˜ì •ë˜ì–´ë„, ë‹¤ë¥´ë‹¤ê³  íŒë‹¨í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

        [ê¶ê¸ˆí•œ ê²ƒ]
        - 'ë¸”ë¡ì²´ì¸ì„ ì•”í˜¸í™” í•œë‹¤.'ëŠ”ê²Œ ë¬´ìŠ¨ ì˜ë¯¸ì•¼? 
            - 'SHA256 ìœ¼ë¡œ ë¸”ë¡ì²´ì¸ ì•”í˜¸í™” í•˜ê¸°' ë¼ëŠ” í•„ê¸°ë¥¼ ìˆ˜ì—… ì‹œê°„ì— í–ˆëŠ”ë°, ì´ ê³¼ì •ì—ì„œ ë¸”ë¡ì²´ì¸ìœ¼ë¡œ ì•”í˜¸í™” í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆê³ , 
            - SHA256 ì€ 1) ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥ 2) ë¸”ë¡ ì—°ê²° êµ¬ì¡°ë¥¼ êµ¬ì„± í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ì´ ì ì„ ì—¼ë‘! 
    */


        const str = "ì•ˆë…•í•˜ì„¸ìš”";
        const str2 = "ì•ˆë…•í•˜ì„¸ìš”123123123123";
        const str3 = "12312389987897127398273981273123717389127317231231293712319231293719872313123912931923123987239";

        // í•´ì‹œê°’ ë½‘ê¸°
        console.log("í•´ì‹œê²°ê³¼" , SHA256(str))
        console.log("í•´ì‹œê²°ê³¼2" , SHA256(str2))
        console.log("í•´ì‹œê²°ê³¼3" , SHA256(str3))
            /*
                í•´ì‹œê²°ê³¼ {
                    words: [
                        745025934,   891908369,
                        910543815,   677503468,
                        603229531, -1436574912,
                        1609407965,  -896975180
                    ],
                    sigBytes: 32
                    }
            */

        // ë¬¸ìì—´ë¡œ ë§Œë“¤ê¸°
            console.log("í•´ì‹œê²°ê³¼. ë¬¸ìì—´ë¡œ ë§Œë“¤ê¸°" , SHA256(str).toString())
                // words ë°°ì—´ì˜ ê° í•˜ë‚˜ì˜ ìˆ«ì ë©ì–´ë¦¬ëŠ” 10ì§„ìˆ˜ -> ê°ê° 16ì§„ìˆ˜ë¡œ ë³€í™˜í•´ì„œ -> ë¬¸ìì—´ë¡œ í•©ì¹¨
                // 2c68318e + 35297111 + 3645cbc7 + 2861e1ec + 23f48d5b + aa5f9b40 + 5fed9ddd + ca893eb4
                // 2c68318e352971113645cbc72861e1ec23f48d5baa5f9b405fed9dddca893eb4
            console.log("í•´ì‹œê²°ê³¼. ë¬¸ìì—´ë¡œ ë§Œë“¤ê¸°" , SHA256(str).length)

```


<br>


###  [`merkle.js` íŒŒì¼ í•´ì„] ë¨¸í´ íŠ¸ë¦¬ë¡œ ë°ì´í„° ë¬´ê²°ì„± í™•ì¸í•˜ê¸° 


![](https://i.imgur.com/7srofn2.png)




``` js 
// $ npm i merkle

// ë¨¸í´íŠ¸ë¦¬ ìµœìƒë‹¨ì¸ ë¨¸í´ë£¨íŠ¸ ê°’ìœ¼ë¡œ ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦
const merkle = require("merkle")

    /*
        [ë¨¸í´ íŠ¸ë¦¬]
            [ì˜ì˜] 
                - ì´ì§„ íŠ¸ë¦¬ ì¤‘ í•˜ë‚˜ 
                - ê° ë…¸ë“œ = ë°ì´í„°ì˜ í•´ì‹œê°’
                - â­ë¶€ëª¨ ë…¸ë“œ = 'ìì‹1ì˜ í•´ì‹œê°’' + ìì‹ 2ì˜ í•´ì‹œê°’' ì„ í•´ì‹œí•œ ê°’â­

            [íŠ¹ì§•]
                - â­'í•˜ë‚˜ì˜ ê±°ë˜Aê°€ 8ê±´ì˜ ì„¸ë¶€ ê±°ë˜'â­ ë¡œ êµ¬ì„±ëœë‹¤ê³  í–ˆì„ ë•Œ, A ê±°ë˜ê°€ ë³€ê²½ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ë ¤ë©´? 
                    1) 8ê±´ì˜ ì„¸ë¶€ ê±°ë˜ ê°ê°ì„ í™•ì¸í•  ìˆ˜ ìˆìŒ -> 8ë²ˆ í™•ì¸í•´ì•¼ í•¨
                    2) ëŒ€ì‹ , ì„¸ë¶€ ê±°ë˜ë¥¼ ë¨¸í´ íŠ¸ë¦¬ë¡œ ë¬¶ì–´ì„œ, ë¨¸í´ ë£¨íŠ¸ë¡œ í™•ì¸í•¨ -> 1ë²ˆë§Œ í™•ì¸í•˜ë©´ ë¨.
                        -> so, â­â­ë¨¸í´ ë£¨íŠ¸ í•˜ë‚˜ë§Œ í™•ì¸í•˜ë©´, ì„¸ë¶€ ê±°ë˜ê°€ ë³€ê²½ë˜ì—ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŒ â­â­
                        -> ì¦‰, 'ë¨¸í´ ë£¨íŠ¸' í•˜ë‚˜ë¡œ, 'ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦' ê°€ëŠ¥ 
                        -> ë¨¸í´ íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ ë¸”ë¡ì²´ì¸ì—ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²ƒ ì„. 

            [ìˆ˜ì—…í•„ê¸°]
                merkle tree : ë°ì´í„°ì˜ ì•”í˜¸í™” êµ¬ì¡°ê°€ íŠ¸ë¦¬ í˜•íƒœ! 
                ì‚¬ì§„ ìë£Œ ìˆìŒ! 
                ê±°ë˜ê°€ ì•”í˜¸í™” ë˜ê³  -> ê° ê±°ë˜ë¥¼ í•©ì³ì„œ ì•”í˜¸í™” í•˜ê³  -> ë‹¤ì‹œ í•©ì³ì„œ ì•”í˜¸í™” 
        
        [ë¨¸í´ ë£¨íŠ¸]
            [ì˜ì˜]
                - ë¨¸í´íŠ¸ë¦¬ì—ì„œ ìµœì¢…ì ìœ¼ë¡œ ë‚¨ì€ ë¶€ëª¨ ë…¸ë“œê°’
    */


// ë¨¸í´íŠ¸ë¦¬ ë“¤ì–´ê°ˆ data
    const data = ["A" , "B" , "C" , "D" , "E"]

        /* [í•´ì„]
            ë¨¸í´ íŠ¸ë¦¬ì— ë“¤ì–´ê°€ì„œ, 'ë¬´ê²°ì„± ê²€ì¦' ì„ ê¸°ë‹¤ë¦¬ëŠ” ë°ì´í„°
        */

        /* ë§Œì•½ ë¨¸í´ íŠ¸ë¦¬ ìì‹ ìš”ì†Œê°€ 'í™€ìˆ˜' ë¼ë©´? 
            = ["A" , "B" , "C" , "D" , "E" , "E"];
            ì´ë ‡ê²Œ E ë¥¼ í•œë²ˆ ë” í•´ì‹œ í•´ì„œ(í•˜ë‚˜ ë” ë§Œë“¤ì–´ì„œ), ì‚¬ìš©í•œë‹¤. 
            'ì§ìˆ˜' ë¡œ ì§ì„ ë§ì¶°ì„œ ì‚¬ìš©í•œë‹¤. â­â­
        */

// ë¨¸í´íŠ¸ë¦¬ í•´ì‹œí™” ì‘ì—… ì‹œì‘
    const merkleTree = merkle("sha256").sync(data);
        /* í•´ì„
            ê° ì„¸ë¶€ data(ìµœ í•˜ìœ„ì— ìˆëŠ” ìì‹ ë…¸ë“œ) ê°€ ë“¤ì–´ì™€ì„œ ê°ê° hash ë¥¼ ë§Œë“¤ê³  
            ìì‹ì˜ ë¶€ëª¨ê°€ í•´ë‹¹ ê°’ì„ ë°›ì•„ ë˜, hash ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” ê³¼ì •
        */

// í•´ì‹œí™” ì‘ì—… ê²°ê³¼ ë„ì¶œëœ ë¨¸í´ ë£¨íŠ¸
    const Root = merkleTree.root();
    console.log(Root)   // AE4F3A195A3CBD6A3057C205DEF94520930F03F51F73C5A540D8FDAB05163FEF

    /*
        ë§ëŠ”ì§€ í™•ì¸í•˜ê³  ì‹¶ìœ¼ë©´?
        A í•´ì‹œí™”, B í•´ì‹œí™”, ë‘˜ ë‹¤ ë”í•œë‹¤. -> AB 
        B í•´ì‹œí™”, D í•´ì‹œí™”, ë‘˜ ë‹¤ ë” í•´! -> CD
        E í•´ì‹œí™”, E í•´ì‹œí™”, ë‘˜ ë‹¤ ë” í•´! -> EE

        AB í•´ì‹œí™” + CD í•´ì‹œí™” -> ABCD
        EE í•´ì‹œí™” + EE í•´ì‹œí™” -> EEEE
        ABCD í•´ì‹œì™€ + EEEE í•´ì‹œí™” -> ë¨¸í´ ë£¨íŠ¸ 
    */

```


<br>

### [`block.js` íŒŒì¼ ë¶„ì„]


``` js

// ìµœì´ˆì˜ ì œë„¤ì„¸ìŠ¤ ë¸”ë¡ ë§Œë“¤ê¸° 
    // ë¸”ë¡ì˜ ìƒì„± ë° ê´€ë¦¬í•˜ê¸°


// ëª¨ë“ˆ ì„í¬íŠ¸
    const merkle = require("merkle");
    const { SHA256 } = require("crypto-js");

    class Header {

        constructor( _height, _previousHash ){
            // ë¸”ë¡ì˜ ë²„ì „
            this.version = Header.getVersion();     // static ì´ë¯€ë¡œ, ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ê°€ ê³µìœ í•¨
            
            // ë¸”ë¡ì˜ ë†’ì´
            this.height = _height       // static ì´ ì•„ë‹ˆë¯€ë¡œ, ê° ì¸ìŠ¤í„´ìŠ¤ ë§ˆë‹¤ ê³ ìœ í•œ ê°’ì„ ê°€ì§

            // ë¸”ë¡ì˜ ìƒì„±ì‹œê°„
            this.timestamp = Header.getTimestamp();     // // static ì´ë¯€ë¡œ, ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ê°€ ê³µìœ í•¨

            // ë¸”ë¡ì˜ (ì´ì „) í•´ì‹œê°’
                // ìµœì´ˆ ë¸”ë¡ì€ ì´ì „ ë¸”ë¡ì´ ì—†ìœ¼ë‹ˆê¹Œ, 0 ìœ¼ë¡œ ëŒ€ì²´ 
            this.previousHash = _previousHash || "0".repeat(64)     // static ì´ ì•„ë‹ˆë¯€ë¡œ, ê° ì¸ìŠ¤í„´ìŠ¤ ë§ˆë‹¤ ê³ ìœ í•œ ê°’ì„ ê°€ì§
        }
            /* [ì‹œì‚¬ì ]
                ê°ì²´ë¥¼ ì •ì˜í•  ë•Œ, íŠ¹ì • ì†ì„±ì„ 'ê³µìœ ' í• ì§€, 'ê°œë³„ì ' ìœ¼ë¡œ ê°€ì§ˆì§€ êµ¬ë¶„ì´ í•„ìš”  
            */

        getName(){   }

        static getVersion(){
            return "1.0.0"
        }
        
        static getTimestamp(){
            return new Date().getTime()
        }
    }
        /* static ì‚¬ìš© ìœ ë¬´ê°€ í´ë˜ìŠ¤ ë©¤ë²„ ì†ì„± ë° ë©¤ë²„ í•¨ìˆ˜ì˜ ì ‘ê·¼ ì‹œê¸° ë° ê°œë³„ê°’ì— ë¯¸ì¹˜ëŠ” ì˜í–¥
            - static ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ 
                1) [ì ‘ê·¼ ê°€ëŠ¥ ì‹œê¸°] 'íŠ¹ì • ì†ì„±ê³¼ ë©”ì†Œë“œ' ì— 'í´ë˜ìŠ¤ì˜ constructor ê°€ í˜¸ì¶œë˜ì–´ì„œ, ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë  ë•Œ.' ì‚¬ìš© ê°€ëŠ¥
                2) [íš¨ê³¼] ëª¨ë“  ì¸ìŠ¤í„°ìŠ¤ê°€ ê°œë³„ì ì¸, ìì‹ ë§Œì˜ name ê°’ì„ ê°–ëŠ”ë‹¤. 

            - static ì„ ì‚¬ìš©í•˜ë©´ 
                1) [ì ‘ê·¼ ê°€ëŠ¥ ì‹œê¸°] í´ë˜ìŠ¤ ì•ˆì—ì„œ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥ 
                2) [íš¨ê³¼] ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ëŠ” 'ê³µí†µì ì¸ name' ì„ ê°–ëŠ”ë‹¤. (ê°’ì€ í´ë˜ìŠ¤ì— ì €ì¥.)
                3) [íš¨ê³¼] ë™ì í• ë‹¹(í´ë˜ìŠ¤ë¡œ ê°ì²´ë¥¼ ìƒì„±) í–ˆì„ ë•Œ, ì¸ìŠ¤í„´ìŠ¤ì— í•´ë‹¹ ë©”ì†Œë“œê°€ ìƒì„±ë˜ì§€ ì•ŠìŒ
                4) [ì“°ì„] 'í´ë˜ìŠ¤ì´ë¦„.ë©”ì†Œë“œì´ë¦„orì†ì„±ì´ë¦„' ì´ë ‡ê²Œ ì ‘ê·¼ì´ ê°€ëŠ¥!   
                    ex) Header.getVersion();


            - static ì‚¬ìš© ì´ìœ (ì‹¤ìµ)
                1) í´ë˜ìŠ¤ ì•ˆì—ì„œ ê³§ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥ 
                2) ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ê°€ ê³µìœ í•˜ëŠ” 'ì†ì„± ë° ë©”ì†Œë“œ' ë¥¼ ë§Œë“¤ê¸° ìœ„í•´
        */

        /* ì´ ì½”ë“œë¥¼ ê±°ì¹˜ê³  ë‚˜ë©´ ë‚˜ì˜¤ê²Œ ë  ì¸ìŠ¤í„´ìŠ¤ëŠ”? 
            Headerì˜ ì¸ìŠ¤í„´ìŠ¤ = {
                version : "1.0.0", 
                height : _height, | âœ… í´ë˜ìŠ¤ë¥¼ í˜¸ì¶œí•˜ëŠ” ì‹œì ì— ê°’ì´ ë“¤ì–´ì˜¤ê²Œ ë¨ 
                timestamp : "ì‹¤ì œë§Œë“¤ì–´ì§„ì‹œê°„"  | â“ ì´ê±´ ì½”ë“œê°€ ëŒì•„ê°„ ì‹œê°„, ì¸ìŠ¤í„´ìŠ¤ê°€ ë§Œë“¤ì–´ì§„ ì‹œê°„ â“
                previousHash : _previousHash | âœ… í´ë˜ìŠ¤ í˜¸ì¶œ í•˜ëŠ” ì‹œì ì— ê°’ì´ ë“¤ì–´ì˜¨ë‹¤.
            }
        */


// ë¸”ë¡ class
    class Block {
        
        // ë™ì í• ë‹¹(í´ë˜ìŠ¤ ìƒì„±ì í•¨ìˆ˜ ì‹¤í–‰í•´ì„œ ì¸ìŠ¤í„´ìŠ¤ ë§Œë“¤ê¸°)ì‹œ, 
        // ë§¤ê°œë³€ìˆ˜ë¡œ 1) Headerì˜ ì¸ìŠ¤í„´ìŠ¤ ê°ì²´ì™€ 2) data ex) ë‰´ìŠ¤ ê¸°ì‚¬ ë¥¼ ë°›ì•„ì„œ ìƒì„±
            constructor(_header , _data){

                // ì•ì„œ ì„ ì–¸ëœ Header í´ë˜ìŠ¤ë¥¼ 'ëˆ„ì ' í•´ì„œ ê°€ì ¸ì˜¤ê³  ìˆìŒ 
                    // ì´ë•Œ, ì§€ë‚œì£¼ ìˆ˜ì—…ì—ì„œëŠ” ë‹¤ë¥¸ ë°©ì‹ì„ ì‚¬ìš©í–ˆì—ˆìŒ ğŸ“›ğŸ“›ğŸ“› 
                this.version = _header.version;
                this.height = _header.height;
                this.timestamp = _header.timestamp;
                this.previousHash = _header.previousHash

                // ë™ì í• ë‹¹ì„ í†µí•´ data ë§¤ê°œë³€ìˆ˜ ë°›ê¸° ex) ìµœì´ˆì˜ ë‰´ìŠ¤ ê¸°ì‚¬ 
                this.data = _data;

                // ê²€ì¦í•˜ê³  ì‹¶ì€ data ë¥¼ ë¨¸í´íŠ¸ë¦¬ì— ë„£ì–´ì„œ -> ë¨¸í´ë£¨íŠ¸ì˜ í•´ì‹œê°’
                this.merkleRoot = Block.getMerkleRoot(_data)

                // ë¸”ë¡ì˜ í•´ì‹œ â­â­â­ 
                this.hash = Block.createBlockHash(_header , Block.getMerkleRoot(_data))
                    /* [í•´ì„]
                        'this.hash' ì´ë¼ëŠ” ê±´ 
                            1) header(ë²„ì „, ë†’ì´, ìƒì„±ì‹œê°„, ì´ì „ í•´ì‹œê°’)
                            2) ë¨¸í´ë£¨íŠ¸ì˜ í•´ì‹œê°’ ì„ 
                            3) ë‹¤ì‹œ í•´ì‹œí•¨ìˆ˜ì— ë„£ì€ í•´ì‹œê°’? 
                        
                        ê·¸ë¦¬ê³ , ì´ëŸ¬í•œ this.hash == ë¸”ë¡?! 
                    */

                    /* [í•´ì„] 
                        ëª¨ë“  ë‚´ìš©ì„ í•´ì‹œí™” ì‹œí‚¨ê²Œ, ë¸”ë¡ì˜ í•´ì‹œ.
                        ì¦‰, ë¸”ë¡ì€ ëª¨ë“  ë‚´ìš©ì´ í•´ì‹œí™” ëœ ê²ƒ, ì„ ì˜ë¯¸â“â“â“ 
                    */
            }

            // ê²€ì¦í•˜ê³  ì‹¶ì€ ë°ì´í„°ê°€ ë“¤ì–´ì˜¤ë©´ -> ë¨¸í´ íŠ¸ë¦¬ì— ë„£ì–´ì„œ -> ë¨¸í´ ë£¨íŠ¸(í•´ì‹œê°’)ë¥¼ ë‚´ë±‰ëŠ” static í•¨ìˆ˜
            static getMerkleRoot(_data){
                const merkleTree = merkle("sha256").sync(_data)
                return merkleTree.root()
            }

            // header ì™€ í•´ë‹¹ data ì˜ merkleRoot ë¡œ í•´ì‹œê°’(ë¸”ë¡) ë§Œë“¤ê¸°
            static createBlockHash(_header , _merkleRoot){

                // Header í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ê°ì²´ì¸ _header ì—ì„œ 'value'ë“¤ë§Œ ë½‘ì•„ì„œ, ë°°ì—´ë¡œ ë§Œë“ ë‹¤. 
                const values = Object.values(_header)

                // ë°°ì—´ì„ ë¬¸ìì—´ë¡œ í•©ì¹œë‹¤. êµ¬ë¶„ì ì€ ë¹ˆ ë¬¸ìì—´. + í˜„ì¬ ë¸”ë¡ì—ì„œì˜ data ì˜ merkleRoot(í•´ì‹œê°’) 
                const data = values.join("") + _merkleRoot

                // 'header + í˜„ì¬ data ì˜ merkleRoot ë¥¼ í•©ì¹œ í•´ì‹œê°’' ì„ ë¦¬í„´ 
                return SHA256(data).toString();
            }
    }

    /* [DJí•´ì„ ver1] ê·¸ëŸ¬ë©´, 'ë¸”ë¡(block)' ì´ë¼ëŠ”ê²Œ ë­ì§€? 'ë¸”ë¡ ì²´ì¸'ì€ ë­ì§€?

            [ë¸”ë¡(block) êµ¬ì„±ìš”ì†Œ]
                - ë¸”ë¡ì€ 'í—¤ë”(ë©”íƒ€ë°ì´í„°)' ì™€ 'ë¨¸í´ë£¨íŠ¸(merkleRoot)' ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŒ. 
                    - í—¤ë”ì—ëŠ” 1) ë²„ì „ 2) ë†’ì´ 3) ìƒì„±ì‹œê°„ 4) ì´ì „ í•´ì‹œê°’ ë“¤ì´ ìˆìŒ. 
                    - ë¨¸í´ë£¨íŠ¸(merkleRoot)ëŠ” 'íŠ¹ì • data ex) ë‰´ìŠ¤' ì˜ 'ìµœì¢… ë¶€ëª¨' ì˜ 'í•´ì‹œê°’' ì„.  

            [ë¸”ë¡ì²´ì¸(blockChain) ì€?]
                - í•˜ë‚˜ì˜ ë¸”ë¡ì€ í—¤ë”ì— ì´ì „ ë¸”ë¡ì˜ í•´ì‹œê°’ì„ ê°–ê³  ìˆìŒ. 
                - í•´ì‹œí•¨ìˆ˜ì˜ íŠ¹ì„±ìƒ, input ì— ì¡°ê·¸ë§ˆí•œ ë³€ë™ì´ ìˆìœ¼ë©´, output ì€ ê¸‰ê²©í•˜ê²Œ ì°¨ì´ë‚¨. 
                - ì´ë ‡ê²Œ ë¸”ë¡ë¼ë¦¬ ì—°ê²°ë˜ë©´ì„œ, 'ë°ì´í„°ì´ ë¬´ê²°ì„±ì„ ì¦ëª…' í•œë‹¤.â“â“â“â“â“â“

            [ê·¸ëŸ¬ë©´, ë¸”ë¡ ì²´ì¸, ì—ì„œ, ë°ì´í„° ë¬´ê²°ì„±ì´ ì¦ëª…ë˜ëŠ” ê³¼ì •ì€â“]
                - 'Alice ê°€ Bob ì—ê²Œ 5 ì½”ì¸ì„ ì†¡ê¸ˆ' í•œë‹¤ê³  í•  ë•Œ, 
                    ì œëŒ€ë¡œëœ ê±°ë˜(ë³€ì¡°ë˜ì§€ ì•Šì€, ê±°ì§“ì´ ì—†ëŠ”, ëª¨ë‘ê°€ ë¯¿ì„ ìˆ˜ ìˆëŠ”) ë¼ê³  í•˜ë ¤ë©´ 
                    Alice ì—ê²Œ ì§„ì§œ 5 ì½”ì¸ì´ ìˆê³ , Bob ì´ ë”± 5ê°œì˜ ì½”ì¸ë§Œ ë°›ì•„ì•¼! í•œë‹¤. 
                    ì´ê²Œ ì˜¤ìºì´ ëœë‹¤ë©´, ì´ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜(Aliceì—ê²Œ ëˆì´ ìˆê³ , Bob ì€ ì´ì „ì— ì¤‘ë³µ ìˆ˜ë ¹ì´ ì—†ëŠ” í•˜ìœ„ìš”ì†Œë¡œ êµ¬ì„±ëœ) ì€ ë¯¿ì„ ìˆ˜ ìˆê²Œ ëœë‹¤. 
                
                - ì˜ˆì „ì—ëŠ” ì´ê²ƒì´ ì œëŒ€ë¡œ ë˜ì—ˆë‹¤! ë¥¼ ë³´ì¦í•˜ê¸° ìœ„í•´ì„œ, 'ì¤‘ì•™ ê¸°ê´€' ì´ 'ë°ì´í„° ë² ì´ìŠ¤' ë¥¼ ë‘ê³  ê´€ë¦¬í–ˆë‹¤. 

                - ê·¸ëŸ°ë°, ë¸”ë¡ì²´ì¸ì€, ê° ë…¸ë“œ(ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°ëœ ì„œë²„ í˜¹ì€ ì»´í“¨í„°) ê°ê°ì´ 'ì œëŒ€ë¡œ ëœ íŠ¸ëœì­ì…˜ ì¸ê°€.' ë¥¼ ê²€ì‚¬ 
                    > ë§Œì•½, ë§ë‹¤ë©´, í†µê³¼ ì‹œì¼œì„œ, ë‹¤ìŒ ë…¸íŠ¸ê°€ ê²€ì¦í•œë‹¤.

                - ì§€ê¸ˆ ë‹¨ê³„ì—ì„œëŠ” ì´ë ‡ê²Œ ì¶”ìƒì ìœ¼ë¡œ ë°–ì— ì´ì•¼ê¸°ë¥¼ ëª» í•˜ê² ë‹¤ ğŸ˜¥ğŸ˜¥
    */

// ì²« ë²ˆì§¸ ë¸”ë¡ ìƒì„±
    // ë¸”ë¡ì— data ë‚´ìš© ë‹´ê¸°
        const data = ['The Times 03/Jan/2009 Chancellor on brink of second bailout for banks']

    // ë¸”ë¡ í—¤ë” ê°ì²´ ìƒì„±
        const header = new Header(0)
            /* [í•´ì„] ì²« ë²ˆì§¸ ê°ì²´ ì´ë¯€ë¡œ, height ëŠ” 0 */

    // 'header ê°ì²´ + í•´ë‹¹ dataì˜ ë¨¸í´ë£¨íŠ¸'ë¡œ ë¸”ë¡ì„ ìƒì„±
        const block = new Block(header , data)
        console.log(block)


// ë‘ ë²ˆì§¸ ë¸”ë¡ ìƒì„±
    const header2 = new Header(1, block.hash);
        // ì²« ë²ˆì¨° ë§¤ê°œë³€ìˆ˜(height) : ëª‡ ë²ˆì§¸ ë¸”ë¡ì¸ê°€ 
        // ë‘ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜(_previousHash) : ì´ì „ ë¸”ë¡ì˜ í•´ì‹œ ê°’

    const block2 = new Block(header2 , ["ë‘ë²ˆì§¸ ë¸”ë¡ ğŸ™†â€â™‚ï¸ğŸ™†â€â™‚ï¸ğŸ™†â€â™‚ï¸"])
        // ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜(_header) : Header í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ 
        // ë‘ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜(_header) : ì´ì „ ë¸”ë¡ì˜ í•´ì‹œ ê°’

    console.log(block2) â­â­â­ 
        // ì´ë ‡ê²Œ í•´ì„œ, ë‚˜ì˜¨, block2 ì˜ ê°’ì´ 'ë¬´ì—‡ì„ ê²€ì¦' í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆëŠ”ê±°ì§€? 
        // ì´ëŸ¬í•œ height 0 ë²ˆì§¸ ì¼ ë•Œì˜, ë©”íƒ€ë°ì´í„° í™˜ê²½ì—ì„œ, data ëŠ” "ë‰´ìŠ¤ ê¸°ì‚¬" ì´ê³  
        // ì´ëŸ¬í•œ height 1 ë²ˆì§¸ ì¼ ë•Œì˜, ë©”íƒ€ë°ì´í„° í™˜ê²½ì—ì„œ, data ëŠ” "ë‘ë²ˆì§¸ ë¸”ë¡ ğŸ™†â€â™‚ï¸ğŸ™†â€â™‚ï¸ğŸ™†â€â™‚ï¸" ì´ë‹¤. 
        // height 0 ë²ˆì§¸ ì¼ ë•Œì˜ ë©”íƒ€ë°ì´í„°ê°€ ì¡°ê¸ˆì´ë¼ë„ ë³€í™”í•˜ë©´, í˜¹ì€ data ê°€ ë³€í™”í•˜ë©´ -> í•´ì‹œê°’ì´ ìš”ë™ì¹œë‹¤.
        // ì¦‰, 'block ì„ êµ¬ì„±í•˜ëŠ” ìš”ì†Œ(ë©”íƒ€ ë°ì´í„° + ë¨¸í´ë£¨íŠ¸ì˜ data)' ê°€ ì¡°ê¸ˆì´ë¼ë„ ë³€í™”í•˜ë©´ -> í•´ì‹œê°’ì´ ìš”ë™ì¹˜ê³  -> ì²´ì¸ ë¼ë¦¬ ì—°ê²°ë˜ì–´ ìˆìœ¼ë¯€ë¡œ -> ì²´ì¸ ë ê¹Œì§€ ê°„ë‹¤.
            // ë”°ë¼ì„œ, "height 0 ë²ˆì§¸ì¸ íŠ¹ì • ë©”íƒ€ë°ì´í„° í™˜ê²½" ì—ì„œì˜ data ëŠ” ë¬´ì¡°ê±´ "ë‰´ìŠ¤ ê¸°ì‚¬" ë¼ëŠ” ê±¸ ê²€ì¦! í•œë‹¤. 
```


<br>



# 02_block í´ë” 

## 02_block í´ë” í„°ë¯¸ë„ ì„¤ì •
``` bash
[ì„¤ì¹˜]
    # package.json í•„ìš”í•œ ëª¨ë“ˆ ì„¤ì¹˜ 
    npm init -y

    # íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ê°œë°œì ëª¨ë“œë¡œ ì„¤ì¹˜ 
    npm i -D typescript
        #D ë¥¼ í•¨ 
        #ì™œëƒë©´, 'JS ë¡œ ì»´íŒŒì¼' í•´ì„œ ì‹¤í–‰ë˜ê³ , ë”°ë¡œ 'ëŸ°íƒ€ì„' ì´ ì—†ê¸° ë•Œë¬¸

    # typescript ë¥¼ ì§ì ‘ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” íŒ¨í‚¤ê¸°
    npm i -D ts-node

    # js ì™€ ts ëª¨ë‘ merkle ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì„¤ì¹˜
    npm i -D @types/merkle merkle

    # js, ts ì—ì„œ ì•”í˜¸í™” ê¸°ëŠ¥ ì œê³µí•˜ëŠ” crypto-js ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
    npm i -D @types/crypto-js crypto-js
        #ëª¨ë‘ íƒ€ì…ì´ ì„¤ì¹˜ ë˜ì–´ ìˆì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì—

    # 'ë³„ì¹­'ì„ 'ê²½ë¡œ'ë¡œ ë³€í™˜í•´ì„œ -> ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ ì‚¬ìš©
    npm i -D tsc-alias tsconfig-paths
        # ë…¸ë“œ ëŸ°íƒ€ì„ì„ ì‹¤í–‰í•˜ë©´ì„œ, ts-node ë¡œ node í™˜ê²½ì—ì„œ ì‹¤í–‰í•  ë•Œ, 
```


``` sh
    # tsconfig ë§Œë“¤ê¸°
    npx tsc --init
```


- í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•  ë•Œ
``` sh
npm i -D @types/jest jest
    # íƒ€ì… ìŠ¤í¬ë¦½íŠ¸ë„ ê°™ì´ ì‘ì„±í•˜ê¸° ë•Œë¬¸ì—, @types/jest ì´ê²ƒë„ ë“¤ì–´ê°„ë‹¤.  
```

- jest.config.ts
```
- jest ë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•  ë•Œ, ì˜µì…˜ì„¤ì • íŒŒì¼
- í™•ì¥ì, í…ŒìŠ¤íŠ¸ í™˜ê²½ ë“±ë“± ì§€ì •
- jest ë¥¼ js, ts ë“±ë“± ì–´ë””ì—ì„œ ë§Œë“¤ ê²ƒ ì¸ê°€. 
```


<br>

## ì „ì²´ íë¦„ íŒŒì•…í•˜ê¸° 
``` bash
[02_block ë””ë ‰í† ë¦¬ëŠ” 'block.test.ts' íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¨ë‹¤.]
	> package.json > scripts ì—ì„œ > "test" : "jest" ë¡œ ë˜ì–´ ìˆë‹¤.
	> npm test ë¡œ ì‹¤í–‰ì‹œí‚¨ë‹¤. 

[02_block ë””ë ‰í† ë¦¬ì˜ êµ¬ì¡°]
	- src
		- core
			- test
				- block.test.ts
			- block
				- block.ts
				- blockHeaders.ts
			- crypto
				- crypto.module.ts
			- interface
				- block.interface.ts
				- failable.interface.ts
			- config.ts
	- jest.config.ts
	- tsconfig.json
	- package.json

	ğŸ‘‰ config íŒŒì¼ë“¤ì´ ì™œ ë°”ê¹¥ì— ìˆì„ê¹Œâ“â“â“ 
	
```

<br>

## config íŒŒì¼ë“¤ ì„¤ì • ë° ë””ë ‰í† ë¦¬ êµ¬ì¡° 

### ë””ë ‰í† ë¦¬ êµ¬ì¡° 
![](https://i.imgur.com/pba6fo3.png)



### tsconfig.json | ğŸ˜¥ğŸ˜¥ğŸ˜¥ baseUrl ê²½ë¡œì— ëŒ€í•´ì„œëŠ” ì•„ì§ ë¶ˆí™•ì‹¤
``` bash

{
  "compilerOptions": {
    "module": "CommonJS",   
      // ëª¨ë“ˆ ì‹œìŠ¤í…œì´ë€, íŠ¹ì • ì½”ë“œ ë­‰ì¹˜ë¥¼ import, export í•˜ëŠ” ì‹œìŠ¤í…œ
      // CommonJS ëŠ” require ì™€ module.export ë¡œ ëª¨ë“ˆì„ ê´€ë¦¬
    
    "outDir": "./dist",   // js ë¡œ ì»´íŒŒì¼ ë˜ë©´, .dist í´ë”ë¡œ ë‚´ë³´ë‚´ê¸°
    
    "target": "ES6",    // ë³€í™˜ëœ ë²„ì „ì€ ECMAScript2015
    "esModuleInterop": true,    // CommonJS ì™€ ECMAScript2015 ê°„ ì‹±í¬ ë§ì¶”ê¸°
    
    "baseUrl": ".",     
      // ê²½ë¡œ íƒìƒ‰ì˜ ì‹œì‘ì´ ë˜ëŠ” root ë¥¼ ì§€ì •
      // . ë¡œ ì§€ì •í•˜ë©´, tsconfig.json ì´ ìˆëŠ” ë””ë ‰í† ë¦¬ ë ˆë²¨ì—ì„œ ë¶€í„° ì‹œì‘í•˜ê²Œ ë¨ 
  
    "paths": {    // ë³„ì¹­ ë¶™ì´ëŠ” ê³³
      "@core/*" : ["src/core/*"],
        // @ ëŠ” baseUrl ì—ì„œ ì§€ì •í•œ . ì„ ì˜ë¯¸â“â“â“ 
    }
  },
  
  // "include": [],
  // "exclude": [],

  "ts-node": {
    "require": ["tsconfig-paths/register"]  // ë³„ì¹­ì—ë„ ê²½ë¡œê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆê²Œâ“â“
  }
    /* [ts-node]
        - ì¼ë°˜ì ìœ¼ë¡œ, ts ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„ , js ë¡œ ë³€í™˜í•´ì„œ, ì‹¤í–‰ë¨. 
        - ë‹¤ë§Œ, ts-node ì‚¬ìš©í•˜ë©´, 'ë³€í™˜ ê³¼ì • ì—†ì´' ts ì‹¤í–‰ ê°€ëŠ¥.
        - ts-node ê°€ 'ë³„ì¹­' ì„ 'ê²½ë¡œ' ë¡œ ë°”ê¾¸ê¸° ìœ„í•´ì„œ 'tsconfig-paths/register' í•„ìš”.
    */
}

```


<br>


### jest.config.ts | ğŸ˜¥ğŸ˜¥ğŸ˜¥ ê²½ë¡œ ì•„ì§ ë¶ˆì•ˆ ğŸ˜¥ğŸ˜¥ 
``` ts
import type {Config} from '@jest/types'
    // ëª¨ë“ˆ íƒ€ì…ì´ ì •í•´ì ¸ ìˆëŠ” ê³³ì—ì„œ Config ê°€ì ¸ì˜´

const config : Config.InitialOptions = {

    // 1. ëª¨ë“ˆ íŒŒì¼ í™•ì¥ì ì„¤ì • : typescript ì™€ javascript ë‘˜ ë‹¤, í…ŒìŠ¤íŠ¸íŒŒì¼, ì§€ì • 
        moduleFileExtensions : ["ts" , "js"],

    // 2. í…ŒìŠ¤íŠ¸ íŒŒì¼ ë§¤ì¹˜ ì„¤ì • : íŒŒì¼ ì´ë¦„ì˜ íŒ¨í„´ì„ ì„¤ì •
        // ë£¨íŠ¸ê²½ë¡œ ì•„ë˜ì— ìˆëŠ” 'ëª¨ë“  í´ë”' ì˜ 'ëª¨ë“  íŒŒì¼' ì˜ ì´ë¦„ íŒ¨í„´ì´ test.js or test.ts
        testMatch : ['<rootDir>/**/*.test.(js|ts)'],
            // <rootDir> ì€ ë³´í†µ, 'ì„¤ì •(jest.config.js)ì´ ìœ„ì¹˜í•œ ë””ë ‰í† ë¦¬' ë¥¼ ì˜ë¯¸. 
            
    // 3. ëª¨ë“ˆì˜ ì´ë¦„ì— ëŒ€í•œ ë³„ì¹­ ì„¤ì • : @core
        // ì´ê±¸(ì•„ë§ˆë„ ë³„ì¹­) í•´ì„í•˜ê¸° ìœ„í•´, ëª¨ë“ˆì˜ ì´ë¦„ì„ ë§µí•‘! 

        // ë³„ì¹­ìœ¼ë¡œ ì§€ì •ëœ @core ë¥¼ ì–´ë–»ê²Œ ê²½ë¡œë¡œ ë°”ê¾¸ì–´ ì¤„ ê²ƒ ì¸ê°€? 
            // ^@core == @core/**/* ë¡œ ì‹œì‘í•˜ëŠ” ë³„ì¹­ì€, ë£¨íŠ¸ ê²½ë¡œì—, src/core ì˜ ê²½ë¡œê¹Œì§€ ë§µí•‘ì„ ì‹œì¼œì¤€ë‹¤.
            // â“â“â“ 

        moduleNameMapper : {
            "^@core/(.*)$" : "<rootDir>/src/core/$1"
        },

    // 4. í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •
        testEnvironment : "node",       // ì´ê±´ node í™˜ê²½ì—ì„œ ì‹¤í–‰ì‹œí‚¬ ê²ƒ ì„.

    // 5. ìì„¸í•œ ë…¸ë“œ ì„¤ì • ì¶œë ¥ : í„°ë¯¸ë„ì˜ ë¡œê·¸ë“¤ì„ ë” ìì„¸íˆ ì¶œë ¥í• ì§€ ì—¬ë¶€ 
        verbose : true, 

    // 6. í”„ë¦¬ì…‹ ì„¤ì • : jest ë¥¼ ì‹¤í–‰ì‹œí‚¬ ë•Œ, js ë‘ í• ì§€, ts ë‘ í• ì§€? 
        preset : "ts-jest"      // jest ë¥¼ ts ë¡œ ëŒë¦¬ì
}

export default config;

```


<br>

### interface > 'block.interface.ts' ë¶„ì„ | ğŸ˜¥ğŸ˜¥ nonce, difficulty ì˜ë¯¸ ë¶ˆì•ˆì • 
```
[ì´ íŒŒì¼ì„ ë¨¼ì € ë¶„ì„í•˜ëŠ” ì´ìœ ]
- ì‹¤í–‰ íŒŒì¼(block.ts) ì—ì„œ import ë˜ëŠ” íŒŒì¼ë¡œ ë“¤ì–´ê°€ê³ , ê·¸ ë‹¤ìŒ import íŒŒì¼ë¡œ ë“¤ì–´ê°€ê³  í•˜ë‹¤ë³´ë‹ˆ, interface ë‹¨ê³„ ê¹Œì§€ ì˜¤ê²Œ ë¨. 
```

``` ts 
export interface IBlockHeader {
    version : string 
    height : number
    timestamp : number
    previousHash : string
}

export interface IBlock extends IBlockHeader {

    // IBlockHeader ë¥¼ ìƒì† í–ˆìœ¼ë¯€ë¡œ, IBlockHeader ì˜ í‚¤ : value ê°€ ë“¤ì–´ê°€ ìˆìŒ.
        /*
            version : string
            height : number
            timestamp : number
            previousHash : string
            ì´ë ‡ê²Œ ë“¤ì–´ê°€ìˆëŠ” ê²ƒ 
        */

        // ë“¤ì–´ì˜¨ data ì˜ 'ìµœì¢… ë¶€ëª¨ ë…¸ë“œì˜ í•´ì‹œê°’'
        merkleRoot : string;
        
        // ì´ê±´ ì–´ë–¤ hash ì§€? 
        hash : string;

        // ë¸”ë¡ì„ ì±„êµ´í•˜ê¸° ìœ„í•´, ì—°ì‚°ì„ ëª‡ ë²ˆ ëŒë ¸ëŠ”ê°€?
        nonce : number;
            // [ê¶ê¸ˆì¦] ëª‡ ë²ˆ ëŒë ¸ëŠ”ì§€ëŠ”, ìµœì¢…ì ìœ¼ë¡œ ì•Œê²Œ ë˜ëŠ” ê°’ ì•„ë‹ê¹Œâ“â“

        // ì±„êµ´ ë‚œì´ë„
        difficulty 
            // êµ¬ì²´ì ìœ¼ë¡œ, ì–´ë–¤ ì˜ë¯¸ê°€ ë” ìˆì—ˆë˜ ê²ƒ ê°™ì€ë°

        // ë“¤ì–´ì˜¤ëŠ” ë°ì´í„°
        data : string[]
    
        /* CF. ë¸”ë¡ì´ë€, 'í—¤ë”' + 'í•´ë‹¹ news data ì˜ ë¨¸í´ë£¨íŠ¸' ì˜ 'í•´ì‹œê°’'  
            ë”°ë¼ì„œ, ì´ì „ ë²„ì „ì— ìˆì—ˆë˜ ê²ƒì€ 
                1) data : ex) news ê¸°ì‚¬ 
                2) í•´ë‹¹ data ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë½‘ì€ merkleRoot
        */

```

<br>
### interface > 'failable.interface.ts' íŒŒì¼ ì½ê¸° 

- ì°¸ê³  ìë£Œ 
```
[ì œë„¤ë¦­ ë¬¸ë²• ì„¤ëª… í•˜ëŠ” ë¸”ë¡œê·¸] 
	https://bit.ly/3P6xpaM
```

``` ts
// ê²°ê³¼ì— ëŒ€í•œ ë‚´ìš© ë‹´ê¸°
    // ì œë„¤ë¦­ì„ ì¨ì„œ, ë§¤ê°œë³€ìˆ˜í™”! (í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ ì²˜ëŸ¼ ì‘ë™â­â­â­â­â­)
    // ì‚¬ìš©í•  ë•Œ, ì´ë ‡ê²Œ ì‘ì„±
export interface Result<R>{
    isError : false;
    value : R ; // ì–´ë–¤ ê°’ì¸ì§€ ëª¨ë¥´ë‹ˆê¹Œ, ë§¤ê°œë³€ìˆ˜ë¡œ ì“¸ë˜!
    // value ëŠ” ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê±¸ ê°€ì§ˆë˜! 
    // ê°ì²´ì˜ êµ¬ì¡°ëŠ” ìœ„ë¥¼ ë”°ë¼ê°€ê³ , value ì— ëŒ€í•œ íƒ€ì…ì€ ì›í•˜ëŠ” ëŒ€ë¡œ ì‘ì„± ê°€ëŠ¥
}

export interface Failure<E>{
    isError : true;
    value : E;
}

    export type Failable<R,E> = Result<R> | Failure<E>
    // ë§Œë“  ê²ƒì— ì´ì œ íƒ€ì…ì„ 2ê°œ 
    // ê²°ê³¼ê°’ì´ ìˆìœ¼ë©´ -> Result R ì„ ì‚¬ìš©
    // ì—†ìœ¼ë©´ -> Failure E ë¥¼ ì‚¬ìš©!


    /* ì´ë ‡ê²Œ ë§¤ê°œë³€ìˆ˜ ì²˜ëŸ¼ ì“°ì´ê²Œ ëœë‹¤ â­â­â­â­â­â­ 
        let a (a, b) => {
            console.log(a , b)
        }
        a("stringgogo" , "ë§¤ê°œë³€ìˆ˜2ê°œ!")
    */ 
```

<br>




















ëª‡ ë²ˆ ì—°ì‚° 
ë‚œì´ë„ ì— ë§ìœ¼ë©´ -> ì±„êµ´ ìê²© ì–»ëŠ”ë‹¤. 
ë‚œì´ë„ëŠ” ì±„êµ´ ì£¼ê¸°ë¥¼ ë§ì¶”ê²Œ í•˜ê¸° ìœ„í•´ 

ë¹„íŠ¸ì½”ì¸ì€ 1ê°œ ë§Œë“œëŠ”ë° 10ë¶„ -> 10ë¶„ ë³´ë‹¤ ë”°ë¥´ë©´, ë‚œì´ë„ë¥¼ ë†’ì´ê³ , 10ë¶„ë³´ë‹¤ ëŠ¦ìœ¼ë©´, ë‚œì´ë„ë¥¼ ë‚®ì¶¤ 

ê·¸ë˜ì„œ, ë¸”ë¡ ìƒì„± ì£¼ê¸°ë¥¼ ì»¨íŠ¸ë¡¤ 

ìƒì„±ëœ ê¶Œí•œì„ ì–»ê³ , 
ì²´ì¸ì˜ ê¸¸ì´ë¥¼ ë¹„êµ í•´ì„œ -> ë¸”ë¡ ì¶”ê°€í•  ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ê²°ì • 

ë¸”ë¡ ê²€ì¦
	ì´ì „ ë¸”ë¡ì˜ ë†’ì´, ë¸”ë¡ì˜ í•´ì‹œ, ë“±ì„ ë¹„êµí•´ì„œ ê²€ì¦


ì´ëŸ¬í•œ ë¸”ë¡ì„ ì²´ì¸ì— ë„£ì„ ê²ƒ ì„. 
ì²´ì¸ì€ ì´ëŸ¬í•œ ë¸”ë¡ì„ ê°€ì§„ ë°°ì—´ 



- ì´ ë¬¸ë²•ì„ ì˜ ëª¨ë¥´ê² ìŒ ğŸ˜¥ğŸ˜¥ğŸ˜¥ 
![](https://i.imgur.com/YC055Z9.png)










## core ë””ë ‰í† ë¦¬ 


### core > interface
1. block.interface.ts 
``` ts
export interface IBlockHeader {
    version : string 
    height : number
    timestamp : number
    previousHash : string
}

export interface IBlock extends IBlockHeader {

    // IBlockHeader ë¥¼ ìƒì† í–ˆìœ¼ë¯€ë¡œ, IBlockHeader ì˜ í‚¤ : value ê°€ ë“¤ì–´ê°€ ìˆìŒ.
        /*
            version : string
            height : number
            timestamp : number
            previousHash : string
            ì´ë ‡ê²Œ ë“¤ì–´ê°€ìˆëŠ” ê²ƒ 
        */

        // ë“¤ì–´ì˜¨ data ì˜ 'ìµœì¢… ë¶€ëª¨ ë…¸ë“œì˜ í•´ì‹œê°’'
        merkleRoot : string;
        
        // ì´ê±´ ì–´ë–¤ hash ì§€? 
        hash : string;

        // ë¸”ë¡ì„ ì±„êµ´í•˜ê¸° ìœ„í•´, ì—°ì‚°ì„ ëª‡ ë²ˆ ëŒë ¸ëŠ”ê°€?
        nonce : number;
            // [ê¶ê¸ˆì¦] ëª‡ ë²ˆ ëŒë ¸ëŠ”ì§€ëŠ”, ìµœì¢…ì ìœ¼ë¡œ ì•Œê²Œ ë˜ëŠ” ê°’ ì•„ë‹ê¹Œâ“â“

        // ì±„êµ´ ë‚œì´ë„
        difficulty : number
            // êµ¬ì²´ì ìœ¼ë¡œ, ì–´ë–¤ ì˜ë¯¸ê°€ ë” ìˆì—ˆë˜ ê²ƒ ê°™ì€ë°

        // ë“¤ì–´ì˜¤ëŠ” ë°ì´í„°
        data : string[]
    
        /* CF. ë¸”ë¡ì´ë€, 'í—¤ë”' + 'í•´ë‹¹ news data ì˜ ë¨¸í´ë£¨íŠ¸' ì˜ 'í•´ì‹œê°’'  
            ë”°ë¼ì„œ, ì´ì „ ë²„ì „ì— ìˆì—ˆë˜ ê²ƒì€ | ğŸ˜¥ ì¶”ì¸¡ ğŸ˜¥ 
                1) data : ex) news ê¸°ì‚¬ 
                2) í•´ë‹¹ data ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë½‘ì€ merkleRoot
                3) ì´ì œ ì¶”ê°€ëœ ê²Œ nonce, difficulty
        */
}
```

2. failable.interface.ts
``` ts

// ê²°ê³¼ì— ëŒ€í•œ ë‚´ìš© ë‹´ê¸° 
    export interface Result<R>{
        isError : false;
        value : R;      
            // [í•´ì„] 
                // ì–´ë–¤ íƒ€ì…ì´ ì˜¤ê²Œ ë ì§€ ëª¨ë¥¸ë‹¤. 
                    // CF. 'íƒ€ì…' ì€, ì¥í™©í•˜ê²Œ ì •ì˜ë  ìˆ˜ ìˆì§€ë§Œ, ê·¸ë˜ì„œ 'ì´ëŸ¬í•œ í•¨ìˆ˜' ë˜ëŠ” 'ì´ëŸ¬í•œ ë¬¸ìì—´' ë“±ìœ¼ë¡œ ì‰½ê²Œ ì •ë¦¬í•´ë‘ì–´ì•¼ í•œë‹¤.
                // ê°ì²´ì˜ êµ¬ì¡°ëŠ” ìœ„ë¥¼ ë”°ë¼ê°€ê³ , value ì— ëŒ€í•œ íƒ€ì…ì€ ì›í•˜ëŠ”ëŒ€ë¡œ ì‘ì„± ê°€ëŠ¥
    }

    export interface Failure<E>{
        isError : true;
        value : E;
    }

    export type Failable<R,E> = Result<R> | Failure<E>
        /*  [Failable<R,E> í•´ì„]
            'Failable' ì´ë¼ëŠ” íƒ€ì…ì€ Rê³¼ E ë¼ëŠ” íƒ€ì… ë³€ìˆ˜ë¥¼ ê°–ê³ 
            Result ì™€ Failure interface ê°€ íƒ 1 ì´ë¼ëŠ” ì „ì œí•˜ì—, 
            Failable ì€ Result ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°–ê±°ë‚˜, 

        */


    /* ['ê²°ê³¼ì— ëŒ€í•œ ë‚´ìš©'ì€ ë¬´ì—‡ì„ ì˜ë¯¸í•˜ëŠ”ê±°ì§€?] â“â“â“â“â“
        1) ì–¸ì œ Result ê°€ ë‹´ê¸°ì§€? ê·¸ ì•ˆì— ë‹´ê¸´ ë°ì´í„°ëŠ” ì–´ë–¤ ì˜ë¯¸ì§€? 
        2) ì–¸ì œ Failable ì´ ìƒê²¨? ê·¸ ì•ˆì— ë‹´ê¸´ ë°ì´í„°ì˜ ì˜ë¯¸ëŠ”?
    */

    /* [generic íƒ€ì…(ì œë„¤ë¦­ íƒ€ì…)]
    
        [ì˜ì˜]
            - íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ íƒ€ì…ì„ ë³€ìˆ˜í™” í•´ì„œ, 'í˜¸ì¶œì‹œ êµ¬ì²´ì ì¸ íƒ€ì…ì´ ì§€ì •' ëœë‹¤. 

        [íŠ¹ì§•]
            - íƒ€ì… ìŠ¤í¬ë¦½íŠ¸ 'ì¶”ë¡ ' ê¸°ëŠ¥ì´ ìˆì–´ì„œ, í˜¸ì¶œí•  ë•Œ, íƒ€ì…ì„ ëª…ì‹œí•˜ì§€ ì•Šì•„ë„, ì¶”ë¡ í•´ì„œ ì•Œê²Œ ë¨. 
                (ex) function getText<T>(text : T):T {
                        return text;}
                    
                    getText('hi');  // ì´ë ‡ê²Œ íƒ€ì… ì§€ì •ì„ ì•ˆ í•´ë„, 'hi' ë¥¼ í†µí•´ T ì— string ì´ ë“¤ì–´ê°€ê² êµ¬ë‚˜! ë¥¼ ì•ˆë‹¤. 
                    getText<string>('hi')   // ì›ë˜ëŠ” ì´ë ‡ê²Œ ì§€ì •í•¨

            - 'í•¨ìˆ˜, í´ë˜ìŠ¤, interface' ë“±ì— ì‚¬ìš©ë¨ 
            - í•¨ìˆ˜ í˜¸ì¶œ, í´ë˜ìŠ¤ í˜¸ì¶œ ì‹œì— êµ¬ì²´ì ì¸ íƒ€ì…ì´ ì§€ì •ë¨ 
            - ë™ì¼í•œ ì•ŒíŒŒë²³ = í†µì¼í•œ íƒ€ì… ì´ ë¨. 

        [ì‹¤ìµ]
            - 'ë™ì¼í•œ ë¡œì§' ì„ 'ë‹¤ì–‘í•œ íƒ€ì…' ì— ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŒ. 
    */

    /* [ë°ì´í„°ì˜ í˜•íƒœì™€ êµ¬ì¡°ë¥¼ ì •ì˜í•˜ëŠ” ë°©ì‹]
            [interface]
                - íŠ¹ì§• 
                    - ì£¼ë¡œ, 'ê°ì²´ì˜ í˜•íƒœ' ë¥¼ ì •ì˜í•  ë•Œ ì‚¬ìš©ë¨. 
                    - ì£¼ë¡œ, class ì—ì„œ êµ¬í˜„. 

            [type alias]
                - íŠ¹ì§• 
                    - ì¢€ ë” ì¼ë°˜ì 
                    - 'ê°ì²´, ë°°ì—´, ì›ì‹œíƒ€ì… ë“±' ë‹¤ì–‘í•œ íƒ€ì… í‘œí˜„ì— ì‚¬ìš©ë¨

    */
```

### core > crypto
``` ts 
class CryptoModule {

    // í•´ì‹œê°’(16ì§„ìˆ˜) ì„ 2ì§„ìˆ˜ë¡œ ë°”ê¾¸ëŠ” ì‹
    static hashToBinary(hash : string) : string {

        let binary : string = ""

        // í•´ì‹œ ë¬¸ìì—´ì„ '2ê¸€ìì”©' ê°€ì ¸ì™€ì„œ ë°˜ë³µ -> ì™œ 2ê¸€ìì”© ê°€ì ¸ì˜¤ëŠ” ê±°ì§€â“â“â“ 
        for (let i = 0; i < hash.length; i+=2) {

            // ë°˜ë³µë¬¸ì—ì„œ ië¥¼ 2ì”© ì¦ê°€! 
            const hexByte = hash.substr(i , 2);
                // í˜„ì¬ ì¸ë±ìŠ¤ì—ì„œ 2ê°œ ê°€ì ¸ì˜¨ë‹¤.

            // 16ì§„ìˆ˜ë¥¼ ë°”ì´íŠ¸ 10ì§„ìˆ˜ë¡œ ë³€í™˜
            const dec = parseInt(hexByte , 16);

            // 10ì§„ìˆ˜ë¥¼ 2ì§„ ë¬¸ìì—´ë¡œ ë³€í™˜ | 8ìë¦¬ë¡œ íŒ¨ë”©(8ìë¦¬ì”© ë§ì¶˜ë‹¤!)
            const binaryByte = dec.toString(2).padStart(8 , "0")

            // í˜„ì¬ì˜ 2ì§„ ë°”ì´íŠ¸ë¥¼ ìµœì¢… ì´ì§„ ë¬¸ìì—´ì— ì¶”ê°€ 
            binary += binaryByte;
            
        }

        return binary
    }
    // [ì´ ì½”ë“œì˜ íŠ¹ì§•]
        // hashToBinary ë©”ì†Œë“œ = static ìœ¼ë¡œ ì„ ì–¸í–ˆìŒ -> so, ë°”ë¡œ, ì „ì—­ì ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥
        // ì–¸ì œ ì‚¬ìš©í•´? 
            // ë‹¤ë¥¸ ê³³ì—ì„œ import í•´ì„œ ì‚¬ìš© í•  ë•Œ â­â­â­ 
}

export default CryptoModule;
```



### core > block
1. blocks.ts
``` ts

import {SHA256} from 'crypto-js';
import merkle from 'merkle';

import BlockHeader from './blockHeaders';
    /* [BlockHeader í´ë˜ìŠ¤ ê±°ì¹˜ë©´ ë‚˜ì˜¤ëŠ” ê²ƒ]  
        BlockHeader ì˜ ì¸ìŠ¤í„´ìŠ¤ = {
            version : "BlockHeader ì˜ getVersion ë©”ì†Œë“œ ì‹¤í–‰í•´ì„œ ë‚˜ì˜´", 
            height : "ì´ì „ ë¸”ë¡ì˜ height + 1"   // âœ…ì´ì „ ë¸”ë¡ì€ BlockHeader í´ë˜ìŠ¤ë¥¼ í˜¸ì¶œí•  ë•Œ ë§¤ê°œë³€ìˆ˜ë¡œ ë“¤ì–´ì˜´
            timestamp : "BlockHeader ì˜ getTimestamp ë©”ì†Œë“œ ì‹¤í–‰í•´ì„œ ë‚˜ì˜´",
            previousHash : "ì´ì „ë¸”ë¡ì˜ hash"    // âœ…ì´ì „ ë¸”ë¡ì€ BlockHeader í´ë˜ìŠ¤ë¥¼ í˜¸ì¶œí•  ë•Œ ë§¤ê°œë³€ìˆ˜ë¡œ ë“¤ì–´ì˜´
        }
    */

import { IBlock } from '@core/interface/block.interface';
    // "@core/*" : ["src/core/*"], ì´ê±°ì— ì˜í•´, ë³„ì¹­ìœ¼ë¡œ ì§€ì •ëœ ê²ƒ ì„. 
    // IBlock ì€ ë¸”ë¡ì˜ ê°ì²´ êµ¬ì¡°ë¥¼ ì •ì˜í•œ ë†ˆì„ 

import { Failable } from '@core/interface/failable.interface';

import CryptoModule from '@core/crypto/crypto.module';  // í•´ì‹œê°’(16ì§„ìˆ˜) ë¥¼ 2ì§„ìˆ˜ë¡œ ë³€í™˜ í•˜ëŠ” ê¸°ëŠ¥


// block ì˜ í˜•íƒœë¥¼ í´ë˜ìŠ¤ë¡œ ì •ì˜ 
    export class Block extends BlockHeader implements IBlock {
        
        // ë¸”ë¡ Header ì˜ ë‚´ìš©ì´ ì¶”ê°€ ë¨. (extends BlockHeader ì— ì˜í•´ , interface ëŠ” iBlockHeader)
            // ê²°êµ­, â­â­â­Block í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë  ë•Œ, BlockHeader ê¹Œì§€ í•¨ê»˜ ë¬»ì–´ì„œâ­â­â­ ë‚˜ì˜´     
                /* BlockHeader ì˜ ì¸ìŠ¤í„´ìŠ¤ = {
                            version : "BlockHeader ì˜ getVersion ë©”ì†Œë“œ ì‹¤í–‰í•´ì„œ ë‚˜ì˜´", 
                            height : "ì´ì „ ë¸”ë¡ì˜ height + 1"   // âœ…ì´ì „ ë¸”ë¡ì€ BlockHeader í´ë˜ìŠ¤ë¥¼ í˜¸ì¶œí•  ë•Œ ë§¤ê°œë³€ìˆ˜ë¡œ ë“¤ì–´ì˜´
                            timestamp : "BlockHeader ì˜ getTimestamp ë©”ì†Œë“œ ì‹¤í–‰í•´ì„œ ë‚˜ì˜´",
                            previousHash : "ì´ì „ë¸”ë¡ì˜ hash"    // âœ…ì´ì „ ë¸”ë¡ì€ BlockHeader í´ë˜ìŠ¤ë¥¼ í˜¸ì¶œí•  ë•Œ ë§¤ê°œë³€ìˆ˜ë¡œ ë“¤ì–´ì˜´
                    } 
                */
            // ê·¸ëŸ¬ë©´, Block ì—ì„œëŠ”, BlockHeader ë¡œ ìƒì†ë°›ì€ ê²ƒ ì œì™¸í•˜ê³  ë‚˜ì˜¬ ê²ƒ! 
        
        // Block'Header' ì´ì™¸ì—ì˜ 'ë³¸ë¬¸' êµ¬ì„± ğŸ‘‡ | IBlock ì¸í„°í˜ì´ìŠ¤ë¡œ ë¶€í„° ë‚˜ì˜´! ê·¸ë˜ì„œ ìë™ì™„ì„± ë¨| 
            hash: string;
            merkleRoot: string;
            nonce: number;
            difficulty: number;
            data: string[];

        // ìƒì„±ì í•¨ìˆ˜ | Block í´ë˜ìŠ¤ê°€ í˜¸ì¶œë˜ë©´ ì‹¤í–‰
            constructor(_previousBlock : Block , _data : string[] ){

                // 'ì´ì „ block(_previousBlock)' ì´ 'extends ë°›ì€ BlockHeaderì˜ ìƒì„±ì í•¨ìˆ˜' ì— ì „ë‹¬
                super(_previousBlock)
                    /* [ì´ ì½”ë“œì˜ í¬ì¸íŠ¸] â­â­â­â­â­â­ | ì½”ë“œë¥¼ ë‹¨ìˆœí•˜ë©´ì„œ, ê¹”ë”í•˜ê²Œ ì“°ëŠ”ë° ìˆì–´ ì¤‘ìš”í•œ ì½”ë“œë¼ê³  ìƒê°í•¨ â­â­â­ 
                            'ì´ì „ ë¸”ë¡ë°ì´í„°' ì€ header ë¡œ ì´ë™ -> 'ìƒì†' ë˜ì–´ì„œ ë“¤ì–´ì˜¨ë‹¤. 
                            í•˜ë‚˜ì˜ Block ì˜ êµ¬ì„±ìš”ì†ŒëŠ” 1) header ì™€ 2) ë³¸ë¬¸ìœ¼ë¡œ êµ¬ì„± 
                            í•˜ë‚˜ì˜ Block ì„ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ë¡œ í‘œí˜„í•˜ì§€ ì•Šê³ , 
                                1) ì¤‘ìš”í•œ ë³¸ë¬¸ì€ ê·¸ëŒ€ë¡œ ë‘ê³  2) header(ë©”íƒ€ë°ì´í„°) ëŠ” ìƒì†ë°›ì•˜ë‹¤ëŠ” ê²ƒ
                        [ì´ í¬ì¸íŠ¸ë¥¼ ì¼ë°˜í™” í•´ë³´ê¸°] â­â­â­â­â­ 
                            ì´ê²ƒì„ ì¼ë°˜í™” í•˜ë©´, A ì˜ êµ¬ì„±ìš”ì†Œ B, C ê°€ ìˆìœ¼ë©´, ëª¨ë‘, í•˜ë‚˜ì˜ íŒŒì¼ì—ì„œ ì‘ì„±í•˜ì§€ ì•ŠìŒ. 
                            í•˜ìœ„ ìš”ì†Œ ì¤‘ ì¤‘ìš”í•œ ìš”ì†Œë¥¼ ì•ìœ¼ë¡œ ë¹¼ê³ , ë‚˜ë¨¸ì§€ë¥¼ 'ìƒì†' ë°›ì•„ì„œ, í‘œí˜„í•¨. 
                            ê²°êµ­, í•˜ë‚˜ë¡œ í‘œí˜„ë˜ëŠ” ê±´ ë™ì¼í•¨.  
                    */
            
                // Block í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì˜ ë¨¸í´ë£¨íŠ¸
                this.merkleRoot = Block.getMerkleRoot(_data)
                   // [staticì‚¬ìš©ì‹œ ì‹¤ìµ] _data ê°€ í•œë²ˆ ë“¤ì–´ì˜¤ë©´, â­'í•œë°©ì—!â­ ë¨¸í´ë£¨íŠ¸ê¹Œì§€ êµ¬í•´ì§!
                    // ë”°ë¡œ Block.getMerkleRoot ë³„ë„ë¡œ í•´ì¤„ í•„ìš” ì—†ìŒ.  

                    
                // Block í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì˜ í•´ì‹œê°’
                    // Block ì˜ êµ¬ì„±ìš”ì†Œ = 1) ë³¸ë¬¸ 2) header 
                    // ìƒˆë¡œìš´ Block ìœ¼ë¡œ ì™”ìœ¼ë‹ˆ, ëª¨ë“  êµ¬ì„± ìš”ì†Œë¥¼ í•©í•´ì„œ, ë‹¤ì‹œ í•´ì‹œê°’ì„ êµ¬í•œë‹¤. 
                this.hash = Block.createBlockHash(this)
                    /* [ê¶ê¸ˆì¦] ì´ this.hash ë¼ëŠ”ê²Œ ì–´ë–¤ ë§¥ë½ì—ì„œ ì‹¤í–‰ë˜ëŠ”ê±°ì•¼? â“â“â“
                                ì¦‰, ì–´ë–¤ ê°ì²´? ìƒˆë¡œìš´ data ê°€ ì¤€ë¹„ë˜ëŠ” ì‹œì ? 
                                1) Block ì´ë¼ëŠ” í´ë˜ìŠ¤ê°€ í˜¸ì¶œë˜ë©´ -> block ì¸ìŠ¤í„´ìŠ¤ê°€ ë§Œë“¤ì–´ì§„ë‹¤. 
                                2) ì´ block ì¸ìŠ¤í„´ìŠ¤ëŠ” a) header ì •ë³´ b) ì´ block ì´ ë§Œë“¤ì–´ ì§ˆ ë•Œ ë“¤ì–´ì˜¨, ë³¸ë¬¸ ì •ë³´ë¥¼ ë‹´ê³  ìˆë‹¤. 
                                3) ì´ì œ ì´ ì •ë³´ë¥¼ í•©ì³ì„œ 'í•´ì‹œí™”' ë¥¼ í•œë‹¤. 
                                4) ê·¸ëŸ¬ë©´, ì´ ë¸”ë¡ì—ì„œ, ì´ ì •ë³´ê°€, ì´ íƒ€ì´ë°ì— ë“¤ì–´ì™”ë‹¤ëŠ” ê²ƒì„ 'ë°•ì œ' í•  ìˆ˜ ìˆë‹¤!
                                5) â­â­â­ ì¦‰, 'í•´ì‹œí™”' ë˜ì–´ì•¼ -> 'ë°•ì œ' ë  ìˆ˜ ìˆê³  -> 'ë°ì´í„° ë¬´ê²°ì„±' ì´ ìƒê¸´ë‹¤. 
                                6) â­â­â­ 'ë¬´ì—‡' ì´ í•´ì‹œí™” ë˜ëŠ”ê°€? a) header ì •ë³´(ì´ì „ hash ë“±) + b) ì§€ê¸ˆ ë“¤ì–´ì˜¨ data! 
                    */
            
                // ë¸”ë¡ ì±„êµ´ì€ ë’¤ì— ì¶”ê°€ 
                    this.nonce = 0;
                        /* [nonce ë€?]  
                            - number used once : 'íŠ¹ì • ì¡°ê±´'ì„ ë§Œì¡±í•˜ê²Œ í•˜ëŠ” 'ìœ ì¼í•œ ê°’' ì„. 

                            - 'ì²˜ìŒë¶€í„°, 0ì´ ì—°ì†í•´ì„œ 5ë²ˆ ë‚˜ì˜¤ëŠ” í•´ì‹œê°’' ì„ ë§Œë“¤ì–´ë¼, ì™€ ê°™ì´ 
                            'íŠ¹ì • ë¬¸ì œ'ë¥¼ í‘¸ëŠ”ë°, âœ…'ëª‡ ë²ˆ' ê±¸ë ¸ë‚˜, ë¥¼ ì˜ë¯¸í•˜ëŠ”ê²Œ nonce.
                        */

                        /* [ê·¸ëŸ¬ë©´, nonce ëŠ” ì±„êµ´ì„ ë‹¤ í•˜ê³ , ì¶”ê°€ë˜ëŠ” ê°’ ì•„ë‹Œê°€?]

                        */
            
                // ì§€ê¸ˆì€ ê³ ì •ê°’. ë¸”ë¡ ì±„êµ´ ë˜ê³ , ë‚˜ì¤‘ì— ì¶”ê°€ë  ê²ƒ! 
                this.difficulty = 3
                    /* [í•´ì„]
                        'difficulty = 3' = 'í•´ì‹œê°’ ë§¨ ì•ì—ì„œ ë¶€í„°, 0ì´, 3ë²ˆ ì—°ì†' í•´ì„œ ë‚˜ì™€ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸ 
                    */

            
                // ì´ë²ˆ ë¸”ë¡ì—ì„œ ë“¤ì–´ì˜¨ data 
                this.data = _data
            }

            // ë¸”ë¡ ì¶”ê°€ í•¨ìˆ˜ 
            static generateBlock( _previousBlock : Block, _data : string[]) : Block {
                
                // (ì§€ê¸ˆ ë§Œë“¤ê³  ìˆëŠ”) Block í´ë˜ìŠ¤ë¥¼ ì‹¤í–‰ì‹œì¼œì„œ -> ë¸”ë¡ì„ ë§Œë“ ë‹¤. 
                const generateBlock = new Block(_previousBlock , _data)
                    /* generateBlock êµ¬ì¡° = Block í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤(Block ì˜ ì¸ìŠ¤í„´ìŠ¤) = {
                            // BlockHeader ë¥¼ ìƒì†ë°›ì•„ì„œ ìƒê¸°ëŠ” ë¶€ë¶„    
                                version : 
                                height : 
                                timestamp : 
                                previousHash : 
                            // Block ë³¸ë¬¸
                                merkleRoot: string;
                                nonce: number;
                                difficulty: number;
                                data: string[];
                        }
                    */


                // ë§ˆì´ë‹ì„ í†µí•´, ë¸”ë¡ ìƒì„± ê¶Œí•œì„ ë°›ì€ ë¸”ë¡ì„ ë§Œë“ ë‹¤. 
                const newBlock = Block.findBlock(generateBlock);
                    // ì´ ì½”ë“œì˜ ê¸°ëŠ¥ì„ ëª¨ë¥´ê² ì–´ ğŸ˜¥ğŸ˜¥

                return newBlock;
            }
                /* [generateBlock ê³¼ findBlock ì˜ ê´€ê³„] â­â­â­â­â­
                    generateBlock ì€ 
                        1) Block ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê³  
                        2) findBlock ì—ì„œ ë¬¸ì œë¥¼ í‘¼ block ì—, nonce ê°’ì„ ì—…ë°ì´íŠ¸ í•´ì„œ
                        3) newBlock ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•œë‹¤.  
                */
        
            // ë¸”ë¡ ì¶”ê°€ 
            // ë§ˆì´ë‹(ì±„êµ´) | ë¸”ë¡ì„ ì±„êµ´í•˜ëŠ” ë™ì‘
            static findBlock(generateBlock : Block){
                let hash : string;

                let nonce : number = 0;
                    // ì²˜ìŒì— nonce ë¥¼ 0 ìœ¼ë¡œ ì¤€ë‹¤. 
                    // ë§ˆì´ë‹ì€ ë‚œì´ë„ì— ë”°ë¼ì„œ, ë‹µì„ ì°¾ëŠ”ë°, ë¸”ë¡ ì±„êµ´ í•  ë•Œ, ì—°ì‚°ì„ ëª‡ ë²ˆ í–ˆëŠ”ì§€, ë¥¼ ì´ê³³ì— ë‹´ëŠ”ë‹¤. 
                    
                while(true){
                    generateBlock.nonce = nonce;    
                        // ë§¤ê°œë³€ìˆ˜ë¡œ ë“¤ì–´ì˜¨ generateBlock ì˜ nonce ì— nonce ì„¤ì •ê°’ ë„£ê¸° 

                    // nonce ê°’ 1 ì¦ê°€
                    nonce++;
                        // [í•´ì„] â­â­â­ 
                            // nonce ê°’ ì¦ê°€ -> block ì˜ ë³¸ë¬¸ ë³€ê²½ -> hash ë³€ê²½ë¨ â­â­â­
                            // ì´ê²ƒ ë•Œë¬¸ì—, í•´ë‹¹ ë‚œì´ë„ì— ë§ëŠ” hash ê°’ì„ ë•Œ ê¹Œì§€ ë°˜ë³µí•˜ëŠ”ê²Œ ì˜ë¯¸ê°€ ìˆìŒ. 

                    // block ì¸ìŠ¤í„´ìŠ¤(header + ë³¸ë¬¸) ë¥¼ createBlockHash ì— ë„£ê³  í•´ì‹œí™” ì‹œí‚¤ê¸°
                    hash = Block.createBlockHash(generateBlock)

                    // ë‚˜ì˜¨ í•´ì‹œê°’ì—ì„œ 'ì²« 0ì´ ì—°ì†ë˜ëŠ” ê°œìˆ˜ì™€ difficultyì´ ë§ëŠ”ì§€' í™•ì¸í•˜ê¸° 
                        // í•´ì‹œê°’(16ì§„ìˆ˜) ì´ì§„ìˆ˜ë¡œ ë§Œë“¤ê¸°
                        const binary : string = CryptoModule.hashToBinary(hash)
                        console.log("binary" , binary)

                        // 'í•´ì‹œê°’ì˜ ì²˜ìŒ ì—°ì†ë˜ëŠ” 0ì˜ ê°œìˆ˜' ê°€ 'difficulty' ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ ì²´í¬ 
                        const result : boolean = binary.startsWith("0".repeat(generateBlock.difficulty))
                        console.log("result" , result)
                            /* [ë¶ˆí™•ì‹¤ í–ˆë˜ ë¶€ë¶„]
                                "í˜„ì¬ difficulty ê°’ì„ ì–´ë–¤ ê°ì²´ê°€ ê°–ê³  ìˆëŠ”ê°€!" ì—ì„œ, constructor í•¨ìˆ˜ì—ì„œ difficultyê°€ ì •ì˜ë˜ì—ˆìŒ. 
                            */

                    // ë§ì·„ìœ¼ë©´ -> ë¸”ë¡ ì±„êµ´ ê¶Œí•œì„ ì–»ìŒ -> ì±„êµ´ëœ ë¸”ë¡ì„ ë°˜í™˜! (ì¡°ê±´ì— ì¶©ì¡±í•´ì„œ ë‚˜ì˜¨ ê°’ì„ ë°˜í™˜!)
                    if(result){
                        // ì—°ì‚°ì„ í†µí•´ ì™„ì„±ëœ hash ë¥¼ ì¸ìŠ¤í„´ìŠ¤ì— ë„£ìŒ
                        generateBlock.hash = hash
                            /* ì´ì „ê¹Œì§€, generateBlock ì˜ hash ì†ì„±ì€ ë¹„ì–´ìˆì—ˆìŒ. 
                                'generateBlock ì˜ hash ì†ì„±' ì— ë°©ê¸ˆ ê³„ì‚°í•œ hash ê°’ì„ ë„£ì—ˆìŒ. -> 'ì™„ì„±ëœ ë¸”ë¡' ì´ ëœë‹¤. 

                                ë§Œì•½, result == false ë¼ë©´, í•´ë‹¹ blockì—ëŠ” hash ê°’ì´ ë¹„ì–´ìˆë‹¤. 
                            */

                        // ì™„ì„±ëœ ë¸”ë¡ì„ ë‚´ë³´ë‚´ê¸° 
                        return generateBlock
                            /* [í•´ì„] 
                                nonceê°’ì€ ì²œì°¨ë§Œë³„ ì´ê² ì§€ë§Œ, ê²°êµ­, return ë˜ëŠ”ê²Œ ìˆê¸´ í•  ê²ƒ! â­â­â­  
                                ì˜ˆë¥¼ ë“¤ì–´, í•œë°©ì— ë§ì·„ìœ¼ë©´, nonce ëŠ” 0. 
                                11ë²ˆì§¸ì— ë§ì·„ìœ¼ë©´, nonce ëŠ” 10

                                ê·¸ëŸ¬ë©´, ì´ nonce ë¥¼ ì–´ë””ì— ì¨? 

                                ê·¸ëŸ¬ë©´, ì´ì œ, 'nonce 11 ì„ í¬í•¨í•œ header + ë³¸ë¬¸' ë¸”ë¡ì´ ìˆì–´~ ë¼ê³  âœ…'ë„¤íŠ¸ì›Œí¬ì— ì „íŒŒ' í•œë‹¤. 
                            */
                    }
                    /* [ê¶ê¸ˆí•œ ì ]
                        - ë§ì¶”ì§€ ëª» í•˜ë©´, ë‹¤ìŒ ë¸”ë¡ì´ ê³„ì† ë‚˜íƒ€ë‚˜ë‚˜?
                            - ë§¤ê°œë³€ìˆ˜ë¡œ ë‹¤ë¥¸ê²Œ ì˜¤ëŠ”ê²Œ ì•„ë‹ˆë¼, í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì˜ nonce ê°’ì´ ë³€í™”í•˜ë©´ì„œ -> ë‹¤ë¥¸ hash ê°’ì„ í…ŒìŠ¤íŠ¸ í•´ë³´ê²Œ ëœë‹¤.
                            - input ì´ ì¡°ê¸ˆë§Œ ë°”ë€Œì–´ë„, hash ê°’ì´ í¬ê²Œ ë³€í™”í•˜ë¯€ë¡œ, ì œì‹œëœ difficulty ë¥¼ ë§ì¶œ ë•Œ ê¹Œì§€, ì‹œë„í•  ìˆ˜ ìˆë‹¤.  

                        - ë¸”ë¡ ì±„êµ´ ê¶Œí•œì„ ì–»ëŠ”ë‹¤ëŠ”ê²Œ, êµ¬ì²´ì ìœ¼ë¡œ ë­ì§€? 
                            - ë§ì¶˜ë‹¤ë©´ -> 'ì „íŒŒ' í•˜ê²Œ ëœë‹¤. 
                            - ë§Œì•½, ê°€ì¥ ë¹¨ë¦¬ ë§ì·„ë‹¤ë©´ -> ê·¸ì— ë”°ë¼ì„œ 'ë³´ìƒ' ì„ ë°›ëŠ”ë‹¤. 
                            
                        - ì±„êµ´ëœ ë¸”ë¡ì„ ë°˜í™˜í•œë‹¤ê³ ? (ì¡°ê±´ì— ì¶©ì¡±í•´ì„œ ë‚˜ì˜¨ ê°’ì„ ë°˜í™˜ í•œë‹¤êµ¬?)
                            - ì´ ë§ì€, difficulty ë¥¼ ë§ì¶˜ hash ê°’ì„, generateBlock ì˜ í•´ì‹œì— ë„£ëŠ”ë‹¤ëŠ” ê±¸ë¡œ ì´í•´í•¨. 

                        - ë³´ìƒì´ ì–´ë–»ê²Œ ì§„í–‰ë˜ëŠ”ë°? â­â­â­â­â­
                            - 'ë§ˆì´ë‹' í–ˆìœ¼ë©´ -> 'ì „íŒŒ'(ë„¤íŠ¸ì›Œí¬ì— ì•Œë¦°ë‹¤.) í•˜ê³  -> 'longest ì—¬ë¶€ í™•ì¸' -> longest ë©´, ë³´ìƒì„ ë°›ìŒ!, ë” ì§§ìœ¼ë©´ ë°›ì§€ ëª» í•¨. 
                            - POW ë°©ì‹
                            - ì´ ë¬¸ì œë¥¼ 'ë§ˆì´ë‹' ì´ ì•„ë‹ˆë¼, 'ë²„ì „ì„ ì–´ë””ì— ë§ì¶°ì„œ ì—…ë°ì´íŠ¸ í•  ê²ƒ ì¸ê°€.' ì˜ ë¬¸ì œë¡œ ë³´ê¸°ë„ í•¨. 
                            - ì²˜ìŒì—” cpu ì„ ì‚¬ìš©í–ˆë‹¤ê°€, ë‚˜ì¤‘ì—” ê³„ì‚°ì´ ë›°ì–´ë‚œ gpu ë¥¼ ì‚¬ìš©
                    */                        
                }
            }

            // ë¸”ë¡ì˜ í•´ì‹œë¥¼ êµ¬í•˜ëŠ” í•¨ìˆ˜ | 'header' ì™€ 'ìƒˆë¡œìš´ data' ë¥¼ ë”í•´ì„œ 'í˜„ì¬ ë¸”ë¡ì˜ í•´ì‹œ' ë¥¼ êµ¬í•˜ëŠ” ê±´ê°€? ğŸ“› 
            static createBlockHash(_block : Block) : string {

                // 'Block í´ë˜ìŠ¤ì„ í˜¸ì¶œí•´ì„œ ê°€ì ¸ì˜¨ _block ì¸ìŠ¤í„´ìŠ¤' ì—ì„œ ëª¨ë“  ì •ë³´ë¥¼ ë¹¼ë‚´ê¸° 
                const {
                        // BlockHeader ìƒì†ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°
                        version, height, timestamp, previousHash , 
                        // Block ë³¸ë¬¸
                        merkleRoot , nonce , difficulty , data
                    } = _block

                // ëª¨ë“  ì •ë³´ë¥¼, ë‹¤ í•©ì³ì„œ, SHA256 ìœ¼ë¡œ, í•´ì‹œí™” ì‹œí‚¤ê¸°
                const value : string = `${version} ${height} ${timestamp} ${previousHash} ${merkleRoot} ${nonce} ${difficulty} ${data} `
                
                return SHA256(value).toString();
            }
                /* â­â­ _block ì´ ë­˜ ì˜ë¯¸í•˜ëŠ”ì§€ë¥¼ ì•„ëŠ”ê²Œ ë„ˆë¬´ ë„ˆë¬´ ì¤‘ìš”í•¨ â­â­â­ 
                    _block = this ë¡œ ë„£ì–´ì§€ê²Œ ë  ê²ƒ ì„ = Block í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ = ì§€ê¸ˆ ë§Œë“¤ê³  ìˆëŠ” í´ë˜ìŠ¤ì¸ Block ì˜ ì¸ìŠ¤í„´ìŠ¤ 
                    = block ì˜ ì¸ìŠ¤í„´ìŠ¤ = {
                        // BlockHeader ë¥¼ ìƒì†ë°›ì•„ì„œ ìƒê¸°ëŠ” ë¶€ë¶„    
                            version : 
                            height : 
                            timestamp : 
                            previousHash : 
                        // Block ë³¸ë¬¸
                            merkleRoot: string;
                            nonce: number;
                            difficulty: number;
                            data: string[];
                    }
                */

            // ë¨¸í´ë£¨íŠ¸ ë°˜í™˜ í•¨ìˆ˜
            // í•´ë‹¹ data ê°€ ë“¤ì–´ì˜¤ë©´ -> í•´ë‹¹ data ì˜ ìµœì¢… ë¶€ëª¨ ë…¸ë“œì˜ í•´ì‹œê°’(ë¨¸í´ë£¨íŠ¸)ì„ êµ¬í•¨ 
            static getMerkleRoot<T>(_data : T[]) : string {
                const merkleTree = merkle("sha256").sync(_data)
                return merkleTree.root()
            }
            /* [(_data : T[]) í•´ì„]
                - _data ë§¤ê°œë³€ìˆ˜ê°€ 'ë°°ì—´' ì´ê¸´ í•¨. 
                - ê·¸ëŸ°ë°, 'ë°°ì—´ ìš”ì†Œê°€ ì–´ë–¤ê²Œ ë“¤ì–´ê°ˆì§€.' ëŠ” ì•„ì§ ë¯¸ì • 
                - T ê°€ ì •í•´ì§€ë©´ 'ë°°ì—´ ìš”ì†Œë„ í™•ì •' ë¨. 
            */


    }
```

2. blockHeaders.ts 
``` ts

import { IBlock , IBlockHeader } from "@core/interface/block.interface";

class BlockHeader implements IBlockHeader {
    version: string;
    height: number;
    timestamp: number;
    previousHash: string;
        // implements(ìƒì†) ë°›ì€ ê²ƒë“¤ì€ ìë™ì™„ì„± ëœë‹¤.
    
    constructor(_previousBlock : IBlock){
        this.version = BlockHeader.getVersion()
        this.timestamp = BlockHeader.getTimestamp()
        this.height = _previousBlock.height + 1;
        this.previousHash = _previousBlock.hash

    }

    static getVersion(){
        return "1.0.0"
    }

    static getTimestamp(){
        return new Date().getTime();
    }
}

    /* [BlockHeader í´ë˜ìŠ¤ ê±°ì¹˜ë©´ ë‚˜ì˜¤ëŠ” ê²ƒ]  
        BlockHeader ì˜ ì¸ìŠ¤í„´ìŠ¤ = {
            version : "BlockHeader ì˜ getVersion ë©”ì†Œë“œ ì‹¤í–‰í•´ì„œ ë‚˜ì˜´", 
            height : "ì´ì „ ë¸”ë¡ì˜ height + 1"   // âœ…ì´ì „ ë¸”ë¡ì€ BlockHeader í´ë˜ìŠ¤ë¥¼ í˜¸ì¶œí•  ë•Œ ë§¤ê°œë³€ìˆ˜ë¡œ ë“¤ì–´ì˜´
            timestamp : "BlockHeader ì˜ getTimestamp ë©”ì†Œë“œ ì‹¤í–‰í•´ì„œ ë‚˜ì˜´",
            previousHash : "ì´ì „ë¸”ë¡ì˜ hash"    // âœ…ì´ì „ ë¸”ë¡ì€ BlockHeader í´ë˜ìŠ¤ë¥¼ í˜¸ì¶œí•  ë•Œ ë§¤ê°œë³€ìˆ˜ë¡œ ë“¤ì–´ì˜´
        }
    */

    /* [ìˆ˜ì—… í•„ê¸°]
        ì´ì „ ë¸”ë¡ì˜ í•´ì‹œê°’, ì´ì „ ë¸”ë¡ì—ì„œ ë†’ì´ 1 ì„ ì¦ê°€ì‹œì¼œì„œ ë„£ì–´ì¤˜ì•¼ í•  ê²ƒ ì´ê¸° ë•Œë¬¸
        ë¸”ë¡ì„ ìƒì„±í•  ë•Œ, ì´ì „ ë¸”ë¡ ì •ë³´ê°€ í•„ìš” 
        ì´ì „ ë¸”ë¡ì˜ í•´ì‹œ, ë‹¤ë¥´ë©´ -> ì¤‘ê°„ì— ë¹„ì—ˆë‹¤ëŠ” ì˜ë¯¸ 
        ì´ì „ ë¸”ë¡ ë†’ì´,
    */
export default BlockHeader
```


### core > __Test

---
createDate : 2023-09-07

publish : ë²¨ë¡œê·¸ 
blogTitle : reduce ë©”ì†Œë“œ 
publishURL : 
postDate : 

tags : #javascript, #1ì°¨ì‘ì„±, 

---

---
createDate : 2023-09-07

isPublished : 
publish : 
blogTitle : 
publishURL : 
postDate : 

tags : #íƒ€ì…ìŠ¤í¬ë¦½íŠ¸, #ë””ìì¸íŒ¨í„´, #kgaìˆ˜ì—…,

---







# ğŸ“Œ ì „ëµ íŒ¨í„´ìœ¼ë¡œ ë¡œê·¸ì¸ ê¸°ëŠ¥ ì´í•´í•˜ê¸°  

## ë””ìì¸ íŒ¨í„´ ì˜ì˜ ë° í•„ìš”ì„±
``` bash
- 'ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ' ì— ëŒ€í•œ 'ì¼ë°˜ì ì¸ í•´ê²°ì±…' ì„.
- ë””ìì¸ í•´í„´ì€ 'ìƒì„±, êµ¬ì¡°, í–‰ìœ„' ë¼ëŠ” ì„¸ë¶€ ì¹´í…Œê³ ë¦¬ë¡œ ë‚˜ë‰¨. 

- í•„ìš”í•œ ì´ìœ  
	- ì§€ê¸ˆê¹Œì§€ëŠ” 'ëª¨ë¡œ ê°€ë„ ì„œìš¸ë§Œ ê°€ë©´ ëœë‹¤.' ëŠ” ë§ˆìŒìœ¼ë¡œ, 'êµ¬í˜„ë§Œ ë˜ë©´ ëœë‹¤!' ë¼ê³  ìƒê°í–ˆë‹¤. 
	- ê·¸ëŸ°ë°, ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ ë•Œ, 1) [ì•ˆì •ì„±] ë‚´ ì½”ë“œê°€ ìƒê°ì§€ ëª» í•œ ì˜¤ë¥˜ê°€ ë§ì´ ë‚˜ëŠ” ê±¸ ì•Œê²Œ ë˜ì—ˆê³ , 2) [ë¹ ë¥¸ ìœ ì§€ë³´ìˆ˜]ìœ ì§€ë³´ìˆ˜ ì‹œê°„ì´ ê¸¸ì–´ì§€ë©´, ë„£ê³  ì‹¶ì€ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ì§€ ëª» í•œë‹¤ëŠ” ê²ƒë„ ì•Œê²Œ ë˜ì—ˆê³  3) [ì¬ì‚¬ìš©ì„±]ë¯¸ë¦¬ ê³µë¶€í•´ë‘” ì½”ë“œë¥¼ ë¹ ë¥´ê²Œ ì¡°í•©í•˜ê³  ì‹¶ë‹¤ëŠ” ìƒê°ë„ í•˜ê²Œ ë˜ì—ˆë‹¤. 
	- ê·¸ë˜ì„œ ë””ìì¸ íŒ¨í„´ì— ëŒ€í•´ ê´€ì‹¬ì´ ê°€ê¸° ì‹œì‘í–ˆë‹¤. 
	- ë””ìì¸ íŒ¨í„´ì€ 'ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ' ì— ëŒ€í•œ 'ì¼ë°˜ì ì¸ í•´ê²°ì±…' ì´ë¼ê³  í–ˆìœ¼ë‹ˆ, 'ì–´ë– í•œ ë¬¸ì œì—, ì–´ë– í•œ íŒ¨í„´ì„ ì¨ì•¼ í•˜ë‚˜?' ì˜ ê´€ì ì—ì„œ ì ‘ê·¼í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤. â­â­â­ 
```

<br>

## ì „ëµ íŒ¨í„´ì€ 'ì–´ë–¤ ë¬¸ì œ' ë¥¼ 'ì–´ë–»ê²Œ í•´ê²°í•˜ë‚˜?'

``` bash
[ì „ëµ íŒ¨í„´ì´ í•´ê²°í•˜ê³ ì í•˜ëŠ” ë¬¸ì œ]
- ì „ëµíŒ¨í„´ì€ 'í–‰ìœ„' ì™€ ê´€ë ¨ëœ ë¬¸ì œë¥¼ í•´ê²°í•¨. 

- ì „ëµíŒ¨í„´ì€ 'ì´ë¯¸ í´ë˜ìŠ¤ë¥¼ í†µí•´ ë©”ì†Œë“œ ê¸°ëŠ¥ì´ ë‹¤ ë§Œë“¤ì–´ì§„ ìƒíƒœ' ì—ì„œ 'ë©”ì†Œë“œì˜ ê¸°ëŠ¥ì„ ìˆ˜ì • ë° ì¶”ê°€' í•˜ê³ ì í•  ë•Œ, 'ì½”ë“œ ì•ˆì •ì„±' ì„ ìœ ì§€í•˜ë©´ì„œ, 'ìœ ì§€ë³´ìˆ˜' ê°€ ì‰½ê²Œ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë””ìì¸ íŒ¨í„´ì´ë‹¤. (ë¶€ì¡±í•œ ì¸ì‚¬ì´íŠ¸ì§€ë§Œ, ì§€ê¸ˆ ìƒê°ìœ¼ë¡œëŠ” ê·¸ë ‡ë‹¤.)

- êµ¬ì²´ì ìœ¼ë¡œ í•´ê²°í•˜ëŠ” ë°©ì‹ (ì•„ì§ ë¶€ì¡±ğŸ˜¥)
	- ê¸°ì¡´ ë¡œê·¸ì¸ ë°©ì‹ì—ì„œ 'ìƒˆë¡­ê²Œ ê¸°ëŠ¥ì´ ì¶”ê°€ ë  ë•Œ ì–´ë–»ê²Œ ì¶”ê°€ ë˜ëŠ”ê°€!' ë¥¼ ë”°ì ¸ë³´ë©´ ì•Œ ìˆ˜ ìˆë‹¤ê³  ìƒê°í•œë‹¤. (ì¢€ ë” ê³µë¶€í•´ë³´ì)
	- ì „ëµ íŒ¨í„´ ë„í‘œì— ê·¼ê±°í•´ì„œ í•µì‹¬ ê¸°ëŠ¥ì„ ë½‘ì•„ë³´ì. 


- ì¶”ê°€ì ìœ¼ë¡œ ê³µë¶€í•  ê²ƒ 
	- ê·¸ë˜ì„œ, ê²°êµ­ ë­”ë°? 
	- ì´ê²Œ ì–´ë””ì— ì“°ì¼ ìˆ˜ ìˆëŠ”ë°? 
```

- ì „ëµ íŒ¨í„´ ë„í‘œ (ì¶œì²˜ : https://youtu.be/vNsZXC3VgUA?t=528)
![](https://i.imgur.com/cwYGJ1x.png)



<br>

## ë¡œê·¸ì¸ ê¸°ëŠ¥ ì½”ë“œ ë¶„ì„ 
### ì½”ë“œ git ì£¼ì†Œ  
```
https://bit.ly/3ElIxeT
```



### 0. ë””ë ‰í† ë¦¬ êµ¬ì¡° 

ğŸ“¦05_module  
 â”£ ğŸ“‚node_modules
 â”£ ğŸ“‚user  
 â”ƒ â”£ ğŸ“‚interfaces  
 â”ƒ â”ƒ â”— ğŸ“œlogin.request.ts  
 â”ƒ â”£ ğŸ“‚service  
 â”ƒ â”ƒ â”£ ğŸ“œuser.service.ts  
 â”ƒ â”£ ğŸ“‚strategy  
 â”ƒ â”ƒ â”£ ğŸ“œAuthenticator.interface.ts  
 â”ƒ â”ƒ â”£ ğŸ“œemail.strategy.ts  
 â”ƒ â”ƒ â”£ ğŸ“œgoogle.strategy.ts  
 â”ƒ â”ƒ â”£ ğŸ“œkakao.strategy.ts  
 â”ƒ â”ƒ â”£ ğŸ“œstrategy.ts  
 â”ƒ â”ƒ â”— ğŸ“œuser.controller.ts  
 â”ƒ â”£ ğŸ“œindex.ts  
 â”£ ğŸ“œpackage-lock.json  
 â”— ğŸ“œpackage.json



### 1. `index.ts` íŒŒì¼ ë¶„ì„ 
``` ts 
const strategy = new Strategy();
	// [í•´ì„]
		// Strategy í´ë˜ìŠ¤ë¥¼ ì‹¤í–‰í•´ì„œ, ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±.
Â  Â  Â  Â  // í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì—ì„œëŠ” ì´ì œ, Strategy ì˜ 'ë©¤ë²„ ì†ì„± ë° ë©¤ë²„ ë©”ì†Œë“œ' ë¥¼ ê°–ê³  ìˆê²Œ ë¨. (âœ… ì™œëƒë©´, í´ë˜ìŠ¤ëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” í…œí”Œë¦¿ ì´ë‹ˆê¹Œ.)
Â  Â  Â  Â  // ê·¸ëŸ¼, strategy ê°ì²´ì—ëŠ” ì–´ë–¤ ë©¤ë²„ ì†ì„±ê³¼ ë©¤ë²„ ë©”ì†Œë“œê°€ ìˆê³ , ê·¸ê²Œ ì–´ë””ì—ì„œ, ì™œ í•„ìš”í• ê¹Œ? -> Strategy í´ë˜ìŠ¤ ë¶„ì„í•˜ê¸° 
```

<br>

### 2.  `strategy.ts` ì½ì–´ë³´ê¸° 
``` ts 
import {UserParams} from '../interfaces/login.request'
import {AuthenticationResponse, Authenticator} from './Authenticator.interface'


// [1ë‹¨ê³„] interface ê·œì¹™ë§Œ ìƒì„±
interface IStrategy {
    [key : string] : Authenticator
        // [ver2.1 í•´ì„] ğŸ”µ(ìµœì‹ ) 
            // ì´ê³³ì€ 1ë‹¨ê³„. 1ë‹¨ê³„ëŠ” 'interface ê·œì¹™ì„ ìƒì„±' í•˜ê¸°ë§Œ í•¨. | ì‹¤ì œë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•ŠìŒ! 
            // ì–´ë–¤ ê·œì¹™ì„ ìƒì„±í•˜ëŠ”ê°€? 
                // IStrategy (interface of strategy) ë¼ëŠ” ê·œì¹™ì€
                    // 1) ê°ì²´ ì—¬ì•¼ í•˜ê³  
                    // 2) ê°ì²´ key ë¥¼ ë™ì í• ë‹¹ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ë¶€ë¶„ì´ ìˆì–´ì•¼ í•˜ê³  
                        // ë™ì í• ë‹¹ì€ ì–´ë–¤ ì†ì„±ì¸ì§€ë¥¼ ì§€ê¸ˆ ì •í•˜ì§€ ì•Šê³ , ë‚˜ì¤‘ì—, ë³€ìˆ˜ ì•ˆì— ê°’ì„ ë„£ì–´ì¤Œìœ¼ë¡œì¨ ê²°ì •ëœë‹¤.
                    // 3) ê°ì²´ key ì˜ ê°’ì€ Authenticator íƒ€ì… ì„. 
                    // 4) 'Authenticator íƒ€ì…'ì€ âœ…'í•¨ìˆ˜' ì„.(ğŸ˜¥ğŸ˜¥ğŸ˜¥ëª°ëì—ˆìŒ)
                        // â­â­â­ ì´ ë¶€ë¶„ì´ êµ‰ì¥íˆ ì¤‘ìš”í•¨. ë‘ë£¨ë­‰ì‹¤í•œ íƒ€ì…ìœ¼ë¡œ ì½ëŠ”ê²Œ ì•„ë‹ˆë¼, js íƒ€ì… ê¹Œì§€ ì½ì–´ë‚¼ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. â­â­â­ 
                    // 5) ì–´ë–¤ í•¨ìˆ˜ëƒë©´, 
                        // input ìœ¼ë¡œ 'UserParams' ì…ë ¥ì„ ë°›ê³ , output ìœ¼ë¡œ 'AuthenticationResponse' íƒ€ì…ì„ ë‚´ë³´ë‚´ëŠ” ë©”ì†Œë“œ
                    // 6) ê²°êµ­, strategy ê°ì²´ì˜ ê° keyëŠ” â­'í•¨ìˆ˜ë¥¼ ì°¸ì¡°(ğŸ˜¥ğŸ˜¥ğŸ˜¥ëª°ëì—ˆìŒ)'â­ í•˜ë©°, í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ, AuthenticationResponse íƒ€ì…ì„ ë°˜í™˜

            // ê·¸ëŸ¬ë©´, 2ë‹¨ê²Œì—ì„œ, ê·œì¹™ì— ê·¼ê±°í•´ì„œ, ê°ì²´ë¥¼ ìƒì„±, í•´ë³´ì. 
}


class Strategy {
    // [class ë¥¼ ëŒ€í•˜ëŠ” íŒ]
        // 1) 'í´ë˜ìŠ¤ ì •ì˜ë¥¼ ë³´ê³  -> ì–´ë–¤ ê°ì²´ê°€ ìƒì„±ë  ê²ƒ ì¸ê°€.' ë¥¼ ê·¸ë ¤ë‚˜ê°ˆ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. â­â­â­ 
            // ì™œëƒë©´, 'ì‹¤í–‰ë˜ëŠ” ì½”ë“œ ë§¥ë½' ì„ ë³¼ ë•Œ, ë§Œë‚˜ëŠ” ê±´, ì¸ìŠ¤í„´ìŠ¤ ë‹¤. 
            // ê·¸ 'ì¸ìŠ¤í„´ìŠ¤ì˜ ì†ì„±ê³¼ ë©”ì†Œë“œ'ë¥¼ ì•Œì•„ì•¼, í•´ë‹¹ 'ì‹¤í–‰ ì½”ë“œ ë§¥ë½' ì˜ ê¸°ëŠ¥ì„ ì´í•´í•  ìˆ˜ ìˆë‹¤. 
            // 'ì¸ìŠ¤í„´ìŠ¤ì˜ ì†ì„±ê³¼ ë©”ì†Œë“œ'ë¥¼ ì•Œê¸° ìœ„í•´ì„œëŠ”, í´ë˜ìŠ¤ ì•ˆì—ì„œ 'ì–´ë–¤ ì†ì„±ê³¼ ë©”ì†Œë“œ' ë¡œ ì •ì˜ ë˜ì—ˆëŠ”ì§€ ì•Œì•„ì•¼ í•œë‹¤. 
            // ê·¸ëŸ¬ë©´, í´ë˜ìŠ¤ê°€ ì •ì˜ëœ ë¶€ë¶„ì„ ë“¤ì–´ê°€ì„œ í™•ì¸í•  í…ë°, ê·¸ë•Œ, 'ì´ í´ë˜ìŠ¤ì— ë”°ë¼ì„œ -> ì–´ë–¤ ê°ì²´ê°€ ë§Œë“¤ì–´ì§ˆê¹Œ.' ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ê·¸ë¦´ ìˆ˜ ìˆìœ¼ë©´ ë„ì›€ì´ ë  ê²ƒ ì´ë‹¤. 

    // [2ë‹¨ê³„] 'ë¹ˆ ê°ì²´' ìƒì„±
    private strategy : IStrategy = { }
        // [ver2.1 í•´ì„] ğŸ”µ(ìµœì‹ ) 
            // [2ë‹¨ê³„] IStrategy íƒ€ì…ì˜ ë³€ìˆ˜ì¸ strategy ë¥¼ ë§Œë“¤ì—ˆìŒ.
            // ë‹¤ë§Œ, ì•„ì§, í•´ë‹¹ ê°ì²´ì—, ë©¤ë²„ ì†ì„± ë° ë©”ì†Œë“œë¥¼ ì •ì˜í•œ ê±´ ì•„ë‹˜!!!
            
            // 2ë‹¨ê³„ë¥¼ ê±°ì¹˜ë©´, ì¸ìŠ¤í„´ìŠ¤ëŠ” ì´ëŸ° ëª¨ì–‘ì´ ë¨ 
                /* instance = { 
                        strategy : {}
                    }
                */
            // ê·¸ëŸ¬ë©´, 3ë‹¨ê³„ì—ì„œ, ë§Œë“¤ì–´ì§„ ê°ì²´ì—, 'ë©¤ë²„ ë³€ìˆ˜' ì™€ 'set ë©”ì†Œë“œ' ë¥¼ ì¶”ê°€í•´ë³´ì 


// [3ë‹¨ê³„] set ë©”ì†Œë“œ ì •ì˜ë§Œ í•¨ | ì‹¤í–‰ì€ ì•„ì§ ì•ˆ í•¨ 
    // ì„œë¹„ìŠ¤ ë¡œì§ì„ ê°ì²´ì— ì¶”ê°€í•  í•¨ìˆ˜ | â­â­â­â­â­ 'ì „ëµ'ì„ 'ë“±ë¡' 
        // ì´ key ê°€ ê°ì²´ì— ì¶”ê°€ë˜ëŠ” key ê°€ ë  ê²ƒ ì„. 
    public set(key : string , authenticate : Authenticator){
        // key ê°’ì„ ë°›ê³ , ì„œë¹„ìŠ¤ ë¡œì§ ì¶”ê°€
        this.strategy[key] = authenticate
            // [ìˆ˜ì—… í•„ê¸°] ì´ ìœ„ì— key ë¡œ , ì „ë‹¬í•  ê°ì²´ë¥¼ ì¶”ê°€  
        }

            // [ver2.2 í•´ì„] | í´ë˜ìŠ¤ë¥¼ 'ê°ì²´ ê´€ì (ì´ ì½”ë“œë¥¼ ê±°ì¹˜ë©´, instance ëŠ” ì´ë ‡ê²Œ ë¨(1)UML ì„ ì ëŠ” ëŠë‚Œ 2)classê°€ ì‹¤í–‰ë˜ë©´ ê°ì²´ê°€ ë˜ë‹ˆê¹Œ ê·¸ê±¸ ìƒê°)' ì¶”ê°€ | ğŸ”µìµœì‹ 
                // 3ë‹¨ê³„ì—ì„œ set ë©”ì†Œë“œì˜ ê¸°ëŠ¥ì„ ì •ì˜í•œë‹¤. 
                
                // 'í´ë˜ìŠ¤ëŠ” ê°ì²´ë¥¼ ë§Œë“¤ì–´ ë‚´ëŠ” í…œí”Œë¦¿' ì´ë¼ëŠ” ê´€ì ì—ì„œ, ì´ ì½”ë“œë¡œ ì¸í•´, í•´ë‹¹ ê°ì²´ ì•ˆì—ì„œ ì–´ë–¤ ì¼ì´ ë²Œì–´ì§€ëŠ”ê°€! ë¥¼ í•´ì„í•´ë³´ë©´ 
                    // this = ìƒˆë¡­ê²Œ ë§Œë“¤ì–´ì§ˆ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤
                    // this.strategy = '2ë‹¨ê³„ì—ì„œ ë§Œë“¤ì–´ì§„ strategy ë¼ëŠ” ë¹ˆ ê°ì²´'
                    // this.strategy[key] = í•´ë‹¹ ë¹ˆ ê°ì²´ì—ì„œ 'ì†ì„±'ì„ ë™ì ìœ¼ë¡œ í• ë‹¹ 
                    // "this.strategy[key] = authenticate" = í•´ë‹¹ ì†ì„±ì— authenticate ë©”ì†Œë“œë¥¼ í• ë‹¹

                // ë§Œì•½ set ë©”ì†Œë“œê°€ ì–´ë– í•œ ë§¥ë½ì—ì„œ ì‹¤í–‰ëœë‹¤ë©´, ë‹¤ìŒì˜ ì¼ì´ ë²Œì–´ì§„ë‹¤. 
                    // 1) string ìœ¼ë¡œ ëœ key ê°€ ìƒê¸´ë‹¤. 
                    // 2) í•´ë‹¹ key ì— Authenticator íƒ€ì…ì´  authenticate ë³€ìˆ˜ì— ë‹´ê¸´ë‹¤. 
                    // ì¦‰, set ì´ ì–´ë– í•œ ë§¥ë½ì—ì„œ ì‹¤í–‰ëœë‹¤ë©´, ë‹¤ìŒì˜ ê°ì²´ê°€ ë§Œë“¤ì–´ì§€ëŠ” ê²ƒ ì´ë‹¤.             
                        // [ì˜ˆì‹œ] set ë©”ì†Œë“œë¥¼ someObject.set('login', loginAuthenticator); ì´ë ‡ê²Œ í˜¸ì¶œí•˜ë©´, ì•„ë˜ì™€ ê°™ì€ ê°ì²´ê°€ ëœë‹¤ â­â­â­â­â­
                            /* 
                                this.strategy = {
                                    google(key ì—ì„œ í• ë‹¹ë°›ì€ ê°’): loginAuthenticator
                                };
                            */ 
                            /* ë˜ëŠ” ì´ë ‡ê²Œ ë‚˜ì˜¨ë‹¤ â­â­â­â­â­â­â­ 
                                this.strategy = {
                                    google(key ì—ì„œ í• ë‹¹ë°›ì€ ê°’): authenticate(credentials)
                                };
                            */
                // ê²°êµ­, ì´ ì½”ë“œë¥¼ ê±°ì¹˜ë©´, instance ëŠ” ì´ë ‡ê²Œ ë¨ â­â­â­ 
                    /*
                        1) instance ì •ì˜
                            instance = {
                                strategy : {}
                                set : function(key, authenticate){      // ê°ì²´ì—ì„œ í•¨ìˆ˜ ë¶€ë¶„ ì •ì˜ê°€ ì´ë ‡ê²Œ ë˜ëŠ” ë¶€ë¶„ì„ ì•½í–ˆìŒ. ğŸ˜¥ğŸ˜¥ğŸ˜¥ 
                                    this.strategy[key] = authenticate;
                                }
                            }
                        2) set ë©”ì†Œë“œ ì‹¤í–‰ë˜ë©´ ë²Œì–´ì§€ëŠ” ì¼
                            instance = {
                                strategy : {
                                    google : authenticate
                                }
                                set : function(key, authenticate){
                                    this.strategy[key] = authenticate;
                                }
                            }
                    */
                
                // ë‹¤ë§Œ, ì´ë ‡ê²Œ ì •ì˜ëœ set ë©”ì†Œë“œê°€ ì•„ì§ ì‹¤í–‰ëœ ê±´ ì•„ë‹˜! 
                // ì´ì œ 4ë‹¨ê³„ì—ì„œ set ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ì 


// [4ë‹¨ê³„] set ë©”ì†Œë“œê°€ index.ts ì—ì„œ ì‹¤í–‰ë¨!  
	// ê·¸ë¡œ ì¸í•´, íŠ¹ì • íƒ€ì…ê³¼ authenticate  ê°ì²´ê°€ ë§Œë“¤ì–´ì ¸ ìˆëŠ” ìƒíƒœ 
		/* this.strategy = {
				google(key ì—ì„œ í• ë‹¹ë°›ì€ ê°’): authenticate(credentials)
			};
		*/


// [5ë‹¨ê³„] setë©”ì†Œë“œê°€ ì‹¤í–‰ë˜ì—ˆë‹¤ëŠ” ê°€ì •í•˜ì—, ê²°ê³¼ë¥¼ result ì— ë„£ê¸°
    public async login (type : string, credentials : UserParams) : Promise<AuthenticationResponse>{
        // google, {email , password} google ì— ëŒ€í•œ í‚¤ ê°’ì„ ì‹¤í–‰ì‹œí‚¤ë©´ì„œ, ì„ì‹œ ê°ì²´ ê°’ì„ ì „ë‹¬
        const result = await this.strategy[type].authenticate(credentials); 
            // ì—¬ê¸°ì— ì„±ê³µ ì‹¤íŒ¨ê°€ ë‹´ê¸¸ ê²ƒ 
            // type ì´ êµ¬ê¸€ì´ë©´, êµ¬ê¸€ ë¡œê·¸ì¸ ë¡œì§ í•¨ìˆ˜ê°€ ì‹¤í–‰ë  ê²ƒ. 
        return result
    }
        // [ver2.2 í•´ì„] | í´ë˜ìŠ¤ë¥¼ 'ê°ì²´ ê´€ì ' ì—ì„œ í•´ì„í•˜ê¸° ì¶”ê°€ | ğŸ”µìµœì‹ 
            // login ë©”ì†Œë“œì˜ ì „ì œëŠ” set ë©”ì†Œë“œê°€ ì´ë¯¸ ì‹¤í–‰ë˜ì–´ì„œ, type ì™€ authenticate ê°€ í• ë‹¹ë˜ì–´ ìˆë‹¤! ë¼ëŠ” ì  ì´ë‹¤. 
            // ì´ì œ login ë©”ì†Œë“œì—ì„œëŠ” ë­˜ í•˜ë‚˜?  
                // 1) ì—¬ëŸ¬ê°œì˜ strategy ì¤‘ 'ì„ íƒ' í•œë‹¤. 
                // 2) ê·¸ë ‡ê²Œ ì„ íƒí•œ ì†ì„±ì˜ ë©”ì†Œë“œë¥¼ ì‹¤í–‰ í•œë‹¤. 
            // êµ¬ì²´ì ìœ¼ë¡œ ì½”ë“œë¡œ ë³´ë©´ 
                // this.strategy[type] = ì´ ë¶€ë¶„ì€ ë‹¤ì–‘í•œ key ì¤‘ í•˜ë‚˜ì˜ type ì„ ì„ íƒ 
                // authenticate(credentials) = ì´ ë¶€ë¶„ì€ í•´ë‹¹ type ì— ì´ë¯¸! í• ë‹¹ë˜ì–´ ìˆëŠ” authenticate ë¥¼ ì‹¤í–‰
                // const result =  authenticator íƒ€ì…ì— ì˜í•´, AuthenticationResponse íƒ€ì…ì„ ë°˜í™˜í•œë‹¤.

            // ì´ ì½”ë“œë¥¼ ê±°ì¹˜ë©´, ê°ì²´ instance ëŠ” ì´ë ‡ê²Œ ë¨
                /* 
                1) instance ì •ì˜
                instance = {
                    strategy : {}, 
                    set : (key, authenticate) => this.strategy[key] = authenticate;
                    login : (type, credentials) => {
                        const result = await this.strategy[type].authenticate(credentials);
                        return result
                    } 
                }

                2) login ë©”ì†Œë“œ ì‹¤í–‰ë˜ê³  ë‚˜ë©´, â­â­instance ê°ì²´ ì •ì˜ë¥¼ ê±´ë“œëŠ”ê²Œ ì•„ë‹˜â­â­ credentials ë§¤ê°œë³€ìˆ˜ë¥¼ íˆ¬ì…í•´ì„œ, 'ì‹¤í–‰' í•œë‹¤.
                    instance = {
                        strategy : {
                            google : authenticate(â­credentialsâ­)  
                                // ì´ë ‡ê²Œ ì½”ë“œê°€ ë³€í™”í•˜ëŠ”ê²Œ ì•„ë‹˜. 
                                // ë‹¨ì§€, ì´ì „ ì½”ë“œì™€ ë‹¤ë¥¸ ê±´, â­credentialsì´ ë§¤ê°œë³€ìˆ˜ë¡œ ë“¤ì–´ê°„ë‹¤ëŠ” ê²ƒâ­ 
                                // [ì‹œì‚¬ì ] ë©”ì†Œë“œê°€ 'ì‹¤í–‰' ëœë‹¤ëŠ” ê±´, ë©”ì†Œë“œ ì•ˆì— ë§¤ê°œë³€ìˆ˜ê°€ ë“¤ì–´ê°„ë‹¤. ëŠ” ê²ƒì„ ì˜ë¯¸í•  ìˆ˜ë„ ìˆë‹¤ëŠ” ê²ƒ. â­â­
                        }
                        set : {ë‚˜ë¦„ì˜ í•¨ìˆ˜ ì •ì˜}
                        login : {ë‚˜ë¦„ì˜ í•¨ìˆ˜ ì •ì˜}
                    }
                */
}

export default Strategy
```


<br>

### 3. ê·¸ëŸ¬ë©´, `index.ts` ì—ì„œ strategy ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•´ì„œ ì´ë ‡ê²Œ í•´ì„í•˜ê²Œ ë¨ 
``` ts
// ì „ëµ íŒ¨í„´ ê°ì²´ ìƒì„± 
const strategy = new Strategy();

    /* [ver2.0 í•´ì„]
        Strategy í´ë˜ìŠ¤ë¥¼ ì‹¤í–‰í•´ì„œ, ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±. (í´ë˜ìŠ¤ëŠ” ê°ì²´ë¥¼ ì°ì–´ë‚´ëŠ” í…œí”Œë¦¿ ì´ê¸° ë•Œë¬¸ì—, ë‹¹ì—°í•œ ìˆ˜ìˆœ.) 
        ê·¸ëŸ¬ë©´ ì§‘ì¤‘í•´ì•¼ í•˜ëŠ” ê±´, í´ë˜ìŠ¤ì—ì„œ ì–´ë–¤ êµ¬ì¡°ë¥¼ ë§Œë“¤ì—ˆê³ , ê·¸ë¡œ ì¸í•´ âœ…ì¸ìŠ¤í„°ìŠ¤ëŠ” ì–´ë–¤ ì†ì„± ë° ë©”ì†Œë“œë¥¼ ê°€ì§„ ê°ì²´ê°€ ë˜ì—ˆëŠ”ê°€ í•˜ëŠ” ì  
            // -> ì´ê±´ UML ë¡œ ë¶„ì„ì´ ë˜ì§€ ì•Šì„ê¹Œ?
        strategy ì¸ìŠ¤í„´ìŠ¤ëŠ” ì•„ë˜ì˜ êµ¬ì¡°ë¥¼ ê°€ì§
        
            {
                strategy: {}, // IStrategy ì¸í„°í˜ì´ìŠ¤ë¥¼ ë”°ë¥´ëŠ” ë¹ˆ ê°ì²´ë¡œ ì´ˆê¸°í™”ë¨
                set: function() { ... }, // ì „ëµ(ì¦‰, authenticate í•¨ìˆ˜)ì„ strategy ê°ì²´ì— ì¶”ê°€í•˜ëŠ” ë©”ì†Œë“œ
                login: function() { ... } // ì‚¬ìš©ìê°€ ì„ íƒí•œ ì¸ì¦ ì „ëµì„ ì‹¤í–‰í•˜ëŠ” ë©”ì†Œë“œ
            }
        
    /*

// ì „ëµ ë“±ë¡ 
    strategy.set('email' , new EmailAuthenticator());
        /* [ìˆ˜ì—…] {strategy : {EmailAuthenticator} , set() , login() } ì´ë ‡ê²Œ ë‹´ê²¨ ìˆê²Œ ë¨.
            ì´ë¥¼ í†µí•´ strategy ê°ì²´ëŠ” ë‹¤ì–‘í•œ ë¡œê·¸ì¸ ë°©ì‹ì„ ì•Œê²Œ ë¨. 
        */

        /* [DJ í•´ì„] ì´ ì½”ë“œê°€ ì‹¤í–‰ë˜ê³ , instance ì—ì„œ ë²Œì–´ì§€ëŠ” ì¼
            strategy = {
                strategy : {
                    email : new EmailAuthenticator() 
                    set : {í•¨ìˆ˜}
                    login : {í•¨ìˆ˜}
            }
        */
    
    strategy.set("kakao" , new KakaoAuthenticator())
        /* [ìˆ˜ì—…] {strategy : {EmailAuthenticator} , KakaoAuthenticator{authenticate},  set() , login() } */

        /* [DJ í•´ì„] ì´ ì½”ë“œê°€ ì‹¤í–‰ë˜ê³ , instance ì—ì„œ ë²Œì–´ì§€ëŠ” ì¼
            strategy = {
                strategy : {
                    email : new EmailAuthenticator(), 
                    kakao : new KakaoAuthenticator(),  
                    set : {í•¨ìˆ˜ì •ì˜}, 
                    login : {í•¨ìˆ˜ì •ì˜}
            }
        */


    strategy.set("google" , new GoogleAthenticator())
        /* [ìˆ˜ì—…] {strategy : {EmailAuthenticator} , KakaoAuthenticator{authenticate}, GoogleAuthenticator{authenticate},  set() , login() }  */

        /* [DJ í•´ì„] ì´ ì½”ë“œê°€ ì‹¤í–‰ë˜ê³ , instance ì—ì„œ ë²Œì–´ì§€ëŠ” ì¼
            strategy = {
                strategy : {
                    email : new EmailAuthenticator(), 
                    kakao : new KakaoAuthenticator(),  
                    google : new GoogleAthenticator(),  
                    set : {í•¨ìˆ˜ì •ì˜}, 
                    login : {í•¨ìˆ˜ì •ì˜}
            }
        */

```


### 4. ê·¸ ë‹¤ìŒ index.ts ì—ì„œ ë§Œë‚˜ê²Œ ë˜ëŠ” ê±´, `const userService = new UserService(strategy)` êµ¬ë¬¸ì¸ë°, UserService í´ë˜ìŠ¤ëŠ” ì•„ë˜ì™€ ê°™ì´ í•´ì„ë  ìˆ˜ ìˆìŒ. 
```  ts
// ìœ ì €ì˜ ì„œë¹„ìŠ¤ ë¡œì§ í´ë˜ìŠ¤ ì •ì˜ 

import { UserParams } from "../interfaces/login.request";
import {AuthenticationResponse} from '../strategy/Authenticator.interface'
import Strategy from '../strategy/strategy'

class UserService {

    /* [ìˆ˜ì—…] ì „ëµíŒ¨í„´ ìœ ì € ë¡œê·¸ì¸ ì„œë¹„ìŠ¤ ë¡œì§ ê°ì²´
        ì´ë©”ì¼, ì¹´ì¹´ì˜¤, êµ¬ê¸€, ì„¸ê°€ì§€ ë¡œê·¸ì¸ ë¡œì§ì„ ì‚¬ìš© í•  ê²ƒ ì„ */
    constructor (private readonly strategy : Strategy){}

        /* [í•´ì„ver2.0] ì´ ì½”ë“œë¥¼ ì§€ë‚˜ê³  instance ì—ì„œ ë²Œì–´ì§€ëŠ” ì¼ | ğŸ”µ ìµœì‹ 

            strategyì¸ìŠ¤í„´ìŠ¤ = {
                    strategy : {
                        email : new EmailAuthenticator(), 
                        kakao : new KakaoAuthenticator(),  
                        google : new GoogleAthenticator(),  
                        set : {í•¨ìˆ˜ì •ì˜}, 
                        login : {í•¨ìˆ˜ì •ì˜}
                } ì´ê³ , 
            
            'UserService í´ë˜ìŠ¤ì˜ constructor'ëŠ”, 'strategy ì¸ìŠ¤í„´ìŠ¤(strategyë³€ìˆ˜)'ë¥¼ ë°›ì•„ì„œ, '(ì´ë¯¸ ìƒê¸´) í´ë˜ìŠ¤ì˜ strategy ì†ì„±'ì— í• ë‹¹í•œë‹¤. â­â­â­ (ì´ê±¸ ëª°ëìŒğŸ˜¥)
            ì™œëƒë©´, ì´ë¯¸ ì™„ì„±ëœ Class ë¥¼ íƒ€ì…ìœ¼ë¡œ ì§€ì •í•˜ë©´, ì´ë¯¸ ì™„ì„±ëœ class ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ì˜ë¯¸, ê°€ ë˜ê¸° ë•Œë¬¸!
                (ì´ê²Œâ˜â˜ í•µì‹¬ì¸ë°, ì´ ë¶€ë¶„ì„ ì˜ ëª°ëìŒ ğŸ˜¥ğŸ˜¥ğŸ˜¥)

            ë”°ë¼ì„œ, constructor ë¥¼ ì‹¤í–‰í•˜ë©´, ì•„ë˜ì™€ ê°™ì€ UserService ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒê¹€ ğŸ‘‡ğŸ‘‡
                UserService ì˜ instance = {
                    strategy : {
                        // ì´ê±´ UserService ë°–ì—ì„œ ë“¤ì–´ì˜¨ service ì¸ìŠ¤í„´ìŠ¤ğŸ‘‡ğŸ‘‡ğŸ‘‡ 
                        strategy : {
                            email : new EmailAuthenticator(), 
                            kakao : new KakaoAuthenticator(),  
                            google : new GoogleAthenticator(),  
                            set : {í•¨ìˆ˜ì •ì˜}, 
                            login : {í•¨ìˆ˜ì •ì˜}
                    },                
        */

        
        // [ìˆ˜ì—…] íƒ€ì…ì„ ì´í›„ì— ë§Œë“¤ ê²ƒ ì„ 
    async login (type : string, credentials : UserParams) : Promise<AuthenticationResponse> {
            const result = await this.strategy.login(type, credentials)
            return result
    } 
        /* [í•´ì„ver2.0] 1) constructor ë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  2) ì´ ì½”ë“œë¥¼ ì§€ë‚˜ë©´ instance ì—ì„œ ë²Œì–´ì§€ëŠ” ì¼ | ğŸ”µ ìµœì‹ 
            UserService ì˜ instance = {
                    strategy : {
                        // ì´ê±´ UserService ë°–ì—ì„œ ë“¤ì–´ì˜¨ service ì¸ìŠ¤í„´ìŠ¤ğŸ‘‡ğŸ‘‡ğŸ‘‡ 
                        strategy : {
                            email : new EmailAuthenticator(), 
                            kakao : new KakaoAuthenticator(),  
                            google : new GoogleAthenticator(),  
                            set : {í•¨ìˆ˜ì •ì˜}, 
                            login : {í•¨ìˆ˜ì •ì˜}
                    }, 
                    login : (type, credentials) => {
                        const result = this.strategy.login(type, credentials)   
                            // this ëŠ” í˜„ì¬ í´ë˜ìŠ¤ì— ì˜í•´ ë§Œë“¤ì–´ì§„ ì¸ìŠ¤í„´ìŠ¤
                            // strategy ê°ì²´ì— login ë©”ì†Œë“œê°€ ì´ë¯¸ ì´ ìˆë‹¤ê³  ê°€ì¡
                            // â­â­â­ ì´ ë¶€ë¶„ì—ì„œ 'type' ì„ 'ì„ íƒ' í•´ì„œ -> login ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ê³  -> ê²°ê³¼ë¥¼ result ì— ë‹´ìŒ â­â­â­
                            // ì–¸ì œ 'type' ì´ ì„ íƒë˜ëŠ”ì§€! ë¥¼ ì˜ ë´ì•¼ í•¨. 
                        return result
                    } 
                }

        */
    
    
    // ì‘ë‹µê°’ ì„±ê³µ ì—¬ë¶€ë¥¼ ì—¬ê¸°ì— ì ì„ ê²ƒ ì„
    // credentials :  ìœ ì €ê°€ ì…ë ¥í•œ ì •ë³´ì˜ ê°ì²´ êµ¬ì¡° 
}

// ë¡œê·¸ì¸ ì¶”ê°€ë˜ë©´ -> strategy í´ë”ì— ì¶”ê°€í•´ì„œ ì‚¬ìš©í•˜ë©´ ë¨

export default UserService
```

<br>

### 5. ê·¸ëŸ¬ë©´, UserServiceí´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ userService ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°ì–´ë‚´ëŠ” index.ts ëŠ” ì´ë ‡ê²Œ í•´ì„ë  ìˆ˜ ìˆìŒ 
``` ts
// ì™„ì„±ëœ ê°ì²´ë¥¼ ìœ ì € ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ ìƒì„±ìì˜ ë§¤ê°œë³€ìˆ˜ë„ ì „ë‹¬ ë° ìœ ì € ì„œë¹„ìŠ¤ ê°ì²´ ìƒì„±
    const userService = new UserService(strategy)
    /* [ìˆ˜ì—…] ì‚¬ìš©ìì˜ ë¡œê·¸ì¸ ìš”ì²­ì„ ì²˜ë¦¬í•  ë•Œ, 'strategy' ë¥¼ ì‚¬ìš©í•˜ì—¬, ì•Œë§ì€ ì „ëµì„ ì„ íƒí•œë‹¤. */

    /* [2.1ver í•´ì„]
        1) [ì•Œê²Œëœ ì ] ì¸ìŠ¤í„´ìŠ¤ê°€ ì–´ë–»ê²Œ ë§Œë“¤ì–´ì§€ëŠ”ì§€ë¥¼ ê·¸ë ¤ë‚¼ ìˆ˜ ìˆìœ¼ë©´, ì´ íë¦„ì„ ì´í•´í•˜ëŠ”ë°ì— ë§ì€ ë„ì›€ì´ ëœë‹¤
        2) UserService í´ë˜ìŠ¤ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ 'strategy ì¸ìŠ¤í„´ìŠ¤' ê°€ ë“¤ì–´ê°„ë‹¤. ê·¸ëŸ¬ë©´, ë“¤ì–´ê°€ì„œ ë¬´ìŠ¨ì¼ì´ ë²Œì–´ì§€ë‚˜? 
        
        3) ì´ ì½”ë“œë¥¼ ê±°ì¹˜ê³  ë‚˜ì˜¤ëŠ” instance
            UserService ì˜ instance = {
                        strategy : {
                            // ì´ê±´ UserService ë°–ì—ì„œ ë“¤ì–´ì˜¨ service ì¸ìŠ¤í„´ìŠ¤ğŸ‘‡ğŸ‘‡ğŸ‘‡ 
                            strategy : {
                                email : new EmailAuthenticator(), 
                                kakao : new KakaoAuthenticator(),  
                                google : new GoogleAthenticator(),  
                                set : {í•¨ìˆ˜ì •ì˜}, 
                                login : {í•¨ìˆ˜ì •ì˜}
                        }, 
                        login : (type, credentials) => {
                            const result = this.strategy.login(type, credentials)   
                                // this ëŠ” í˜„ì¬ í´ë˜ìŠ¤ì— ì˜í•´ ë§Œë“¤ì–´ì§„ ì¸ìŠ¤í„´ìŠ¤
                                // strategy ê°ì²´ì— login ë©”ì†Œë“œê°€ ì´ë¯¸ ì´ ìˆë‹¤ê³  ê°€ì¡
                                // â­â­â­ ì´ ë¶€ë¶„ì—ì„œ 'type' ì„ 'ì„ íƒ' í•´ì„œ -> login ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ê³  -> ê²°ê³¼ë¥¼ result ì— ë‹´ìŒ â­â­â­
                                // ì–¸ì œ 'type' ì´ ì„ íƒë˜ëŠ”ì§€! ë¥¼ ì˜ ë´ì•¼ í•¨. 
                            return result
                        } 
                    }
        4) ì´ì œ, ì´ instacne ê°€ UserController í´ë˜ìŠ¤ì— ì „ë‹¬
    */
```

<br>

### 6. ê·¸ ë‹¤ìŒ index.ts ì—ì„œ ë§Œë‚˜ê²Œ ë˜ëŠ” ê±´, UserController í´ë˜ìŠ¤ ì´ê³ , í•´ë‹¹ í´ë˜ìŠ¤ì—ëŠ” UserServiceí´ë˜ìŠ¤ì—ì„œ ë§Œë“  ì¸ìŠ¤í„´ìŠ¤ê°€ ì „ë‹¬ë˜ë©´ì„œ, ê¸°ëŠ¥ì´ ëˆ„ì ë˜ê³  ìˆìŒ. ìš°ì„ , UserController í´ë˜ìŠ¤ëŠ” ì´ë ‡ê²Œ í•´ì„ë  ìˆ˜ ìˆìŒ. 
``` ts 
import { UserParams } from "../interfaces/login.request";
import UserService from "../service/user.service";

/* [ìˆ˜ì—…] ì‚¬ìš©ì ì„œë¹„ìŠ¤ ë¡œì§ í´ë˜ìŠ¤ ì •ì˜ 
    controller ì—ì„œ ì„œë¹„ìŠ¤ ë¡œì§ ì •ì˜í•œ ê²ƒê³¼ ë™ì¼ 
    ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œ, controller í•¨ìˆ˜ ì‹¤í–ˆí–ˆì—ˆì§€ */

class UserController {
    constructor(private readonly userService : UserService){}
        /* [DJí•´ì„ ver2.0] constructor ê°€ ì‹¤í–‰ë˜ë©´, ì•„ë˜ì˜ UserController ì¸ìŠ¤í„´ìŠ¤ ê°€ ìƒì„±
            UserController instance = {
                userService : {
                        âœ… UserServiceí´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ | index.ts ì—ì„œ UserController ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ë„£ì€ê²Œ ì—¬ê¸°ë¡œ ë“¤ì–´ì˜´âœ…âœ…
                    strategy : {
                            email : new EmailAuthenticator(), 
                            kakao : new KakaoAuthenticator(),  
                            google : new GoogleAthenticator(),  
                            set : {í•¨ìˆ˜ì •ì˜}, 
                            login : {í•¨ìˆ˜ì •ì˜}
                    }, 
                    login : (type, credentials) => {
                        const result = this.strategy.login(type, credentials)   
                            // this ëŠ” í˜„ì¬ í´ë˜ìŠ¤ì— ì˜í•´ ë§Œë“¤ì–´ì§„ ì¸ìŠ¤í„´ìŠ¤
                            // strategy ê°ì²´ì— login ë©”ì†Œë“œê°€ ì´ë¯¸ ì´ ìˆë‹¤ê³  ê°€ì¡ â­â­â­
                            // â­â­â­ ì´ ë¶€ë¶„ì—ì„œ 'type' ì„ 'ì„ íƒ' í•´ì„œ -> login ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ê³  -> ê²°ê³¼ë¥¼ result ì— ë‹´ìŒ â­â­â­
                            // ì–¸ì œ 'type' ì´ ì„ íƒë˜ëŠ”ì§€! ë¥¼ ì˜ ë´ì•¼ í•¨. 
                        return result
                    }
                }
            }
        */

    /* [ìˆ˜ì—…] login:type
        ì´ë ‡ê²Œ type ì´ ë“¤ì–´ì™”ë‹¤ê³  ê°€ì •í•˜ë©´
        ìœ„ ê²½ë¡œë¡œ ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œ, ì‹¤í–‰í•  í•¨ìˆ˜ */
        
        signin(type : string) {
            // req.body ì—ì„œ ìœ ì €ì˜ ì •ë³´ë¥¼ ë°›ì•„ì˜´ 
                // ì„ì‹œê°ì²´ 
                const loginParams : UserParams = {
                    email : "dj@naver.com",
                    password : "12345"
                }
            // (ë¡œê·¸ì¸ ì‹œë„ í–ˆì„ ë•Œ )
            // this.userService.login("google" loginParams)     // ì´ë ‡ê²Œ í•˜ë©´, google ë¡œê·¸ì¸ ë§Œ ë‚˜ì˜´ 
            this.userService.login(type , loginParams)
                // type ìœ¼ë¡œ ë°”ê¿”ì£¼ë©´ -> index.ts ì—ì„œ ë°”ê¿”ì¤„ ë•Œ ë§ˆë‹¤ ì´ì œ ë°˜ì˜ë˜ì–´ì„œ ê²°ê³¼ê°€ ë‚˜ì˜´  
        }
            /* [DJí•´ì„ ver2.0] ì´ ì½”ë“œ ë‹¤ìŒ ìƒì„±ë˜ëŠ” UserController instance ğŸ‘‡ğŸ‘‡ğŸ‘‡ 
                UserController instance = {
                    userService : {
                            âœ… UserServiceí´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ | index.ts ì—ì„œ UserController ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ë„£ì€ê²Œ ì—¬ê¸°ë¡œ ë“¤ì–´ì˜´âœ…âœ…
                        strategy : {
                                email : new EmailAuthenticator(), 
                                kakao : new KakaoAuthenticator(),  
                                google : new GoogleAthenticator(),  
                                set : {í•¨ìˆ˜ì •ì˜}, 
                                login : {í•¨ìˆ˜ì •ì˜}
                        }, 
                        login : (type, credentials) => {
                            const result = this.strategy.login(type, credentials)   
                                // this ëŠ” í˜„ì¬ í´ë˜ìŠ¤ì— ì˜í•´ ë§Œë“¤ì–´ì§„ ì¸ìŠ¤í„´ìŠ¤
                                // strategy ê°ì²´ì— login ë©”ì†Œë“œê°€ ì´ë¯¸ ì´ ìˆë‹¤ê³  ê°€ì¡ â­â­â­
                                // â­â­â­ ì´ ë¶€ë¶„ì—ì„œ 'type' ì„ 'ì„ íƒ' í•´ì„œ -> login ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ê³  -> ê²°ê³¼ë¥¼ result ì— ë‹´ìŒ â­â­â­
                                // ì–¸ì œ 'type' ì´ ì„ íƒë˜ëŠ”ì§€! ë¥¼ ì˜ ë´ì•¼ í•¨. 
                            return result
                        }, 
                        signin : (type) => {
                            ğŸ‘‡ğŸ‘‡ğŸ‘‡ ì´ UserParams ëŠ” ì–´ë””ì„œ ì˜¨ê±°ì§€?? -> ì•„ import í•´ì™”êµ¬ë‚˜
                            const loginParams : UserParams = {
                                email : "dj@naver.com",
                                password : "12345"
                            }
                            this.userService.login(type , loginParams)
                                // this = UserController í´ë˜ìŠ¤ ì‹¤í–‰ìœ¼ë¡œ ì¸í•´ ìƒê¸°ëŠ” ì¸ìŠ¤í„´ìŠ¤ 
                                // this.userService.login = UserController í´ë˜ìŠ¤ë¥¼ ì‹¤í–‰í•´ì„œ ìƒê¸°ëŠ” ì¸ìŠ¤í„´ìŠ¤ì˜ userService ì†ì„± ì•ˆì— ìˆëŠ” login ì†ì„±
                                // this.userService.login(type , loginParams) = ì´ì œ, í•´ë‹¹ login ì†ì„±ì— typeê³¼ loginParamsë¥¼ ì „ë‹¬
                                // ì´ ìˆœê°„, login params ì— ë¬´ì—‡ì´ ì „ë‹¬ë˜ëŠ”ì§€, ì–´ë–»ê²Œ ìŒ“ì—¬ê°€ëŠ”ì§€! ë¥¼ ì•Œì•„ì•¼ í•¨.â­â­â­ 
                                // ë­”ê°€ í•˜ë‚˜ì”© í•˜ë‚˜ì”©, ìŒ“ì—¬ê°€ëŠ” ëŠë‚Œì´ë‹¤. â­â­
                        }
                    }
                }
            */

        // íšŒì›ê°€ì…, signup ë¡œì§ 
        signup(){
            // íšŒì›ê°€ì… ë¡œì§
        }
}
export default UserController
```

<br>

### 7. UserController í´ë˜ìŠ¤ë¥¼ í˜¸ì¶œí•´ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“œëŠ” ê²½ìš°, ì´ë ‡ê²Œ í•´ì„ë  ìˆ˜ ìˆìŒ. 
``` ts
// ìœ ì € ë¡œê·¸ì¸ ë¡œì§ í´ë˜ìŠ¤ ìƒì„± ë° ìœ ì € ì„œë¹„ìŠ¤ ë¡œì§ ê°ì²´ ìƒì„±ì ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬
const userController = new UserController(userService)

    /* [DJí•´ì„] ì´ ì½”ë“œë¥¼ ê±°ì¹˜ë©´ ë‚˜ì˜¤ëŠ” instance
        UserController instance = {
            userService : {
                    âœ… UserServiceí´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ | index.ts ì—ì„œ UserController ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ë„£ì€ê²Œ ì—¬ê¸°ë¡œ ë“¤ì–´ì˜´âœ…âœ…
                strategy : {
                        email : new EmailAuthenticator(), 
                        kakao : new KakaoAuthenticator(),  
                        google : new GoogleAthenticator(),  
                        set : {í•¨ìˆ˜ì •ì˜}, 
                        login : {í•¨ìˆ˜ì •ì˜}
                }, 
                login : (type, credentials) => {
                    const result = this.strategy.login(type, credentials)   
                        // this ëŠ” í˜„ì¬ í´ë˜ìŠ¤ì— ì˜í•´ ë§Œë“¤ì–´ì§„ ì¸ìŠ¤í„´ìŠ¤
                        // strategy ê°ì²´ì— login ë©”ì†Œë“œê°€ ì´ë¯¸ ì´ ìˆë‹¤ê³  ê°€ì¡ â­â­â­
                        // â­â­â­ ì´ ë¶€ë¶„ì—ì„œ 'type' ì„ 'ì„ íƒ' í•´ì„œ -> login ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ê³  -> ê²°ê³¼ë¥¼ result ì— ë‹´ìŒ â­â­â­
                        // ì–¸ì œ 'type' ì´ ì„ íƒë˜ëŠ”ì§€! ë¥¼ ì˜ ë´ì•¼ í•¨. 
                    return result
                }, 
                signin : (type) => {
                    ğŸ‘‡ğŸ‘‡ğŸ‘‡ ì´ UserParams ëŠ” ì–´ë””ì„œ ì˜¨ê±°ì§€?? -> ì•„ import í•´ì™”êµ¬ë‚˜
                    const loginParams : UserParams = {
                        email : "dj@naver.com",
                        password : "12345"
                    }
                    this.userService.login(type , loginParams)
                        // this = UserController í´ë˜ìŠ¤ ì‹¤í–‰ìœ¼ë¡œ ì¸í•´ ìƒê¸°ëŠ” ì¸ìŠ¤í„´ìŠ¤ 
                        // this.userService.login = UserController í´ë˜ìŠ¤ë¥¼ ì‹¤í–‰í•´ì„œ ìƒê¸°ëŠ” ì¸ìŠ¤í„´ìŠ¤ì˜ userService ì†ì„± ì•ˆì— ìˆëŠ” login ì†ì„±
                        // this.userService.login(type , loginParams) = ì´ì œ, í•´ë‹¹ login ì†ì„±ì— typeê³¼ loginParamsë¥¼ ì „ë‹¬
                        // ì´ ìˆœê°„, login params ì— ë¬´ì—‡ì´ ì „ë‹¬ë˜ëŠ”ì§€, ì–´ë–»ê²Œ ìŒ“ì—¬ê°€ëŠ”ì§€! ë¥¼ ì•Œì•„ì•¼ í•¨.â­â­â­ 
                        // ë­”ê°€ í•˜ë‚˜ì”© í•˜ë‚˜ì”©, ìŒ“ì—¬ê°€ëŠ” ëŠë‚Œì´ë‹¤. â­â­
                }
            }
        }
    */

// userController.signup("email");
// userController.signup("google");
userController.signin("kakao");

// $ npx ts-node ./user/index.ts ì´ë ‡ê²Œ ì‹¤í–‰
```

<br>

## ğŸ£ëŠë‚€ì  

``` bash 
- ì½”ë“œ ê³µë¶€í•  ë•Œ, 'í•´ì„ë³¸' ì´ ìˆìœ¼ë©´ -> ê·¸ê±¸ ë°”íƒ•ìœ¼ë¡œ ì ìš©í•´ì„œ, í”„ë¡œì íŠ¸ë¥¼ í•  ìˆ˜ ìˆì§€ ì•Šë‚˜? ë¼ëŠ” ìƒê°ì„ í–ˆìŒ. 
	- ì¦‰, ì „ëµ íŒ¨í„´ì— ëŒ€í•œ í•´ì„ì„ ì‘ì„±í•˜ëŠ”ë°, ê·¸ ëª¨ë“  ì£¼ì„ì„ í”„ë¡œì íŠ¸ì— ê¸°ì¬í•  ìˆ˜ ëŠ” ì—†ìŒ. 
	- ê·¸ë¦¬ê³  'í•´ì„ë³¸ì— version' ì„ ë¶™ì´ë©´ ì¢‹ë‹¤ê³  ìƒê°í•¨. 
	- ê·¸ë¦¬ê³  'ì¢‹ì€ ê¸°ë³¸ ì˜ˆì œ ì½”ë“œ' ë¡œ 'í•´ì„ë³¸' ì„ ë§Œë“¤ë©´ ì¢‹ê² ë‹¤ê³  ìƒê°í•¨. 
	- 'ì˜ˆì œ ìƒí™©' ì— ëŒ€í•´ì„œ 'í•´ì„ë³¸ë“¤'ì„ ë¸”ë¡œê·¸ì— ì˜¬ë¦¬ìê³  ìƒê°í•¨ 

- í´ë˜ìŠ¤ë¥¼ ê³µë¶€í•  ë•ŒëŠ”, 'í•´ë‹¹ í´ë˜ìŠ¤ ì •ì˜' ì™€ 'ì´ëŸ° ì •ì˜ê°€ êµ¬ì²´ì ìœ¼ë¡œ ì–´ë–¤ ê°ì²´ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ”ê°€!' ë¥¼ ë§¤ì¹­í•˜ë©´ì„œ, ê³µë¶€í•˜ë©´ íš¨ê³¼ì ì„ â­â­â­ 

- ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë¡œë°ì—ì„œ 
	1) í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€, í´ë˜ìŠ¤ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ë“¤ì–´ê°€ê³  -> ë§¤ê°œë³€ìˆ˜ë¡œ ë“¤ì–´ê°„ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€, ìƒˆë¡œìš´ í´ë˜ìŠ¤ì˜ íƒ€ì…ì´ ëœë‹¤ëŠ” ê²ƒ â­â­â­â­â­â­ 
		ex) const userController = new UserController(userService) 
			> userService = UserService í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì„. 
			> userService ì´ê²Œ, ìƒˆë¡œìš´ í´ë˜ìŠ¤ì¸ UserController í´ë˜ìŠ¤ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ë“¤ì–´ê° 
			> constructor(private readonly userService : UserService){}
			> ê·¸ëŸ¬ë©´, ìœ„ ì½”ë“œë¡œ ì¸í•´, 1) userService ì†ì„±ì´ ìƒê¸°ê³  2) í•´ë‹¹ ì†ì„±ì—ëŠ” 'UserService í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤' ê°€ 'íƒ€ì…' ìœ¼ë¡œ ì§€ì •ë˜ì—ˆìœ¼ë¯€ë¡œ, 'UserService í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤' ê°€ ë“¤ì–´ê°. 

	2) ê²°êµ­, 'í´ë˜ìŠ¤ê°€ ë§Œë“¤ì–´ë‚´ëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ â­ëˆ„ì â­' ë˜ì–´ê°€ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆëŠ”ë°, 'ì–´ë– í•œ ê³¼ì •ì„ í†µí•´ ëˆ„ì ' ë˜ëƒë©´
		1) ê·¸ ë‹¤ìŒ í´ë˜ìŠ¤ì— 'ì• í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤' ë¥¼ ì „ë‹¬í•˜ê³  
		2) ë‹¤ìŒ í´ë˜ìŠ¤ì—ì„œ 'constructor(private readonly userService : UserService){}' ì´ë ‡ê²Œ ìƒì„±ì í•¨ìˆ˜ë¥¼ ì •ì˜
		3) ê·¸ë˜ì„œ, 'ì• í´ë˜ìŠ¤ì™€ ë™ì¼í•œ ì´ë¦„ì˜ ë³€ìˆ˜ê°€ ì†ì„±' ì´ ë˜ê³ , 'íƒ€ì… ë¬¸ë²•ì— ì˜í•´ UserService í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ value' ê°€ ë¨. 
```








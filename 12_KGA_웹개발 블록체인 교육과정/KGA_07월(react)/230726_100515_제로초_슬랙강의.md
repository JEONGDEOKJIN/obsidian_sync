


### 리소스 

| 구분 | 설명 | 비고 |
| ---- | ---- | ---- |
| 제로로 sleact 깃헙      |      |https://github.com/ZeroCho/sleact      |

```
redux 말고 -> jotai, zustand, recoil 최근엔 이렇게 쓴다고 함. 
중요한건, 하나 익혔다고, 계속 그것만 쓰는게 아니라 
계속 최신 것 찾아보고 해야 한다는! 
```


### 질문 | 이슈 날 것 같은 사항들 

```
1. 리액트 리덕스를 안 쓴다? 

2. npm i typescript 같은 걸 하면 > node_modules, package-lock.json 생김 
	- node_modules = 실제 소스 코드 -> 너무 무거워서 안 올림 -> package.json 만 올림 -> 그러면 어느 환경에서나 npm i 하면 -> package.json 에 있는게 설치 됨. 

3. css 할 때, styled component 할지, 이모션 할지. 우선 이모션으로 가는데, 음... 비슷하다고 하긴 하는데 

```


### 중요한 내용 

#### 1. '화면 반영 여부' 에 따라서, 반영되면 state, 반영되지 않으면 useRef
```
화면에 반영되는 데이터는 state 로 
반영되지 않은 것은 useRef
```

#### 2. 배포 할 때 
```
1) dist 파일
2) index.html 
이거 전달해주면 됨 
```
![](https://i.imgur.com/eYtotcD.png)


#### 3. 반복 업무를 줄이는 것. 그게 실력이 될 수 있다. 그 부분을 없애는 쪽으로 생각하자. 나를 숙달시키는 것도 필요한데, 그 부분을 없애는 쪽! 생각하는게 중요하다 ⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐ 




### 느낀점 

```
새로운 방식으로 계속 만들어보는 것도 너무 중요할 것 같음
```




## [섹션 0] 프론트 엔드 초기 셋팅 

### 1. 기본 셋팅 

``` bash
# 백엔드 폴더 이동
cd back

# 필요한 모듈 다 받기 
npm i 

# .env 파일 설정 
COOKIE_SECRET = sleactcookie
MYSQL_PASSWORD = mysqlpwdj

# 테이블 만들기 
npx sequelize db:create

  # 실행 해보기 
  npm run dev

# 서버 끄고 -> 가짜 데이터 만들기 

# 가짜 데이터 생성하기 
npx sequelize db:seed:all
	# 안 되면 직접 쳐야 함 
	# workspace = 회사, channel = 부서 로 구분된 가짜 데이터 만들기 

  # 다시 실행 해보기 
  npm run dev

# 접속해보고 제대로 돌아가면 됨. 
http://localhost:3095/login

```


- `.env 파일 설정` 
![](https://i.imgur.com/wTO9rkq.png)


### 2. 프론트엔드 셋팅 | setting 파일 기반으로 만들어나가면 된다 😥😥 

- 주의사항 
```
- 타입 스크립트 
- settings/ts 에 있으니까, 로그인 가서 그냥 치면 됨. ⭐ 

```


#### 꼭 알아둬야 하는 것 

```
1. npm i typescript 같은 걸 하면 > node_modules, package-lock.json 생김 
	- node_modules = 실제 소스 코드 -> 너무 무거워서 안 올림 -> package.json 만 올림 -> 그러면 어느 환경에서나 npm i 하면 -> package.json 에 있는게 설치 됨. 

2. 내가 의존하고 있는 버전 까지 적힌게 package-lock.json 파일임 
```


#### 셋팅 
``` bash 
# cd alecture 이동 (프론트로 이동) 

# npm i 로 설정 하기
npm init
혹은 npm init -y
	# 그러면, package.json 이 생김 
	# 설치한 패키지랑 이름이 겹치면 에러가 남 📛 | 주의 

# 
npm i react react-dom

npm i typescript
npm i @types/react @types/react-dom


# 코드 검사 도구  | 이건 설치함 ✅
npm i -D eslint 

# 코딩 스타일 | 이건 자동 설치 되어 있네 
	# prettier 정렬 
	# 연결을 정렬해주는 도구 
	# eslint 랑 prettier 랑 연결 
npm i -D prettier eslint-plugin-prettier eslint-config-prettier 

# .prettierrc .eslintrc .tsconfig.json 설정파일 확인 

# [필수 셋팅⭐]  타입스크립트를 자바스크립트로 변환 할 때 바벨을 사용하는 이유 
	1. 변환 방식에는 1) TS -> JS 2) TS -> 바벨 -> JS 가 있음 
	2. 바벨은 CSS, HTML, 이미지를 모두 JS 로 변환해줌 
	3. 그래서, 바벨을 가운데에 두는게 편함 

# [필수 셋팅⭐] 'strict = true' 는 필수! 
```



### 3. babel과 webpack 설정하기 | TS 로 인해 바뀐 부분이 있다고 하는데, 문제는 없지만, 혹시 이 부분에서 에러가 날 수 있으니 주의할 것 ✅✅ 

- 부족한 것 
```
지금 웹팩 설정에서 막히는건가😥 
```

#### 필수 지식 

```
프론트 엔드 개발은, 타입 스크립트를 쓰더라도, 결국, html, css, js 로 귀결되어야 함. 
```

- index.html 의 중요성
```
성능 및 검색에서 중요 
왜냐면, 브라우저에서 처음 읽는게 결국, index.html

so. 
1) 핵심 css 는 index.html 에 두고 
2) UX 중요성이 떨어지는 건 JS 로 두고 (이게 구글이 권장 )
```


### 설치 과정 및 명령어 

``` bash
# 웹팩, 바벨 관련 설정 | ⭐ 작업 하고자 하는 폴더에서 이거 설치해줘야 함 ⭐⭐ | 우선 ts 폴더에 했음 맞으려나 
npm i -D webpack @babel/core babel-loader @babel/preset-env @babel/preset-react

# 타입 스크립트에서 웹팩 및 바벨 설정 
npm i -D @types/webpack @types/node @babel/preset-typescript

# CSS 로더 설치 | CSS 변환해주는 것 
npm i style-loader css-loader

# html 을 만들어야, 바벨이 3형제 (html, js, css) 변환해줄 수 있음. 
```


### 4. TS + webpack 실행하기 

- 꼭 주의할 것
```
git 받고 -> npm i 로 설치해서 -> 그냥 하기   
```


``` bash
# 웹팩이 TS 를 돌릴 때, ts-node 라이브러리를 통해서 돌리기 때문에 설치 
 npm i cross-env ts-node

# package json 에서 npm run build 이렇게 셋팅되어 있으므로, 실행할 때, npm run build 

"scripts": {
    "dev": "webpack serve --env development",
    "build": "cross-env NODE_ENV=production webpack"}
```



### 5. 웹팩 데브 서버 

``` bash
# [기존] 글자 하나 바꾸면 > npm run build 해야함 
# [now] hot reloading 을 사용하면, 이 과정 필요 없음. > so, 웹팩 데브 서버 설치하기


# 설치 
npm i webpack-dev-server -D
npm i webpack-cli 

# 더 있는데 안 씀... 
# 이런게 다.. create-react-app 에 다 있음. 
```



### ⭐ 로그인 챕터 들어가기전 할 것 

``` bash
# 1. npm i 해서 package.json 에 있는거 받아주기 
-> 이것도 되어 있는거 같은데

# 2. webpack 설치 된걸로 빌드 시키기  
npm run build 
	👉 dist > app.js 안에 변환된거 있으면 오캐이 

# 3. index.html 실행 시키기 
'ALT L O' 로 실행하면 됨. 
CF. 만약, 안 되면, '<script src="./dist/app.js"></script>'	이거 경로 수정해서 보기 

# 웹팩 서버로 켜보기 
1) npm run dev 
2) http://localhost:3090/ 들어가기

# 여기까지 하고, 앞으로는 create-react-app 하면 됨 
```



### 6. 폴더 구조 

- 설정한 구조 
```
pages : 서비스 하는 페이지 
components : 자잘한 컴포넌트 
layouts : 페이지들 간 공통 레이아웃
```


- 폴더 구조에 대한 설정 @webpack.config.ts
![](https://i.imgur.com/VT68zz0.png)
![](https://i.imgur.com/u21rW3l.png)


- 추가 개념
```
history api fallback 
이걸 해서, login 을 추가로 넣으면 그걸 인식 한다? 
```



### 7. 코드 스플리팅 이모션 | 😥😥 styled component 대신 이모션을 사용했음. 이건 충돌이 날 수도 있을거 같은데?


- 코드 스플리팅 
``` bash
로딩 시간 짧게 해서 필요한 컴포넌트만 불러오도록
ex) signup 할 때, login 안 되게 하면, 아낄 수 있음. 

- 기준 예시 : 페이지 단위, 서버 사이드 안 된 애들 

- 설치 
npm i @loadable/component
```


- 이모션 
``` bash
설명은 6:36 

- 원칙 
내가 쓸 예정인 컴포넌트에 미리 css 를 입혀놓는 것 

- 특징 
sass, css 문법이 섞여있음

- 팁! 중요한 부분
	- 최대한 컴포넌트는 적게 만드는게 좋음 -> 왜냐면, 변수명 짓는게 어려움 
	- 그래서, '& > span' 이런 구문을 최대한 활용 ⭐⭐⭐⭐⭐ 

# 설치 
npm i @emotion/react
npm i @emotion/styled

# 가져오기 
import styled from '@emotion/styled';

```


### 8. 이모션 babel plug-in

- 언제 쓰나? 
```
'form 태그 자식으로 label 이 있으면, 이 스타일을 적용해라' 라는 걸 하고 싶을 때
```

- 설치 및 셋팅
``` bash
# 설치 
npm i @emotion/babel-plugin

#  webpack.config.ts 설정 변환
  env: {
	development: {
	  plugins: ['@emotion/babel-plugin'  , require.resolve('react-refresh/babel')],
	},
  },
```





## [섹션1] 로그인, 회원가입 만들기 

### 1. 회원가입 페이지 만들기 
#### 아이콘 가져오기 
1) 이건 학습 자료에 있는 링크. 만약, 여기에서 해시값이 변하면, 일일이 찾아줘야 함 
``` JS
    <link rel="stylesheet" href="https://a.slack-edge.com/bv1-10/client-boot-styles.82a58f4.min.css?cacheKey=gantry-1674776250" crossorigin="anonymous" />
// 82a58f4 : 이건 해시값임 
// 이건, 매번 업데이트 되기 때문에, 체크해야 함 

    <link rel="stylesheet" href="https://a.slack-edge.com/bv1-10/slack-kit-styles.b2b0c56.min.css?cacheKey=gantry-1674776250" crossorigin="anonymous" />

    <link rel="shortcut icon" href="https://a.slack-edge.com/cebaa/img/ico/favicon.ico" />
```


2) 해당 아이콘을 개발자 도구로 찾고 -> 오늘쪽 상단에 마우스 올리면, '어떤 css 에서 나오는가!' 를 알 수 있음. 

![](https://i.imgur.com/oLzOZD4.png)
![](https://i.imgur.com/z0wUGIJ.png)

3. 변경된 해시값으로 넣어주기 

- 확인한 값 
![](https://i.imgur.com/wSMTLr6.png)

- 업데이트 한 값 
![](https://i.imgur.com/a96UQeK.png)


4. 아니면, 그냥 받아서 -> img 폴더에 넣고 쓰면 됨 



#### 1) 이메일 주소, 닉네임, 비밀번호, 확인, 넣으면, -> 콘솔창 보이게 하기 

- 만들어야 하는 것 
![](https://i.imgur.com/7j7FzcL.png)


- DFD 분석 


| 구분        | 설명                | 구현                                                                                     | 비고 |
| ----------- | ------------------- | ---------------------------------------------------------------------------------------- | ---- |
| 입력        | Input 값들          |                                                                                          |      |
|             | 회원가입 완료! 됐어! 라고 알림 | Button 을 누르면 onSubmit 이벤트가 실행 되게 함.  |      |
| 처리        |                     |                                                                                          |      |
| 자료 저장소 |                     |                                                                                          |      |
| 출력        |                     |                                                                                          |      |






#### 2) 비밀번호 misMatch (관련 개념 : 닉네임에도 동일적용하기) 


- 만들어야 하는 것 
```
다 일치 해야 -> '비밀번호 일치하지 않습니다.' 경고문 사라지게 하기 
```

![](https://i.imgur.com/i3OqhoB.png)


### 2. 커스텀 훅 만들기 👉 이거 타입스크립트랑 겹쳐져서 너무 어려운데 그냥 패스 하면 안 되나......... | 커스텀 훅 일단 패스... 😌😌😌😌😌😌😌 

```
email 과 nickname 만 중복이 된 상황 
-> 중복이 된 아이들 '커스텀 훅' 만들어서 제거하기 

리액트가 기본제공하는 훅을 합쳐서 만든다. 
```

![](https://i.imgur.com/vdHCz1S.png)

1) 공통되는 애들을 하나로 합쳐준다. 
![](https://i.imgur.com/sUVDPID.png)

```
  return [value , handler , setValue 
  이 순서를 잘 기억 ⭐⭐⭐ 
```

2) 이벤트 훅 에서 만든 걸 사용하는 경우, 사용하지 않는 경우가 있음!  
![](https://i.imgur.com/DHLv8Hz.png)



### 3. axios 로 요청보내기 와 CORS, proxy | 

#### 1) 회원가입 한 데이터 서버로 보내기 | 

```
리덕스를 사용하지 않고, 바로 그냥, axios 를 쓴다. 
```

- 강의에서 이렇게 함 
``` bash 
# npm 설치 
npm i axios

# npm import @index.tsx
import axios from 'axios'

# proxy 설정 
👉 아래 필기 참고 

# axios 경로 기재 
	// 비밀번호 1&2차 미스매치가 없을 때, 회원가입하기 
	if(!mismatchError && nickname) {
		console.log("서버로 회원 가입하기")
		axios.post('/api/users' , {
			email, 
			nickname, 
			password
		})

# 에러시 보여주게 하기 
👉 아래 부분 참고 


👉 결국, 비동기 요청을 3단계로 나눠서 설명할 수 있음! ⭐⭐⭐ 
- 단계 구분 
	- 1단계 : 로딩 단계 
	- 2단계 : 성공 단계 
	- 3단계 : 실패 단계 

- 특징 
	- 이걸 이제 redux 에서도 비슷하게 하는 것 같음. 

```



#### 비동기 요청 3단계 
![](https://i.imgur.com/wJ7XHTA.png)




#### 에러시 보여주게 하기 구체적인 과정 
1) 화면에 보여지는 건 모두 state 로 상태 관리
![](https://i.imgur.com/TVWTLTw.png)

2) axios 의 catch 구문에서 오류 함수를 넣어주기
```
이렇게 하면, '⭐서버에서 보내는 실제 오류 메시지⭐' 를 받을 수 있음! 
```
![](https://i.imgur.com/FuS3q0V.png)


3) 실제로 에러가 났을 때 보여줄 부분 
- 실제 에러 메시지를 가져옴
![](https://i.imgur.com/Zd7s9We.png)

![](https://i.imgur.com/umukreh.png)
![](https://i.imgur.com/IsTicrH.png)


4) 초기화 
```
이걸 하지 않으면, 이전 오류가 계속 남음 
```
![](https://i.imgur.com/QP9tZ8e.png)





#### 이 부분 구현할 때 만날 수 있는 이슈 

1. CORS 설정 , proxy 설정 
``` js
원래, localhost 3090 에서 localhost 3090 으로 요청이 되지 않는다. 하지만, 지금은 요청이 된다. 왜? 되는거지? 

백엔드에서 할 수 있는 방법이 CORS 
프론트에서 할 수 있는 방법은 proxy 설정 

1. [@webpack.config.ts 에서 설정]
proxy: {
      '/api/': {  
        target: 'http://localhost:3095',
        changeOrigin: true,
        ws: true,
      },
    },
    // [해석 1] 
	    api 로 보내는 요청은, 주소를, 3095 로 바꿔서 보내겠다! 라는 의미
    // [해석2]
	    프론트에서 보낸 것은, 3095 포트에서 보낸 것 처럼 취급하겠다! 


2. [post 요청에서 localhost 제거]
// 과거 
	axios.post('http://localhost:3095/api/users' , {
	// 이건, 'localhost 3090 이 3095 에게 보낸 것 임'
	// 받는 사람의 주소를 썼음 
	
// now : proxy 설정 후 
	axios.post('/api/users' , {
	// 이건, 'localhost 3095가 3095 에게 보낸 것 임'
	// 변화된 것 = 누가 보냈는가! 가 바뀜 ⭐⭐⭐⭐⭐ 
	// 예전엔 3090 이 보냄 . 지금은 3095 가 보냄 

3. webpack 재설치 했으니 -> npm run dev 로 프론트 다시 시작해주기 

CF. 403 에러가 나는 경우 
	- post 전달은 되었으나, id 등이 중복되어 거절되었다는 의미. 
	- 이렇게 네트워크 탭을 보고 요청 상황을 파악하는게 중요함.

CF. 둘 다 localhost 일 때, 에러를 피해가는 경우에 쓸 수 있는 정도. 
```


- 동일한 포트 번호에서 동일 번호로 요청을 보냈을 경우의 메시지 
![](https://i.imgur.com/6atQXxZ.png)

- CORS 설정
![](https://i.imgur.com/8CLQPCZ.png)

- WEBPack dev 서버에서 proxy 설정 
![](https://i.imgur.com/c6bbJiX.png)

- post 요청에서 localhost 제거
![](https://i.imgur.com/L7WfLvw.png)




#### CF. 이 부분 구현할 때, 추가 학습해야 할 것들. 알아야 할 것들 



- 네트워크 탭을 확인해서, 요청이 정상적으로 잘 갔는지 를 확인 할 수 있어야 함.  
![](https://i.imgur.com/oS91nYB.png)




- 여기 header 에 있는 내용들 다 알아야 함 
![](https://i.imgur.com/EgxZOMw.png)



### 4. 로그인 페이지 만들기 (swr 사용하기, 쿠키 공유하기까지 포함)

#### 1. swr, fetcher 사용해서 axios 로 서버와 통신

- swr 필요성
```
- 로그인 성공한 유저 정보가, 컴포넌트 마다 필요함 == 전역 상태 관리가 필요함 
- 리덕스를 쓸 수 있음. 
- 리덕스 대신 context API 혹은 swr 을 사용하는 것 같음 
- swr 은 1) 보통 get 요청을 보내면 2) 응답받은 데이터를 저장해줌 (POST 요청을 보낼 수 있긴 함)

```

- 방법 
``` bash 
# swr 설치 
npm i swr

# fetcher 를 받아서 쓸 곳에서 작업하기 
	# 1) import 해오기 
	import fetcher from '@utils/fetcher';
	
	# 2) 만들 fetcher 함수에서 url 전달하고 -> axios 통신 결과 값 받아오기
	const {data, error} = useSWR('http://localhost:3095/api/users' , fetcher)

# fetcher 함수 만들기 @utils > fetcher.ts
	# 1) 기본 처리 fetcher 설정
	const fetcher = (url : string) => {
	    // 매개변수로 받은 url 로 get 요청 보내기 
	    axios.get(url)
	    .then((response) => {
	        // 👇👇 이 response.data 데이터가 index.tsx 에서
	            // const {data}  = useSWR('http://localhost:3095/api/users' , fetcher) 여기에서의 {data} 로 받아짐
	        response.data
	    })
	};

# 기본 fetcher 쿠키 데이터 받기 위해 withCredentials true 설정 
	- 이 설정을 하지 않으면, 서버 포트와 클라이언트 포트가 다를 때, 쿠키가 전달되지 않음. 
	# 1) fetcher 설정 
			const fetcher = (url : string) => {    
	    // 매개변수로 받은 url 로 get 요청 보내기 
	    axios.get(url , {
		    // 👇👇👇👇👇 
	        withCredentials : true      
	            // [해석] 서버 포트가 다르면 -> 쿠키 값이 전달이 안 됨. 
	            // 이를 해결하기 위해 withCredentials true 설정 
	    })
	    .then((response) => {
	        // 👇👇 이 response.data 데이터가 index.tsx 에서
	            // const {data}  = useSWR('http://localhost:3095/api/users' , fetcher) 여기에서의 {data} 로 받아짐
	        response.data
	    })
	};		

	# 2) post 일 때 넣는 위치가 다름 
	  const onSubmit = useCallback(
    (e) => {
      e.preventDefault();
      setLogInError(false);
      axios
        .post(
          '/api/users/login',
          {email, password}, 
          {withCredentials : true}  
            // [해석] 서버와 포트가 동일하면, 쿠키를 못 받아오는데, 이걸 받아오기 위해서, withCredentials 설정 
        )

```





- 추가 swr 특징 및 관련 이슈
```
1. 서버 요청 보내는 시기를 커스텀 할 수 있음. 
ex) 다른 탭 갔다가 돌아오면, 서버에 자동으로 요청을 보내줌 -> 화면을 최신으로 유지할 수 있음. ⭐⭐ 


2. 프론트 port 주소와 서버 port 주소가 다르면, '쿠키' 가 전달이 안 됨. 
	- 해결하려면, 로그인 할 때 통신하는 post 와 get 모두에, withCredentials 설정해줘야 함. 

3. swr 이랑 react query 는 동일 기능 

4. proxy 는 배포했을 때 사용하지 않음. 
```


##### 이 단계에서 꼭 이해하고 넘어가야 하는 부분 ⭐⭐⭐  
	- `해결하려면, 로그인 할 때 통신하는 post 와 get 모두에, withCredentials 설정` 해주면 -> 1) 로그인 했을 때, cookie 안에 들어있는 값이 보이고 2) 실제로 쿠키에 저장된 것도 보임 

```
쿠키는 백엔드에서 생성 -> 브라우저에서 기억 
프론트에서는 한번 기억한 쿠키를 매번 백엔드로 보내줌
생성은 백엔드가 하고, 보내는건 프론트가 함
```

```
로그인 정보는 쿠키에 저장하는게 안전함
토큰으로 해도 쿠키에 저장함. 
```

```
cors 는 브라우저에서 생기는 문제임. 
```
![](https://i.imgur.com/C9esf7U.png)
![](https://i.imgur.com/2AsFtf2.png)





#### 2. 에러 처리 





#### 🔮 이 부분 만들 때 자주 틀리는 부분 (살짝 오답노트 느낌?)

1. 이벤트 핸들러에 함수 전달할 때의 방식 
```
이벤트 핸들러에서 
함수 실행하게 할 때 
() => {onChangeEmail } 이렇게 써야 할지 
onChangeEmail 그냥 이렇게 써도 되는건지 
좀 헷갈림
```
![](https://i.imgur.com/Tkx8Xtd.png)





### 5. swr 설정으로 '내가 원할 때 호출, 원하지 않는 호출 막는 법' 살펴보기 | 📛 swr 설정이 잘 된 건지, 확인 자체는 잘 안 됨. 우선, mutate 이거 까지 가야 여긴 깔끔히 해결될 듯. 강의랑 조금 다름 | 

#### 호출해야 하는 상황 파악 
```
1. 내가 원할 때 호출하는 경우
	- 로그인 버튼 눌렀을 때, 바로, swr 호출하기 

2. 주기적으로 호출하는 경우
	- swr 스스로 호출 할 때, 너무 빈번하면, 서버 과부하가 생기게 됨 


```


#### 내가 원할 때 호출 하기 


- mutate 로 변경 (이걸로 revalidate 오류 해결 | 다만, 완전히 되야 하는 모양이 나오는건지는 모르겠음 )
``` js
// import 
import useSWR , {mutate} from 'swr';

// 1번째 swr post 요청 
  const onSubmit = useCallback((e) => {e.preventDefault(); setLogInError(false);
      axios.post('/api/users/login', {email, password},     {withCredentials : true}  
        ).then(() => {
          // 내가 원하는 타이밍에 swr 보내는 법 👏👏👏 여기 
          revalidate();})

// 2번째 swr get 요청 
  const {data, error , mutate} = useSWR('http://localhost:3095/api/users' , fetcher)
```


- revalidate 로 한 경우 -> 오류가 났음 
``` js
// 1. 첫 번째 post 요청을 보내고 난 다음 revalidate 함수를 실행한다. 
  const onSubmit = useCallback((e) => {e.preventDefault(); setLogInError(false);
      axios.post('/api/users/login', {email, password},     {withCredentials : true}  
            // [해석] 서버와 포트가 동일하면, 쿠키를 못 받아오는데, 이걸 받아오기 위해서, withCredentials 설정 
        ).then(() => {
          // 내가 원하는 타이밍에 swr 보내는 법 👏👏👏 여기 
          revalidate();
            // [해석]
              // 1. 로그인 성공했을 때, revalidate 호출하면, -> revalidate() 실행시키고 
              // 2. 그 다음 실행시키고 싶은 swr 에 revalidate 를 넣어주면 -> post 요청 다음 get 요청 보내게 된다.
        })
        .catch((error) => {console.dir(error);      setLogInError(error.response?.status === 401);
        });


// 2. revalidate 를 실행하면, 그 다음 swr 보낼 곳에서 실행된다. 
	const LogIn = () => {
	  // get 요청 보내는 swr 👇👇👇 여기 
	  const {data, error , revalidate} = useSWR('http://localhost:3095/api/users' , fetcher)


```

![](https://i.imgur.com/l1M8YBK.png)
![](https://i.imgur.com/KBX4rJ7.png)


#### 이 부분에서 보완 학습해야 하는 부분 : swr 설정을 하긴 했는데, 명확하게 이런 점에서 바뀌었다, 라고 말할 수 있는 부분이 애매함 😥😥😥😥😥😥😥 


- 이렇게 되야 함 | 2:35

```
로그인 성공하는 순간 바로 users 가 되어야 함 
```
![](https://i.imgur.com/h7QOcUn.png)








#### 주기적으로 호출되는 것 막기 

```

```

![](https://i.imgur.com/ee42I8G.png)


#### 자주 쓰이는 것들 | 특히, 'loadingTimeout ⭐' 이거는 로딩창 구현할 때, 로딩중~ 표시 되는 걸로 구현하게 될 듯! 

``` js
- `dedupingInterval = 2000`
	: 이 시간 범위내에 동일 키를 사용하는 요청 중복 제거(밀리초)

- `focusThrottleInterval = 5000`
	: 이 시간 범위 동안 단 한 번만 갱신(밀리초)
	: revalidate 에 시간 제한 두기 

- `errorRetryInterval = 5000`
	: 에러 재시도 인터벌(밀리초)
	: 서버가 에러가 났을 경우, 서버가 알아서 다시 시작되기도 함. 
	: 그럴 수도 있으니, swr 은 알아서, 재요청을 보내기를 시도함. 
	: 이때, 다시 보내기 요청하는 시간 타이밍 제한 

- `loadingTimeout = 3000`
	: onLoadingSlow 이벤트를 트리거 하기 위한 타임아웃(밀리초)
	: 이걸 활용해서 로딩중 창 보여줄 수 있음. 

- `errorRetryCount`
	: 최대 에러 재시도 수
	: 몇 번 까지 시도하고, 안 되면, 포기할지


```



#### swr 공식 문서 

```
- https://swr.vercel.app/ko/docs/api
```










### 6. 워크스페이스 만들기 + 로그아웃 하기 | children 문법 사용 📛📛  

#### 1) 로그아웃 만들기 

##### swr 문법 

##### children 문법 사용  

1. children 이해하기 
![](https://i.imgur.com/uLLEqww.png)

```
workspace 로 감싼다. 
workspace 사이에 있는 div 태그는 
children 자리에 들어간다. 
```


2. 예시 
1) workspace 로 감싼다.
![](https://i.imgur.com/mlIGSOF.png)

2) 위에 있는  `div` 태그가, Workspace 컴포넌트의 `{children}` 자리로 들어온다.  
![](https://i.imgur.com/m2cxcU5.png)


















##### login 하면, channel 로 오게 넘겨주기 > 라우팅 설정 

1) 경로 설정 @layouts > app.tsx
![](https://i.imgur.com/Id1JdkK.png)


2) 로그인 하고 -> swr 에 의해, data 가 true 일 때 -> workspace 로 넘어가게 하기 `@pages > Login > index.tsx`

![](https://i.imgur.com/KFzknYS.png)



##### 흐름 정리 

1) 로그인 하지 않았기 때문에, 이 data 변수에는 false 담김
![](https://i.imgur.com/45dZXmo.png)


2. 로그인 성공 여부에 따라 return 이 다름 
```
로그인 성공(data = true) 하면 > 채널로 감 

로그인 아직 아니면 (data = false) 면 
로그인 창이 나옴
``` 

![](https://i.imgur.com/wD6buxt.png)



3. [다시 로그인 시도해야 하는 경우] 비밀번호 입력 -> 버튼 클릭 -> onsubmit 이 실행됨 -> post 요청 보냄 -> 성공적이면 revalidate 가 실행됨 -> 그러면, {data} 에 `true` 라는 값이 저장됨 -> 그러면, workspace/channel 로 리다이렉트 함

![](https://i.imgur.com/cLZpTnX.png)
![](https://i.imgur.com/tTIdHye.png)
![](https://i.imgur.com/VLDEXBq.png)
![](https://i.imgur.com/X898yVu.png)


##### 이 부분에서 이해해야 할 것 


1. 다시 되돌리기를 할 때, `Redirect` 를 써야 할지, `useNavigate` 를 써야 할지 
```
리다이렉트 시점이 '이벤트 핸들러' 에 의해 결정되면, useNavigate 를 사용 
리다이렉트 시점이 '조건부 렌더링' 에 의해 결정되면, Redirect 를 사용
```

##### 이 부분에서 만나게 되는 문제 

1. webpack 서버로 돌릴 때, 경로 제대로 설정해줄 것
- 이걸 안 해주면, `workspace/channel` 자체가 안 돌아감 
```
    <script src="/dist/app.js"></script>

    <!-- 중요⭐⭐⭐ -->
      <!-- index.html 곧바로 실행할 때는 . 넣기 -->
      <!-- webpack dev 서버 통해서 실행할 때는 . 빼기 -->
```
![](https://i.imgur.com/72wvgzF.png)


2. mutate 와 revalidate 간의 문제 
```
강사님 교안 및 코드에는 revalidate 가 쓰여있었음. 
그런데, revalidate 를 쓰면 에러가 났음 
그래서 mutate 로 변경함. 

이때, revalidate 에서는 fetcher 함수에서, return 을 안 넣었었는데, 
mutate 로 변경하고 나서는, return 을 넣어야 비로소, data 에 값이 전달되었음.

그렇게 되니까, Redirect 성공
```

- mutate 가 쓰인 부분 
![](https://i.imgur.com/c14Lxw2.png)


- return 이 쓰인 fetcher 
![](https://i.imgur.com/3CRvHQX.png)


3. return 을 넣을 때는, hooks 를 한 다음 넣어줘야 함! ⭐⭐⭐⭐⭐⭐ 안 그러면 에러남 
```
근데 왜 그런거지? 
```
![](https://i.imgur.com/D4iFpiH.png)







#### 로그인 페이지에서, 이미 로그인 되어 있는 사용자가, 로그인 버튼 누르면, 워크스페이스로 이동하게 하기 (마찬가지로, 회원가입 페이지에서, 이미 로그인 사용자가, 회원가입 누르면, 워크스페이스 이동하게 하기) 

1. 이미 로그인 되어 있으면 -> `data == true` 가 됨 
![](https://i.imgur.com/QMNx71k.png)

2. 이 부분은 data 가져오고, 필요한 부분 import 셋팅해주는 부분 
![](https://i.imgur.com/Jn5EnDQ.png)






##### 로그인 페이지에서, 이미 로그인 되어 있는 사용자가, 로그인 버튼 누르면, 워크스페이스로 이동하게 하게 할 때, '중간에 화면이 나왔다가 사라지는 부분' 을 '로딩중' 으로 처리하기 ⭐⭐⭐⭐⭐ | 디테일 

@ login, signup 페이지 
```
    // 로그인 된 사용자가 넘어갈 때, 화면이 거슬리는 거 방지 위한 로딩중 화면
        if (data === undefined) {
            return <div> 로딩중🐣 | 여기에 로딩중 화면 꾸밀 수 있음. </div>
        }
```







### 7. swr 활용법 (mutate 설명이 여기서 나옴)


#### 1) mutate 설명 


```
revalidate 단점은 요청을 한번 더 보낸다는 점

swr 을 사용할 때 요청을 많이 보내는 걸 막아야 함. 
```


- mutate vs revalidate 차이 
```
revalidate :  서버로 요청 다시 보내서, 다시 가져오는 것
mutate : 서버에 요청 안 보내고, 데이터 수정
```


- mutate 기능 설명 
```
response 에 이미 데이터가 있음. 

이렇게 갖고 있는 데이터를 
mutate(response.data) 를 써서 
data 에 넣어버림

// 두 번째 인자의 기능 ⭐⭐⭐⭐⭐⭐ 
	// shouldRevailidate : 기본값은 true, 
	// false 로 하면 서버 검사를 아예 안 함 
	// 이걸 넣어야 요청이 정말로 안 감 ⭐⭐⭐
```
![](https://i.imgur.com/zI55roS.png)



- 어디서 꺼내오냐에 따라 경로 넣는 곳, 키 넣는 곳이 다름
![](https://i.imgur.com/pEAFYqX.png)
![](https://i.imgur.com/NSKSRQU.png)





- 실익 ⭐⭐⭐⭐⭐ 
```
- 서버에 요청 안 보내고 데이터를 바꿈 

- 좋아요 누르면 -> 데이터에 갔다 오기도 전에, 바로 바뀜 (06:50 부분) ⭐⭐⭐⭐⭐⭐⭐ 
	👉 이게 optimistic UI 임 

```


- optimistic UI 란? 
```
1. 하트 눌렀음 -> 우선 올려줘 (아마, 성공하겠지, 라는 가정하에)
2. 그리고 실제로 성공하면 놔두고 
3. 실패하면, 하트 싹 빼 

하트 눌렀음 -> 서버에서 제대로 응답와야 고쳐주는게 pessimistic UI
```

<br>

#### swr 관련 중요한 포인트 | fetcher post, swr 전역 관리 | swr 이 get 요청이다 라는 것에 얽매일 필요 없음. | fetcher 를 어떻게 해주냐에 따라 다름 
- 1. fetcher post 를 사용하고자 할 경우 (14:01 강의)⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐

![](https://i.imgur.com/FN9jwww.png)

![](https://i.imgur.com/g1v4Eng.png)


 2. 또한 swr 은 비동기 요청 뿐 아니라, 로컬스토리지 관리 같은 것도 가능 음. 
![](https://i.imgur.com/M3qNwcV.png)

- 이렇게 했을 때 진정 전역관리 (16:21)
![](https://i.imgur.com/QhW9lej.png)


3. fetcher 를 여러개 만들어서, 그냥 data 뿐 아니라, length 같은 것들도 저장 해서, 여러가지를 자유롭게 쓸 수 있음! 이렇게 안 쓰면, swr 을 잘 못 쓰고 있는 것 임⭐⭐⭐⭐⭐⭐ | 비동기 요청에만 swr 쓰면 잘 못 쓰고 있는 것 임. | 서버에서 받는 걸, 그냥 그대로 저장하면 잘 못 쓰고 있는 것 임 

- 이렇게 배열로 만들어서 저장하는 경우도 있음. 
![](https://i.imgur.com/nJ3AIB8.png)

- 이렇게 서버에서 받은 걸 그냥 저장하면, 잘 못 쓰고 있는 것 임. 
![](https://i.imgur.com/yjDkni8.png)

- 이렇게, 서버에서 오는 데이터를, 변형해서, data 변수에 저장해서, 사용하기!!!!!! ⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐ 


4. 요청은 같게 보내면서, 데이터를 다르게 저장하는 팁 | url 뒤에 #123 같은거 붙이고, fetcher 또 다르게 만들면 됨 | 요청은 동일한 곳에 들어감 
```
이렇게 될 수 있는 이유는 
서버는 # 뒤에 붙은 걸 무시하기 때문 

그리고, #123 이 부분만 달라져도, 저장을 따로 한다. 
```

![](https://i.imgur.com/gFmPavE.png)






#### 다음에 이해할 부분 
- 전역 mutate 가 유용한 경우 (이거는 다음에 이해하자 ) (10:57)








### 8. 메뉴와 모달 만들기 >워크스페이스 만들기 (gravatar)


#### 공부 팁 
```
- 넣을 때, css 켰다, 껐다 하면서 기능 익혀보기 

```



#### 1) gravator 이용해서, 랜덤으로 자동 프로필 이미지 만들기 | ⭐⭐⭐⭐⭐ 이것도 우리 스타일 맞게 만들면 재밌겠다. 

![](https://i.imgur.com/3jaBjgj.png) 
![](https://i.imgur.com/5zV0tvl.png)

- gravatar 기능 
```
이메일 당 하나의, 고유한, 이미지 만듦
```


- gravatar 해보기 
``` js
// 1. 설치 
npm i gravatar
npm i @types/gravatar  // 타입 스크립트 용 

// 2. import 
import gravatar from 'gravatar'

// 3. 

```


#### 이 부분에서 자주 오류가 날 수 있는 부분 

1. 설치 할 때 `@types` 를 해야하나, 어케 할지? 

```
https://www.npmjs.com/ 
공식문서에서 검색해서 확인
```

![](https://i.imgur.com/IkX4iXY.png)


- 이렇게 DT 가 있으면 -> `@types` 로 다시 설치해줘야 함
![](https://i.imgur.com/CEHL1bR.png)

- TS 가 있으면 -> `@types` 없이 설치해도 됨 
![](https://i.imgur.com/EeWtph9.png)


- 만약, `ts` 를 지원하지 않는 것 중, 타입 오류가 나는 건 직접 타이핑 해야 함 



#### 2) 현재, component 가 미리 만들어져 있는 상태이기 때문에, 굉장히 빠르게 작업이 진행되고 있는 느낌 

- 그냥, 여기를 이제 넣어주면 되는 느낌 
![](https://i.imgur.com/ruVR2wo.png)


#### 3) 주의할 것 : styled component 와 sass 스타일의 혼용

``` css
- 모든 태그가 `styled componet` 가 되면 파악하기 힘듦 
	ex) 컴포넌트만 딱 봤을 때, '응? 이게 뭔 역할을 하지?' 라는 게 헷갈림 
	
- 따라서, 
1) 큼직한 덩어리는 styled component 로 하고, 
2) 그 하위요소는 sass 스타일로 하기 
	ex)  & a { }
```

- 큰 구역 나누기 
![](https://i.imgur.com/AVISvvD.png)


- sass 스타일
![](https://i.imgur.com/IQ2M01f.png)


- 워크스페이스 간 전환 하는 곳 == `Workspaces` 컴포넌트
![](https://i.imgur.com/s1980O8.png)



#### 슬랙 UI 구조 

![](https://i.imgur.com/hXt8EhQ.png)











### 9. 워크스페이스 만들기 (중첩 라우터) | 레이아웃 주는 법 ⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐ 

#### 무엇을 `layout` `page` 로 잡나?  

-  슬랙 UI 구조 
![](https://i.imgur.com/hXt8EhQ.png)

```
1. workspace, 채널, DM 은 공통 -> layout 으로 잡음 
	- 채널, DM 은 WORKSPACE 를 공통으로 사용하게 될 것

2. chat 영역은 변환 됨 -> 이건 page 영역
```





#### 이렇게 잡힌 `layout` 과 `page` 에 어떻게 `라우팅` 을 주나? 

```
이렇게 라우팅 주고 
import 할 때는 코드 스플리팅 해줌 
```

![](https://i.imgur.com/EyJ43Wm.png)



#### 레이아웃 주는 법 ⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐

```
- ⭐경로 주소에 '일관성'⭐  이 있으면 -> nested 라우팅 할 수 있음. 
- 일관성 없으면, nested 는 못 하니까, children 활용할 수 밖에 없음. 

- 이러한 점에서 '경로 주소 설계' 가 잘 되면 -> 컴포넌트 구조, 라우터 구조 잡기 쉬움 ⭐⭐⭐⭐⭐
```


##### 1. 각각의 page 에서 레이아웃을 가져와서 감싸주는 방법 

```
page 에서는 감싸준다. 
layout 에서는 children 으로 들어갈 자리를 마련해 놓는다. 
```


###### ex) 000 page 에서, 000 을, layout 으로, 갖고 있게 하기 

- `채널 페이지` 에서 `workspace` 를 `layout` 으로 갖고 있게 하는 순간 | 왼쪽 폴더 구조를 보면, page 에서, workspace 를 가져오고 있음. 
![](https://i.imgur.com/adWIYIp.png)
![](https://i.imgur.com/7luVLSM.png)



- `DM 페이지` 에서, `workspace` 를, `layout` 으로 갖고 있게 됨
![](https://i.imgur.com/qrkjNzQ.png)




##### 2. 각 레이아웃에서 직접 판단해서 넣어주기 | 5:27 부분! ⭐⭐⭐ 


```
1. main 라우터에는 workspace 만 등록 
2. workspace 안에서 다시 라우팅 
	- 주의할 것은 'workspace/dm' 이렇게 구조가 동일해야 함 
```


 1) app 에서 공통 경로 잡기 
 ![](https://i.imgur.com/IqRfCoJ.png)
(main 라우터에는 workspace 만 등록)
![](https://i.imgur.com/wzOyObc.png)


2) 레이아웃에서, 추가적인 경로 설정 (이 순간, 경로 구조가 동일 해야 함 ⭐⭐⭐⭐⭐⭐ 즉, a) 위에서 적은 공통경로 주소를 포함하고 있어야 함 ) 
![](https://i.imgur.com/aoM0MLy.png)

( workspace 안에서 다시 라우팅 )
![](https://i.imgur.com/OhLZ7Dc.png)

<br>

3) 레이아웃 안에서 라우팅 할 때, '경로 구조가 동일' 해야 함 ⭐⭐⭐⭐⭐ 
```
아래 계층에서, 다시 렌더링 하려고 할 때, 글자가 정확히 맞아야 함. 
```
( 이러면, 렌더링이 안 돼 )
![](https://i.imgur.com/cCBOuvF.png)












#### 그 다음, 컴포넌트 가져와서, 넣어주면 됨. 




### 10. 메뉴 만들기 (오른쪽 상단 프로필 메뉴 만들기)

#### 1) 토글 함수 만들기 ex) 프로필 클릭하면, 다른 메뉴 뜨는 것들 

```
한 번 눌렀을 때 켜지고, 
그 다음엔 꺼지는 것들
```

##### a) 메뉴 토글 함수 
- input 되는 부분 
```
⭐ 보여주고 싶은 것 뿐 아니라, 그걸 감싸고 있는 span 부모 태그에 onclick 을 걸어준다. 
그리고, 그 아래 자식들이 다 영향을 받게 한다. ⭐⭐⭐ 
```
![](https://i.imgur.com/r4ZP6K1.png)

- 처리 부분 
```
- useCallback 함수 안에서, 상태 관리 함수를 사용함 
- 왜 일까? 
- '불필요 하게 리렌더링 되는 것을 막기!' 위해서 인거 같은데? 😥😥😥😥😥 

- false, true 가 와서, 왔다 갔다 해주는 처리를 한다. 
```
![](https://i.imgur.com/S36W1cg.png)

- 데이터 저장소 (처리하는 데이터가 어디에서 오나?)
```
state 관리탭에서 온다. 
```
![](https://i.imgur.com/uIXmzZ3.png)
``
- 출력 
```
⭐⭐⭐ 조건부 렌더링을 사용했다는 점 
state 가 true 일 때, Menu 가 보이게 했는데, 
신기한 건, 부모 컴포넌트에 onClick 을 걸었다는 점! 
```
![](https://i.imgur.com/L7afNW4.png)


#### 2) ⭐⭐재사용⭐⭐ 할 것 같은 것들은 꼭!  ⭐`컴포넌트`⭐ 로 만들어둔다. 

![](https://i.imgur.com/gRBgS3c.png)


#### 3) 재사용 될 수 있는 것들 중 '단일 책임 원칙' 에 따라서 컴포넌트를 나눈다. 

- 컴포넌트 나누는 기준 ⭐⭐⭐⭐⭐⭐⭐⭐ 
```
1. '재사용' 될 것 같으면 -> 컴포넌트를 나눈다. 
2. 나뉜 것들 중에서 '단일 책임 원칙(하나의 컴포넌트는 하나의 책임만 진다.)' 라는 원칙에 근거해서, 컴포넌트를 나눈다. (이건 리액트 공식 문서에서)

무엇을 하나의 책임으로 볼 것 이냐는 주관적인 판단이 들어가게 됨. 
```

#### 4) 토글 함수를 하나 만들어두고, 다른 ui 에도 계속 갖다 쓴다. | 맞지 이렇게 파악한게❓❓❓❓❓❓❓❓ 
![](https://i.imgur.com/vIoXecy.png)

<br>

#### 5) 영역 밖에서 메뉴 닫히게 하기 ⭐⭐⭐⭐⭐ | 이 부분은 확실히 어려움 😥😥😥😥😥 | 이 부분 안 되어서, 나중에 버그 잡을 때 다시 해볼 것 임 

- 하고자 하는 것 
![](https://i.imgur.com/V7HQtF8.png)


- 이걸 하려면, '이벤트 버블링' 을 막아야 함 
```
이벤트 버블링이란 
자식에서 onclick 이 일어나면, 부모에게도 onclick 이벤트가 전달이 됨. 
따라서, 
자식에게 onclick 이 일어나면, 부모에서도 onclick 이 일어나 
-> onCloseModal 이 실행되어 
-> 창이 닫히게 됨

그러면, 이벤트 버블링을 막는다면 -> 자식을 클릭했을 때, 부모까지 이벤트가 전달되는 일이 없어짐 ⭐⭐⭐⭐⭐
(다만, 반대로, 부모를 클릭했을 때, 왜 자식이 닫히는지는 아직 모르겠음. )
```
![](https://i.imgur.com/gx4TCdA.png)


- 이벤트 버블링을 어떻게 막을 수 있을까? 
```
stopPropagation 을 사용하면 막을 수 있음. 
```
![](https://i.imgur.com/f22NKoK.png)



#### 6) 메뉴 안에 프로필 사진 + active + nickname 이름 까지 뜨게 하기 

![](https://i.imgur.com/HJqb1UF.png)










### 11. 모달 만들기 | 에러 난 부분 수정해야 함 | 커스텀 훅에서 타입을 제대로 설정 안 하고 넘어가니까, 여기에서 사용할 때, 문제가 생김 | stop propagation 으로 이벤트 버블링 막아줘야 함 ⭐⭐⭐⭐⭐ 

- 해야 하는 것 
![](https://i.imgur.com/n7FdS5w.png)

- 서버에서 데이터 받아와서, 꽂아주기 

- 중간에 타입 스크립트 에러가 한번 나는데, 그때, typing 을 보게 됨 
```
만약, 유저데이터면, 'IUser' 이렇게 타입을 기록 
```
![](https://i.imgur.com/jKXNQMi.png)


![](https://i.imgur.com/hA9H1N1.png)
![](https://i.imgur.com/RlPzQdX.png)


#### 이 부분에서 자주 에러가 날 부분 

- stop propagation 으로 이벤트 버블링 막아줘야 함. ⭐⭐⭐ 
![](https://i.imgur.com/iwoXrG3.png)


- 타입 스크립트 에러 
![](https://i.imgur.com/JqyibOe.png)



- 에러가 난 부분. 아마도 고쳐야 함 
![](https://i.imgur.com/ZJ4YgoP.png)


#### form 태그 다루기 | 주의할 것 | 에러처리 유형 중 하나 | 다만, form 태그 다루는 대로 통으로 알아둘 것. 

![](https://i.imgur.com/YCBd3Sx.png)



#### 사용자에게 에러가 났다고 보여주기 | 중요한 이유 | 에러 처리 유형으로 통으로 알아둘 것. 

![](https://i.imgur.com/p3D8Uig.png)







#### 팁

- 모달 vs 메뉴 
```
모달 = 전체로 빵 뜨는 것 
메뉴 = 바로 옆에 툭 뜨는 것
```

- 업무 효율성 높이는 법 ⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐ 
```
반복을 어떻게 하면 줄일 수 있을 것 인가! 에 대해서 고민해보는 것 ⭐⭐⭐⭐⭐⭐ 

빨리 끝내고, 쉬고 있으면, 칭찬해줘야 한다 
```


- form 태그 에서는 항상 e.preventDefault 를 써서 새로고침 안 되도록! ⭐⭐⭐⭐⭐ 
![](https://i.imgur.com/ebPxPw3.png)


- 오류 검사할 때, 띄어쓰기 까지 체크 하려면, trim() 을 넣어주는게 좋음. ⭐⭐⭐⭐⭐ 안 그러면, 띄어쓰기 한번만 해도 통과됨
![](https://i.imgur.com/blsHyZ8.png)



- 컴포넌트로 빼는 기준 
```
1. 재사용 여부에 따라 구분
재사용 할 것 같으면 -> 컴포넌트로 뺀다. 

2. input 창이 있으면, 
컴포넌트를 분리하는게 좋음 ⭐⭐⭐⭐⭐
왜냐면, 
input 창에 입력하면 -> state 가 변경 되어서 -> 재렌더링 되기 때문 -> 이렇게 되면, 성능 분석 할 때, 좀 문제가 됨! 
```
![](https://i.imgur.com/oE9gWbT.png)
	






- 깜빡거리는 것 
```
실제 렌더링이 되는지 파악이 가능 
성능 최적화 할 때 사용 
깜빡거리는거 없애는거에 집착 안 해도 됨
```
![](https://i.imgur.com/nUFOUZl.png)


- 타입 스크립트에서,  `cntrl + 마우스 오버` 하면, 어떤 타입인지 알려줌 
![](https://i.imgur.com/oPHVPQh.png)




#### 이 부분에서 만나게 되는 에러 

1. 와... 타입 스크립트 타입 에러 때문에, 한동안 진도를 못 나갔음. 











### 12. 채널 만드는 모달 



#### 컴포넌트 분리 하기 

- input 이 자꾸 리렌더링 되니까, 별도의 컴포넌트로 빼기 

![](https://i.imgur.com/SThnKoB.png)




#### 컴포넌트 쓸 때, 살짝 다른 스타일을 줘야 하는 상황이 오면 -> props 를 넣어서 조절할 수 있다 ⭐⭐⭐⭐⭐ 
![](https://i.imgur.com/dQ9LWA0.png)

![](https://i.imgur.com/Up2Xn6B.png)


<br>


#### 같은 모달이면, 이렇게 구조가 비슷할 수 있게 만드는게 필요함 ⭐⭐⭐⭐⭐ 

- 살짝 이게 반복인데? 루틴이 있는데? -> 이제 이걸 더 효율적으로 만들면 되는건가?
```
    const onClickAddchannel = useCallback( () => {
        setShowCreateChannelModal(true)
            // onClickAddchannel 하면, 채널 만드는 모달 또 추가해줘야 겠죠⭐⭐⭐⭐⭐ 
    } , [])
```



#### 화면을 먼저 만들고 -> 그 다음, 이벤트 리스너를 만드는게 효율적임 -> 1) 이렇게 하면, 가독성도 좋아짐 == 관련있는 코드들이 모여 있어서 스크롤 업다운이 안 심해서 좋음


- 화면 먼저 만들고, 그 다음 이벤트 리스너 만들기 
![](https://i.imgur.com/FoA2XDZ.png)


- 관련있는 코드들이 모여 있어서 스크롤 업다운이 안 심해서 좋음
![](https://i.imgur.com/MXOqxDi.png)


#### 자주 만나게 될 중요한 에러 : invalid hook call ⭐⭐⭐ 

![](https://i.imgur.com/BWlUgh2.png)


#### 자주 틀리는 부분 : 컴포넌트 사용할 때, `1) 단일 로 쓸 때는, 타입 스크립트 유형을 어떻게 가져가야 할지 2) 같이 쌍으로 쓸 때는, 열고 닫는 태그의 위치 및 계층에서 에러가 났었음. 

- 이렇게 해줘야 함 
![](https://i.imgur.com/RLZXLiw.png)



### 13. 라우터 주소 설계 (라우트 파라미터)



#### 하고자 하는 것
```
주소에 워크스페이스 이름 껴주기 
```



#### 라우트 파라미터

##### 개념 
![](https://i.imgur.com/zzDhx4U.png)


##### 주의할 것 
``` js
1. '라우트 파라미터가 있는 라우트'와 '일반 라우트'의 순서
	라우트 파라미터에 걸리면, 밑으로 안 내려감 
	따라서, 반드시 밑에 넣어야 함 


```
![](https://i.imgur.com/YEzJhic.png)



##### 중요한 질문 : 왜, 굳이, 여기에, 해야 하는 걸까? 이렇게 하면 좋은 점
- workspace, id, channel 에 라우트 파라미터를 넣어줬는데, 어디에 넣고, 어디에 안 넣을까? 왜 넣어야 할까? 
![](https://i.imgur.com/aae7H1V.png)


- 이렇게 라우팅 파라미터 설정해주고 그 다음 -> 로그인 했을 때 떨어지는 곳, 회원가입 했을 때 떨어지는 곳 들을 변경해줌 
![](https://i.imgur.com/WEodpJT.png)


- 이렇게 하면 좋은 점
```
1. 그러면, 여기에 이렇게 `workspace/sleact/channel/일반` 이렇게 내가 속해있는 위치를 `계층적` 으로 알 수 있음⭐⭐ 

2. url 자체에 '데이터' 를 갖고 있게 됨. 
```

![](https://i.imgur.com/ymSXU1r.png)


##### 관련된 문제 

- 채널을 만들 때, 지금 내가 어떤 워크스페이스 안에 있는지, 서버가 알아야 함. 
```
ex) sleact 라는 워크스페이스 안에서, 새로운 채널을 생성해보기 
```



##### 그럼, 어떻게 하는 건데? ⭐⭐⭐⭐⭐ | 이걸 반복해볼 필요가 굉장히 있어 ⭐⭐⭐⭐⭐ 


```
- 입력 

- 처리 

- 데이터 저장소 
	- useParams 에 데이터를 넣는것! ⭐⭐⭐ 

- 이렇게 하면 알 수 있는 것 
workspace 중 'sleact' 워크 스페이스에 있구나 
channel 중 '일반 채널' 에 있구나! 하는 것. 
```


##### modal 을 새로 생성하고 -> 채널 리스트 다시 가져오기 

![](https://i.imgur.com/FrPTl9D.png)


##### 현재 데이터 관리 상황
```
1. swr 이 채널 리스트 데이터 갖고 있음 
2. 추가 하면, revalidate 하면, 다시 불러와지는 형태. 
```


##### 에러나는 부분 

- 이렇게 되어야 함... 근데 안 되고 있음... 
![](https://i.imgur.com/B8b3keW.png)

- 해결한 포인트 ⭐⭐⭐  
```
- 원인은 그려주는 곳에서 return 을 안 붙여서 그랬음. 
- 중간에 mutate 관련 에러가 있어서, 조금 힘들었음. 
- 이제 revalidate 를 mutate 로 변환해서 쓰면 돼 
```
![](https://i.imgur.com/8snASrr.png)









#### 팁 

꼭, 반드시, 에러문 자체를 잘 읽자 








### 14. 사용자 초대 모달 만들기 

```
워크스페이스 모달과 비슷
```


##### REST API 
 
``` js
- 일정한 규칙에 따라서, API 문서를 작성함

- 기본 원칙 
	1. 동사 + 명사 로 구성 
		- GET, POST, PUT, PATCH, 같은 동사
		- URL 주소 = 명사 

	2. 주소만 봐도 어떤 역할을 할 수 있는지 알 수 있게 
		- Workspaces 중 어떤 workspace 인지 
		- [예시] userData ? `/api/workspaces/${workspace}/channels/${channel}/members` : null,

- 사용 방법 
	- 어떤 동사인지 애매하면 PUT 을 쓰면 우선 됨
	- REST API 를 엄격하게 지킨다기 보다, 약속, 이라는 생각으로 하면 좋음.

```

![](https://i.imgur.com/iyCFFIv.png)



## [섹션 3] DM 보내기

### 01_DM 목록 만들기  | 😥😥😥 이 부분 css 가 원하는대로 안 나오고 있음. 😥😥😥 📛📛📛📛📛📛 


#### 워크스페이스에서 멤버 가져오기 
```
@inviteWorkspaceModal 에서 작업한 걸 가져와서 재활용함 

@index / Workspace 폴더 에서 작업중임 
```

![](https://i.imgur.com/OU9HpdI.png)



#### 프록시 서버를 살려서, 배포 과정에서 용이하게 하기 ⭐⭐⭐⭐⭐⭐⭐⭐ 

```
- post 요청 보낼 때, localhost 로 보내지 않는다. 
	- localhost 로 하면, 나중에 배포할 때, 다 바꿔줘야 하니까. 

- 웹백 데브 설정하는 곳에서 proxy 살린다. 

- 실제 배포하게 되면, localhost:3095 같은 주소는 사용되지 않음. 따라서, 해당 로컬 주소를 적으면, 에러가 나게 됨! 👉 so, localhost 를 처음부터 안 쓰는게 좋음!

- proxy 를 설정한 곳은 'dev 서버' 이기 때문에, 나중에 배포할 때는 이게, '알아서' 적용이 안 됨
```

- 요청시 localhost 사용하지 않는다. 
![](https://i.imgur.com/b2bHGD0.png)


- 웹팩 데드 서버 설정하는 곳에서, proxy 를 다 살린다! 
![](https://i.imgur.com/JDZ7cGZ.png)
![](https://i.imgur.com/skfCu3a.png)



##### 이 부분 css 수정하기 

- 컴포넌트 이름(변수명) 잘 짓기 
```
- 컴포넌트 이름을 지을 때, 좀 길어지더라도, 명확하게 이름을 지어줘야 함. 그래야, 찾고 싶을 때, 헷갈리지 않고, 잘 찾을 수 있게 됨. 

- 변수가 명사 역할, 함수가 동사 역할을 할 수 있음. 

- 변수명 자체가, 주석 역할을 할 수 있음. 
	- 이러한 맥락에서 '영어' 가 중요함


```


![](https://i.imgur.com/qAUbH1Z.png)



- 폴더 이름 팁 : 윈도우는 대소문자 구분없이 그냥 찾음 | 리눅스, 맥은 대소문자 구분함. 
![](https://i.imgur.com/U1AxBNJ.png)

- vs code 단축키 
```
f12 누르면 -> 해당 컴포넌트 정의 부분으로 갈 수 있음. 
```



##### NavLink 에서 activeclassname 의 기능 ⭐⭐⭐ | 내가 클릭한 애들만 css 주기 편함 
```
	// NavLink 의 주소와 유저가 마우스 오버한 주소가 동일하면 -> 하얗게 보여줌

	activeClassName="selected"
```
![](https://i.imgur.com/gIV7Nbj.png)





#### 만나게 될 문제 

- 현재 이렇게 까지 나와야 하는데 안 나오고 있음. 

![](https://i.imgur.com/rTSAjyx.png)


- 원인 
```
아마도, 슬랙의 css 가 바뀌어서 그런듯

DMList > index.tsx > CollapseButton 부근임

슬랙의 HTML 태그를 그대로? 

강의 11:30 부근임! @DM목록 만들기 강의 

```
![](https://i.imgur.com/Dmd4pVQ.png)

![](https://i.imgur.com/umPKteK.png)














### 02_채널 목록 만들기 | 📛📛📛📛📛📛 오류 있음. 


#### 현재 문제 상황
![](https://i.imgur.com/I2DTKIj.png)



#### 클론 코딩 하면서 가져갈 것 
```
서비스에 따라서 'DB 설계, 프론트 설계' 가 달라지는 경험을 해보는 것 ⭐⭐⭐ 
```

#### 데이터 처리 관련

- swr 사용하면, props 로 굳이 받아오지 않아도 된다. 

![](https://i.imgur.com/3POt4V1.png)


```
이렇게 
다른 곳에서 부른 SWR 가져와서 쓰면 됨. 
이렇게 해도 서버에 요청을 한번 더 하는게 아니라 
캐싱된 데이터를 사용하는 것 임. 

새롭게 요청 보내게 되는 것은 deduping interval 같은 걸로 컨트롤 하면 된다. 

이렇게 hooks 사용하면서, container - component 패턴도 사용하지 않게 됨. 

왜냐면, hooks 로 컴포넌트 자체에서 바로 데이터를 가져올 수 있기 때문에 ⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐ 
```
![](https://i.imgur.com/lleppuv.png)


- 다만, props 를 사용하는게 더 나은 경우 
```
공통인 데이터 인데
swr 을 가져와 쓸 수 없는 경우 
이때는 여전히 props 로 넘겨야 함 

so, swr 쓴다고 해서, props 가 다 사라진 것은 아님. 
```
![](https://i.imgur.com/ulNr0Bc.png)


- props 를 최소화 하는게 좋은 이유 
```
- props 를 사용하면 -> 부모가 바뀌면, 자식도 따라서 바뀜 -> 그러면, 부모가 리렌더링 되면, 자식도 자동 리렌더링 됨. -> 그래서, 자식 리렌더링을 막기 위해 자식을 'memo로 감싸는 걸 함' ⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐ | 이것도 굉장히 중요 ⭐⭐⭐⭐⭐⭐⭐⭐ 

- 그런데, swr 을 사용하면, 자식만 바뀌고 부모는 바뀌지 않게 할 수 있음. -> 성능은 크게 차이 없는데, 화면 반짝 거림이 줄어든다. -> 최적화 할 때 더 편함

- redux 의 useSelector 랑 비슷
```




### 03_DM 페이지 만들기




#### 컴포넌트 만들 때 팁 
- 이렇게 이름 선언을 먼저 해서 -> '구역을 먼저 정하면' 도움이 됨. 
![](https://i.imgur.com/7jeoO7C.png)




#### ChatList 구현 

- 컴포넌트로 쪼개는 기준 및 사용방법
```
1. 재사용 되면 -> 컴포넌트로 쪼갠다.

2. 하나의 컴포넌트가 하나의 역할만, 하게 한다. 
```


#### ChatBox 구현 | css 가 제대로 동작을 안 함 😥😥😥😥😥😥😥😥😥😥😥😥😥😥 | 

##### 문제 상황 : css 가 제대로 동작을 안 함 😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥 
![](https://i.imgur.com/qm6pXJ0.png)


- 채팅이 여기 보여지게 할 것
![](https://i.imgur.com/TW7VkmG.png)



### 04_chatbox 만들기 

##### props 가 필요하게 되는 상황 | 컴포넌트 입장에서 props 의 목적 ⭐⭐⭐⭐⭐⭐ 
```
chatBox 는 '채널 메시지' 랑 'DM' 에서, 모두 사용됨. 
chatBox 를 두 군데에서 모두 사용하기 위해서, 
채널 메시지, DM 각각 다르게 구체화 되어야 하는 건, 
props 로 올린다. ⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐ 

그래서, 구체적인 작업은 나를 사용하는 쪽에서 하게 올려버린다. 😥😥😥😥😥 | 100% 이해는 아직 못 함 
```


- 예를 들어서, onSubmitForm 에 `//채널메시지` 를 입력하면, DM 에서는 사용 못 할 것 
![](https://i.imgur.com/kxQrWzH.png)


- DM 과 Channel Message 모두 사용할 수 있게, props 로 올려준다. ⭐⭐⭐⭐⭐⭐⭐ 
![](https://i.imgur.com/oAsL46c.png)



```
채팅 form, 채팅 submit 하는 걸, 
다 부모에서 관리하도록
```
![](https://i.imgur.com/cHzMTpV.png)

##### props 와 swr 의 관계⭐⭐ 
```
재사용 되는데, 공통되는 건, swr 로 가져오고, 
재사용 되는데, 다른 데이터는, 다 props 로 빼줄 수 있음. 
(1:30 부근 잘 이해해야 함⭐⭐⭐⭐⭐⭐)
```



##### keydown 이벤트를 통해, 내가 어떤 키조합으로 눌렀는가를 확인할 수 있음. 

![](https://i.imgur.com/GCCOf8Q.png)



##### `enter` 누르면 submit / `shift + enter` 누르면, 줄 바꿈 될 수 있게 만들기 

###### autosize 라이브러리 사용해서 -> shift enter 누르면, 입력창이 길어지게 하기

``` bash
# 설치 
npm i autosize

# 이건 타입 스크립트 용 설치 
$ npm i --save-dev @types/autosize
```

`@ChatBox index.tsx` 에서 작업 
![](https://i.imgur.com/Bh0NZkv.png)



### 05_채팅 보내기 | eslint 설치가 안 됨 😥😥😥😥😥😥😥😥😥😥 | 

#### 자주 만나게 되는 에러 : props 로 받으면 -> 여기에서 꼭 deps 에 `onSubmitForm` 넣어줘야 함⭐⭐⭐ | deps 빼먹으면 진짜 잘 못 찾아 ⭐⭐⭐⭐⭐⭐ | dependency 에러 ㅠㅠㅠ


![](https://i.imgur.com/bARmkby.png)


#### deps 빠트리지 않게 체크해주는 eslint 설정해주기 ⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐ 
```
1. eslint 에서 "react-app" 저게 뜰 수 있게 설치해야 함

2. 그러기 위해 npm install 해야하는 것들
eslint-config-react-app
eslint-plugin-flowtype
eslint-plugin-import
eslint-plugin-jsx-a11y
eslint-plugin-react

3. 전체 명령어 
npm i -D eslint-config-react-app eslint-plugin-flowtype eslint-plugin-import eslint-plugin-jsx-a11y eslint-plugin-react

4. 그리고 ESLINTRC 에서 "react-app" 넣어주기

```

- ESLINTRC 에서 "react-app" 넣어주기
![](https://i.imgur.com/6cPcOXl.png)

- npm install 해야하는 것들
![](https://i.imgur.com/CnDN5M0.png)



#### dependency 에러 방지 : 밖에서 들어오는 애들이면, 엥간하면, 다 deps 안에 넣어주기 
```
음.. eslint 도 지금 안 되는 거 같고...
```





## 섹션04_실시간 채팅 + 각종 프론트 기술 배우기 

### 01_socket.io 전용 훅스 만들기


#### 소켓 기본 개념 
```
[socket 이전]
	- 실시간 데이터 받고 싶을 때, 주기적으로 요청을 보냈어야 했음. 
		ex) long Polling / 30초 동안 요청 쭉 보냈다가, 없으면 30초 후에 다시 보내고 

[socket]
	- 한번 연결하면, 안 끊김. 
	- 양방향 통신이 가능함
```


- 웹 소켓 api 도 이렇게 있다는 것 
	- 이걸 기반으로, 프론트 & 백 이 소통한다. 
![](https://i.imgur.com/cj4iLdQ.png)




#### 소켓 설치할 때 주의할 것 ⭐⭐ 

``` js
제로초님 백엔드가 어떤 소켓 버전을 쓰고 있는지 확인해서 설치할 것

현재, 4.5.4 가 설치 되어 있는 것 같아서, 이걸로 설치해보자.

이렇게 버전을 신경쓰는 이유는 nest orm 같은게 업데이트된 소켓 버전을 지원하지 않는 이유가 있었기 때문에

// 이렇게 설치 함 
npm i -D @socket.io-client@4 

// 그 다음 types 관련 셋팅 
$ npm i --save-dev @types/socket.io-client
(--save-dev 랑 -D 랑 동일 | 개발용을 설치한다는 것)
```


![](https://i.imgur.com/LtHGpR5.png)

![](https://i.imgur.com/KfjmkLI.png)


#### 소켓 특징 

```
'전역적' 임. 
따라서, 하나의 컴포넌트에 연결했다가, 다른 곳으로 가면, 연결이 끊어지는 경우가 발생함. 

이걸 방지하기 위해서 '공통된 컴포넌트' 에 넣어줄 것 임. 

예전에는 high order component 를 사용했음 
다만, hoc 가 hook 등장으로 사라지면서, 
지금은 hook 설치한 곳에 socket 을 연결해줄 것 임. 
```


- 소켓 설정을 어디에 해? ⭐⭐⭐ 
```
- 컴포넌트간 공통적인 것을 할거면, 부모컴포넌트에 해도 됨. 
- 화면이 들어가지 않고, 로직만 있으면, hook 에 하면 됨 
- 혹여나 '화면' 이 있어도, hooks 를 써도 됨. 

- hooks 로 공통된 로직을 추출해낼 수 있음. 
```
![](https://i.imgur.com/oDUIzYf.png)


- 소켓 io 할 때는 '누구에게 보낼 것인가!' 라는 '범위' 를 잘 조절 해야함⭐⭐⭐⭐⭐⭐ 
```
슬랙의 workspace -> 소켓 io 의 namespace 
슬랙의 channel -> 소켓의 room 

ex) 예를 들어, 이렇게, workspace 를 zerocho 로 변경 
```
![](https://i.imgur.com/4LLs0vt.png)





#### URL 기재할 때 주의할 것 


```
URL 적을 때는 변수에 넣어서 적기. 

왜냐면, 나중에 배포할 때, localhost 바꿔야 하는데,
한번만 바꿔주면 되니까.
```


![](https://i.imgur.com/nYdFxps.png)

![](https://i.imgur.com/Xp2OvlX.png)



### 02_socket.io 이벤트 연결하기 | 연결이 아직 안 돼 ㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠ 😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥😥 | 


#### 중요한 점 
```
on 과 off 는 짝 이다. 
```

#### socket io 특징
```
http 로 보냈다가, 나중에 다시, socket 으로 보내는데, socket io 임.

http 로 먼저 보내는 이유는, 
socket 이 없는 인터넷 브라우저 구형도 있기 때문. 

socket 지원여부 확인해서 -> 지원하면, http 에서 socket 으로 변환, 지원 안 하면, http 로 보내게 된다. 

지금은 크롬으로 하니까 
'바로 웹소켓' 을 사용하면 된다. 

'바로 웹소켓' 을 쓰려면, '연결할 때, polling 하지 말고, 웹소켓만 써라' 라고 해줌 


```

- `@useSocket.ts` 에서 이렇게 작성
![](https://i.imgur.com/nv3RApJ.png)

- 그러면, http 연결 없이 바로, socket 으로 연결. CORS 에 안 걸림 
![](https://i.imgur.com/T4rRGXh.png)


#### socket 객체 탐구 

```

- acks 
	- connected : 연결되었지 여부
	- disconnected : 연결 끊겼는지 여부 

- receiveBuffer 
	- 서버에서 보낸걸, 연결이 끊기고 있을 때, 이곳에 저장해둠.  
	- 연결이 다시 재개되면, 여기에 저장되어 있던 것들이, 다시 나오게 됨. 

- sendBuffer 
	- 이 안에 뭔가 차 있다는 건, 서버에 뭔가를 보내야 하는데, 못 보내고, 이 안에 저장하고 있다는 것. 
	- 여기에 차 있다가, 그 동안 emit 했던 걸 다 보낸다. 

- callbacks 
	- on 했던 리스트들이 있음. 
	- connect, connecting 은 기본적으로 있는 애들. 
	- ex) socket on 'onLineList' 

- io 
	- 여기에는 '연결에 대한 옵션' 이 들어가 있음. 

- 원래 웹소켓에 없는데, socket.io 를 편하게 쓰라고 제공해주는 것 

```

![](https://i.imgur.com/FoUUSle.png)

![](https://i.imgur.com/c3iBucT.png)


#### 소켓 연결이 안 될 때 자주하는 실수들 

- 프론트와 백 사이의 socket 버전이 안 맞는 경우 
```
// 2 버전으로 다시 설치해서 맞추기
npm run socket.io@2
```
![](https://i.imgur.com/rZbjghE.png)

![](https://i.imgur.com/X0MbE5h.png)

![](https://i.imgur.com/W8A5Z7T.png)



##### 연결이 되면 이런게 보임 

![](https://i.imgur.com/qha3cCG.png)


##### 우선, 도움이 된 것 
```
1. socket 버전을 4로 맞춘 것 -> 돌아가긴 함 
2. 이제 socket 이 보내질 수 있게 해야 하는데 아직 안 됨. 

```

---

## 👐 사람들 질문에서 나도 잘 모르는 부분들 


#### 1. useState 대신 일반 변수를 쓰면 안 되나? 만약, 그렇게 되면 어떤 효과가 나는 건가? 
```
[15:50 부분 / swr 사용하기 (쿠키 공유하기) 부분]

한 글자 칠 때마다 -> 다시 실행 -> true 가 다시 false 

화면에 반영되는 데이터는 state 로 
반영되지 않은 것은 useRef
```

![](https://i.imgur.com/Wp8ODFl.png)







---

# 🐞 디버깅 

## 소켓에서 POST 요청이 안 보내짐. 에러 고치기 ⭐⭐⭐⭐⭐⭐⭐ 

```
chat 을 부모가 관리하네 
부모가 어떻게 관리? 
우선, chatBox 에서 관리 
재사용되는데, 다른 데이터는, props 로 빼준다. 

```

![](https://i.imgur.com/rzMUTEz.png)



### 중간에 하다가 고친게 있는데 다시 봐보기 

여기도 살짝 다시 봐야할거 같아 

![](https://i.imgur.com/s7zLRA3.png)












---


# 실제로 해커톤에서 필요한거 만들기 


## nested routing 구현 

```
채널별로 다른 화면 만들기
```

![](https://i.imgur.com/niyowAl.png)


## 코넬 노트 작성법 post 요청 보내야 함 
```
Workspace > index 참고 해서 만들자 
```

![](https://i.imgur.com/C5CtaZo.png)


## 특정 태그만 선택해서 변경하려고 함. 그런데, 태그 선택이 잘 안 됨. 




## 학습 노트 빵 띄우기 

``` js

// 
const [showCreateChannelModal , setShowCreateChannelModal] = useState(false)


<button onClick={onClickAddChannel}> 채널 만들기 
</button>


const onClickAddChannel = useCallback( () => {
	setShowCreateChannelModal(true)


// 이거 만들기 
<CreateChannelModal
                show={showCreateChannelModal}
                onCloseModal={onCloseModal}
                setShowCreateChannelModal = {setShowCreateChannelModal}
/>


```






## 고쳐야 하는 것 

```
- 회원가입 안 됨 ㅠㅠ 
```





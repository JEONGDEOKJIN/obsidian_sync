


### ë¬¸ì œ ìƒí™© create ì„ ëˆ„ë¥´ë©´ -> ì„œë²„ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•´ì•¼ í•¨ -> í˜ì´ì§€ê°€ ë¦¬ë¡œë“œ ëœë‹¤. #ğŸ“›ì•½í•¨

![](https://i.imgur.com/7pbPgvw.png)


- í•´ê²° : preventDefault 


### [task] ê¸€ ì‘ì„±í•œ ê±¸ -> ì„œë²„ì— fetching í•˜ê²Œ í•˜ê¸° 

``` js
"use client"

export default function Create() {
    return (
        <>
            {/* submit ì€ ì‚¬ìš©ì ì°¸ì—¬ê°€ í•„ìš”. | ì´ê²Œ ì‘ë™í•˜ë ¤ë©´, í´ë¼ì´ì–¸íŠ¸ ìª½ ìì›ì´ í•„ìš” */}
            <form onSubmit={(e) => {
                e.preventDefault();
                const title = e.target.title.value
                    // target = form íƒœê·¸
                const body = e.target.body.value; 

                // ë³´ë‚¼ ë•Œ, ë°ì´í„°ë¥¼ ì—¬ê¸°ì— ë„£ê¸°
                const options = {
                    method : 'POST', 
                    headers : {
                        'Content-Type' : 'application/json'
                    },
                    body : JSON.stringify({title, body})    // json ìœ¼ë¡œ ë³€í™˜í•´ì„œ ì „ì†¡
                }

                fetch(`http://localhost:9999/topics` , options)
                .then(res => res.json())
                .then(result => {
                    console.log(result)
                    
                    const lastId = result.id
                })

            }}>  
                <p>
                    <input type="text" name="title" placeholder="title"  />  
                </p>
                <p>
                    <input type="text" name="body" placeholder="body"  />  
                    {/* <textarea name="body" placeholder="body" />  */}
                </p>
                <p>
                    {/* ì•„, í—, ì´ê²Œ ë³´ë‚´ëŠ” ê±° ì˜€ì–´? ğŸ˜¥ğŸ˜¥ğŸ˜¥ğŸ˜¥ğŸ˜¥ğŸ˜¥ */}
                    <input type="submit" value="create" />
                </p>

            </form>
        </>
    )
}
```



### [task] fetching ë˜ë©´ -> ì‚¬ìš©ìê°€, ì‘ì„±í•œ ê¸€ë¡œ 'redirection' ë˜ê²Œ í•˜ê¸°
- í•µì‹¬ 
``` bash
useRouter ì‚¬ìš© 

[í•µì‹¬ í•¨ìˆ˜] 
	- useRouter hook 

	- input 
		: 'domain:port ì´í›„ì˜ ì£¼ì†Œ' 
			- ì™œëƒë©´, ë¼ìš°íŒ… í•œë‹¤ëŠ” ê²ƒì€, íŒŒì¼ ì‹œìŠ¤í…œ ê¸°ë°˜ì˜ ë¼ìš°íŒ…ì˜ ê²½ìš°, í˜„ì¬ íŒŒì¼ ë„¤íŠ¸ì›Œí¬ ì•ˆì—ì„œ ì°¾ì•„ê°€ëŠ” ê²ƒ. ì—¬ê¸°ì— 'input' í•˜ëŠ” ì •ë³´ëŠ” 'ì–´ë””ë¡œ ê°€ê²Œ í•  ê²ƒ ì¸ê°€!' ì— ëŒ€í•œ ì •ë³´   
			- ê·¸ëŸ¬ë©´, ë„ë©”ì¸ + port ë²ˆí˜¸ë¥¼ ê¸°ì¬í•˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ”, ë‹¹ì—°í•¨. ì–´ë””ë¡ ê°€ ì´ë™í•˜ê²Œ í•˜ë ¤ë©´, ê·¸ ì´í›„ì˜ ê²ƒì„ ë³€ê²½í•´ì•¼ 
		: ex) 'http://localhost:3000/read/8' ì—ì„œ, 'read/{parameter}'

	- output
		: 'ê¸°ì…í•œ ì£¼ì†Œ' ë¡œ í˜ì´ì§€ê°€ ë¦¬ë””ë ‰ì…˜ë¨ 

	- íŠ¹ì§• 
		- ë¸Œë¼ìš°ì €ì˜ URLì„ ë³€ê²½í•˜ì§€ë§Œ, í˜ì´ì§€ë¥¼ ìƒˆë¡œ ê³ ì¹¨í•˜ì§€ ì•ŠìŒ. -> ì´ ë§ì€, layout ì •ë³´ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ëœë‹¤ëŠ” ë§ ì¼ê¹Œ? ë³€ê²½ëœ ì •ë³´ë§Œ ê°€ì ¸ì˜¨ë‹¤ëŠ” ë§ ì¼ê¹Œ? â“â“â“â“â“â“ (#â“â“â“)


```

- ì „ì²´ ì½”ë“œ 
``` js
"use client"

import { useRouter } from "next/navigation";

export default function Create() {

    const router = useRouter();

    return (
        <>
            {/* submit ì€ ì‚¬ìš©ì ì°¸ì—¬ê°€ í•„ìš”. | ì´ê²Œ ì‘ë™í•˜ë ¤ë©´, í´ë¼ì´ì–¸íŠ¸ ìª½ ìì›ì´ í•„ìš” */}
            <form onSubmit={(e) => {
                e.preventDefault();
                const title = e.target.title.value
                    // target = form íƒœê·¸
                const body = e.target.body.value; 

                // ë³´ë‚¼ ë•Œ, ë°ì´í„°ë¥¼ ì—¬ê¸°ì— ë„£ê¸°
                const options = {
                    method : 'POST', 
                    headers : {
                        'Content-Type' : 'application/json'
                    },
                    body : JSON.stringify({title, body})    // json ìœ¼ë¡œ ë³€í™˜í•´ì„œ ì „ì†¡
                }

                fetch(`http://localhost:9999/topics` , options)
                .then(res => res.json())
                .then(result => {
                    console.log(result)
                    const lastId = result.id
                    console.log(lastId)
                    
                    // ë¦¬ë””ë ‰ì…˜ ì‹œí‚¤ê¸° 
                    router.push(`/read/${lastId}`)
                })

            }}>  
                <p>
                    <input type="text" name="title" placeholder="title"  />  
                </p>
                <p>
                    <input type="text" name="body" placeholder="body"  />  
                    {/* <textarea name="body" placeholder="body" />  */}
                </p>
                <p>
                    {/* ì•„, í—, ì´ê²Œ ë³´ë‚´ëŠ” ê±° ì˜€ì–´? ğŸ˜¥ğŸ˜¥ğŸ˜¥ğŸ˜¥ğŸ˜¥ğŸ˜¥ */}
                    <input type="submit" value="create" />
                </p>

            </form>
        </>
    )
}
```


<br>

### [ë¬¸ì œìƒí™©] ê¸€ì„ ì‘ì„±í•˜ê³ , ë¦¬ë””ë ‰ì…˜ ê¹Œì§€ ë˜ì—ˆì„ ë•Œ, 'í˜„ì¬ ë¦¬ìŠ¤íŠ¸ê°€ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸' ë˜ê²Œ í•˜ê¸° 

-> ì´ê±´ cache ì—ì„œ í•´ê²° 
[[5. githubSync_gitBook/12_KGA_ì›¹ê°œë°œ ë¸”ë¡ì²´ì¸ êµìœ¡ê³¼ì •/KGA_11ì›”(ê¸°ì—…í˜‘ì•½í”„ë¡œì íŠ¸)/231104_ìƒí™œì½”ë”©_cache]] ^64a28a



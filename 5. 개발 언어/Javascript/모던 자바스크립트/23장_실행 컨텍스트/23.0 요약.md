


## 1. 소스 코드의 타입 
``` bash 
- 소스코드의 종류에는 '전역 코드', '함수 코드', 'eval 코드', '모듈 코드' 가 있음. 

- 소스코드의 종류를 구분하는 이유는 
	- 소스 코드 종류에 따라서 -> 코드를 관리하는 '실행 컨텍스트' 의 생성과 관리방식이 달라지기 때문. 
	- 즉, 소스 코드가 제대로 동작 하려면 
		1) 소스 코드 안에 있는 '식별자' 와 '식별자에 바인딩 된 값의 변화' 에 대해서  '등록, 상태 변화, 스코프 체인을 통한 식별자 검색' 을 할 수 있어야 한다. -> 그래서, 적시에, 메모리 안에 있는 데이터 및 명령어가 CRUD 되어야 한다. 
		2) 소스 코드 안에서의 '실행 흐름' 이 관리 되어야 한다. 왜냐면, 예를 들어서, 함수 실행의 경우, 함수 내부로 제어권이 이동했다가, 원래의 위치로 다시 돌아와야 하기 때문이다.  JS 는 이 실행흐름을 '스택' 을 통해 관리한다. 
		3) 위의 관리 항목은 해당 소스코드가 어떠한 유형인가! 에 따라서 '구체적인 관리 방식이 달라' 지게 된다. 

- 그러면, '전역 코드', '함수 코드' 안에서는, 어떻게 '식별자와 값의 변화' , '실행 흐름' 이 관리되는가. 
```

<br>

## 2. 소스코드의 평가와 실행

``` bash 
- 모든 소스코드는 '평가' 를 거친다. 

- 평가에 따라서, 변수 선언시 키워드가 var 가 사용된 경우에는 -> '식별자 등록'은 '전역 렉시컬 환경'에서 '객체 환경 레코드' 에 등록되어 관리 된다. 

- 이렇게, '소스코드의 내용에 따라서 -> 관리되는 양상이 결정'되고 -> 이에 기반하여, '실행' 이루어짐. 
```


<br>

### 1) '평가' 세부 과정

- 전역 코드 평가 
``` bash
- 모던 자바스크립트 p369 의 그림 구조와 동일

1. 전역 실행 컨텍스트 생성
	- '전역 객체 생성' 이 전제 되어야 함
	- '전역 실행 컨텍스트' 생성 -> 스택에 'push' -> '실행 중' 인 전역 컨텍스트 가 된다. 

2. 전역 렉시컬 환경 생성 

	2.1 전역 환경 레코드 생성
		- '환경 레코드 영역' 안에 있는 것을, '스코프(scope)' 라고 불렀음 ⭐⭐⭐
		- '선언 단계' 와 '초기화 단계' 를 고려해야 함 
			- '선언 단계' : name binding, '변수 이름' 과 '메모리 주소' 를 바인딩, 식별자 등록
			- '초기화 단계' : 식별자에 바인딩 될 초기값을 설정. 
				- var : 'undefined' (데이터 타입 중 원시형). 오류 발생하지 않음 
				- let, const : '<uninitialized>' -> TDZ(일시적 사각 지대) 발생 -> 호이스팅 발생시, 참조 에러(reference error) 발생 원인 

		2.1.1 객체 환경 레코드 생성
			- 'var 키워드' 로 변수를 선언한 경우
			- '선언 단계(name binding)' 와 '초기화 단계' 를 ⭐'동시'⭐ 에 진행 
				- 선언 단계 : 선언문만! 실행 -> 식별자 등록
				- 초기화 단계
					- 변수 초기화의 경우 -> undefined 값을 넣음 -> 호이스팅 발생시, 참조되는 값은 'undefined'
					- 함수 선언문 초기화의 경우 -> 바인딩 값에 '함수 객체' 를 바로 넣음 -> 호이스팅 발생시, 함수 실행 가능 ⭐⭐⭐

		2.1.2 선언적 환경 레코드 생성
			- 'let, const' 키워드로 변수를 선언한 경우
			- '선언 단계(name binding)' 와 '초기화 단계' 를 '⭐분리⭐' 해서 진행
				- 선언 단계 : 선언문만! 실행 -> 식별자 등록
				- 초기화 단계 
					- 값을 넣지 않는다. -> '<uninitialized>' 이 찍힌다. -> 일시적 사각지대, TDZ(temporarily dead zone) 발생 -> 호이스팅 발생시 reference error 발생 하게 된다. 


	2.2 this 바인딩
		- 추가 공부 필요 


	2.3 외부 렉시컬 환경에 대한 참조 결정 
		- 상위 스코프로 연결 


- 출처 : 모던 자바스크립트 p369
```



- 함수 코드 평가 
``` bash 




```





- '선언적 환경 레코드' 에서 평가 과정 예시 (출처 : 모던 자바스크립트 p373)
``` js 
// 에러 없음 
let foo = 1; 
	{
		console.log(foo)
	}

/* 실행 순서 
	1. 전역 코드 평가 
		- foo 등록 : let 키워드 이므로 -> 스코프는 블록 레벨 스코프 적용 -> so, { } 안에는 영향 미치지 않음
	2. 전역 코드 실행 
		- [할당] foo 에 1 할당
		- 블록 코드 만남 -> 블록 코드로 이동 
	3. 블록 코드 평가
		- 선언문 등록 : 아직, 등록할 것이 없음 
	4. 블록 코드 실행
		- console 실행 -> foo 참조 해야 함 
			- { } 안에 없음 -> 상위 스코프에서 검색 -> 참조하여 실행
*/
```


``` js
// 에러 있음
let foo = 1; 
	{
		console.log(foo)
		let foo = 2;
	}

/* 실행 순서 
	1. 전역 코드 평가 
		1) [선언문 실행 및 식별자 등록 하기] 
			- foo 등록 
				- let 키워드 : 스코프는 블록 레벨 스코프 => { } 안에는 영향 없음 
	1. 전역 코드 실행 
		1) [할당하기] foo 에 1 할당하기 
		2) 블록 코드 만남 -> 블록 코드로 제어권 이동 (맞나❓)
	2. 블록 코드 평가
		1) [선언문 실행 및 식별자 등록] 
			- foo 등록 
				- let 키워드  : 초기값 없음! -> TDZ 상태
	3. 블록 코드 실행
		1) console.log 실행 
			- 전역 객체 찾기 
			- foo '참조' 
				- foo 참조할 값 없음 -> referece error 발생 ⭐⭐⭐⭐⭐ 
*/
```
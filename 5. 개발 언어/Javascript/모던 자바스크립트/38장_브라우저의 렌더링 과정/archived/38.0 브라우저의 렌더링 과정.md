
## 요약

![800](https://i.imgur.com/z7iyg0S.png)



1. 브라우저는 HTML, CSS, 자바스크립트, 이미지, 폰트 파일 등 렌더링에 필요한 리소스를 요청하고, 서버로부터 응답 받는다.  (구체적인 과정을 `38.1 요청과 응답에서 설명함` )


2. 렌더링 엔진의 파싱 및 렌더트리 생성 
	- 브라우저의 렌더링 엔진은 서버로 부터 응답된 HTML 과 CSS 를 파싱하여 DOM 과 CSSOM 을 생성하고, 이들을 결합하여, 렌더트리를 생성한다. 
	- 구체적인 과정을 38.3 에서 설명함 

``` bash
(DOM 트리 생성으로 알아보는 렌더링 엔진의 파싱 process)
1. 인코딩 
	- 서버가 응답한 '바이트코드ex) 101101...' 를 '문자열' 로 변경로 변경
	- UTF-8 같은 옵션을 설정으로 인코딩을 한다. 

2. 토큰(token) 생성
	- '문자열' 로 변환된 HTML 문서를 읽어들여 '문법적 의미를 갖는 최소 단위'인 '토큰(token)' 으로 분해 

3. 노드(node) 생성
	- 각 토큰을 객체로 변환해서, 노드를 생성한다. 
	- 토큰 내용에 따라, '문서 노드', '요소 노드' , '어트리뷰트 노드', '텍스트 노드' 로 나뉨. 

4. DOM 생성 
	- '노드로 구성된 트리 자료구조' + '중첩 관계'
	- 노드들의 중첩 관계를 반영해서, 트리 형태의, 자료구조, 를 생성한 것이 DOM 

(출처 : 모던 자바스크립트 p667)
```

<br>

3. 브라우저의 자바스크립트 엔진은 서버로부터 응답된 자바스크립트를 파싱하여 AST(abstract syntax tree) 를 생성하고, 바이트 코드로 변환하여 실행한다. 이때 자바스크립트는 DOM API 를 통해 DOM 이나 CSSOM 을 변경할 수 있다. 변경된 DOM 과 CSSOM 은 다시 렌더트리로 결합된다. 



4. 렌더 트리를 기반으로  HTML 요소의 레이아웃(위치와 크기) 를 계산하고, 브라우저 화면에 HTML 요소를 페인팅 한다. 



<br>

## 요청과 응답 

- '주소창에 요청하고자 하는 파일이 있는 경로를 입력' 하여 요청. ex) `https://busiman.com/assets/data/data.html` 정적 파일 요청의 경우, 서버의 루트 폴더를 기준으로 파일 경로를 기재하여 요청
- 브라우저가 렌더링에 필요한 HTML, CSS, JS 을 요청. 
- 서버는 루트폴더의 `assets/data` 폴더 내에 있는 정적 파일 `data.html` 을 응답

- '정적/동적 데이터 요청' -> ajax 와 REST API 학습 하기 ⭐⭐⭐⭐⭐


<br>

## 렌더 트리 생성 
- '렌더트리' 는 '브라우저 화면에 렌더링 되는 노드' 로만 구성된다. (출처 : 모던 자바스크립트 p668)

- '렌더링 과정이 반복' 되는 경우
	- 


- 최적화 방안 


<br>

### '동기적 JS 파싱' 에 따른 HTML 파싱 중단 

- 브라우저가 '동기적(synchronous)' 으로, html, css, js 를 파싱 한다. -> 블로킹 현상 발생 

- 이로 인해 'DOM 생성 지연' 되는 이슈가 발생
	- ex) DOM 생성하는 도중에, script 태그를 만나면, DOM 생성을 멈추고 -> JS 를 파싱 한다. -> 그리고, JS 파싱이 완료되면, 해당 위치부터 다시 DOM 생성한다. 

- 해결방안
	1) script 태그를 body 태그의 하단부에 위치 -> DOM 생성이 완료 된 후 -> JS 파싱
	2) `async 어트리뷰트` 또는 `defer 어트리뷰트` 를 사용 (출처 : 모던 자바스크립트 p675)


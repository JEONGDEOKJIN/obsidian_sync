

## 리액트 등장 이전 렌더링 방식의 문제점 
1. 기존 JS 라이브러리인 'jQuery' 및 'handlebars' 을 활용하여 렌더링 했을 때의 문제점
``` BASH
- 기존 JS 라이브러리인 'jQuery' 및 'handlebars' 을 활용하여 렌더링 했을 때의 문제점
1. '화면이 커질 수록', 화면을 그리는 시간도 길어진다. 
2. '일부분만 수정' 되어도 -> '화면 전체를 다시' 그린다. 

- 이러한 문제점이 나타나는 원인 
	1. DOM 안에서, '특정 node' 를 수정하면 -> '해당 node 의 자식' 까지 수정됨 
	👉 so, '수정해야 하는 노드는 3개' 이지만, '실제 새로그려진 노드는 8개' ⭐⭐⭐ 
	👉 so, '새롭게 그려지는 node 개수 최소화!' 라는 문제 상황을 해결하고자 함 ⭐⭐⭐⭐⭐ (DOM 노드를 기준으로 생각하기) 


- 해결 방안 
	- '게임 엔진의 원리' 를 이용 
	- '게임 엔진' 은 '다음에 나타날 화면의 일부(노드)' 를 '미리' 그려놓는 방식으로 화면을 빠르게 전환함. 
	- 이 방법을 응용해서, 
		1  '다음에 나타날 화면의 일부(노드)' 를 미리 그려놓고 
		2. '변경된 화면의 일부 노드만! 수정' 한다. 
```

![](https://i.imgur.com/f9Gqps6.png)



2. DOM 직접 조작에 따른 비효율성 
``` BASH 
- '좋아요 업데이트' 같이, '업데이트' 해야 하는 task 가 존재할 경우, JS 를 통해 DOM API 를 '직접 조작'함. 

- '직접 조작' 할 경우 -> 'DOM 조작을 최소화' 하여, 리소스 낭비를 막는 최적화 방식을 찾아야 함
	ex) 클릭한번으로, li 태그를 3000개 생성해야 하는 경우 
		1) innerHTML 을 3000번 사용할 수도 있고, 
		2) 변경 사항을 다 모아놨다가, DOM 조작을 1번만 할 수도 있음. 👉 reflow, repaint 가 덜 발생해 -> 리소스 절약

- 그런데, 코드가 길어지면, 최적화 과정이 복잡해지고, 어려워짐. 
- so, 'DOM 조작을 최소화 할 수 있는 방법' 이 필요해짐. 
```


<br>

## virtual DOM 활용한 리액트 렌더링 프로세스 

``` BASH 
1. render phase 

	1.1 하나 하나의 컴포넌트를 호출해서 -> 각각의 React Element 를 계산 

	1.2 각각의 React Element 를 모아서 -> Virtual DOM 을 만듦 
		- VDOM 은 1) class 등의 요소는 갖고 있음 2) 다만, DOM API 같은 기능은 없음 3) '값' 으로 DOM 을 표현한 것이어서, 실제 DOM 을 수정하지도 않음. 

2. commit phase
	2.1 VDOM 을 실제 DOM 에 반영함 
	2.2 DOM 변경에 따라서 -> reflow, repaint 발생 


- 이 과정의 시사점 
	1. DOM 변경 요인을 모아서, '한꺼번에 업데이트' 하기 때문에, reflow, repaint 이 최소화! 된다. 
	2. 해당 과정을 자동으로! (추상화) 되어 동작하게 한다. 
	3. 그 결과, '대부분의 상황' 에서, '빠른 업데이트' 가 가능해진다. 

```


<br>

## 기존 렌더링에서 '변화된 부분' 이 생긴 경우? (재조정)
``` BASH 
1. 각각의 컴포넌트를 다시 호출 -> 각각의 컴포넌트에서 React Element 를 만든다. 

2. 각 React Element 를 모아서 -> VDOM 을 만든다. 
	- '변경된 부분' 은 '빨간색' 으로 표시되어 있다 ⭐⭐⭐⭐⭐

3. '기존 VDOM' 과 '방금 업데이트한 VDOM' 의 '차이점' 을 파악한다. -> '차이점을 한군데'로 모은다. 

4. 한군데로 모은 변경사항을 반영해서, '딱 1번만!' DOM 업데이트를 한다. 
```


![](https://i.imgur.com/ThDq1dL.png)




---
- 출처 : Do it, 리액트 프로그래밍 정석
- 출처 : https://youtu.be/6rDBqVHSbgM?t=17
- 출처 : https://youtu.be/N7qlk_GQRJU?t=249

- 필기 출처 : [[리액트 업데이트 과정]]
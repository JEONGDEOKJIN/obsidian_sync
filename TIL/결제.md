
- 결제 완료할 때, 데이터를 주고 받고 하는 과정에서 아직 처리 못 한게 있음 

- 모바일 결제와 PC 결제 방식이 다름 

- 시퀀스 다이어그램을 그리고, 그 방식에 대해서도 배워야 함 

- 현재, 시퀀스 다이어그램으로 업무를 파악함 


- 동시에, '실제 동작하는 예제 코드' 를 뜯어보면서 -> 어떻게 작동하는건지를 파악함 🌟🌟🌟 
    - 이것도 실력이 많이 느는 느낌이 든다. 
    - 단순히 강의가 아니라, 예지 코드를 뜯어보는 것도 🌟🌟🌟 


---



### 1차 난관 넘어간 포인트 및 생각의 흐름

- 참고로 우선 적은 메모
    
    [모바일 결제 해결 포인트](https://www.notion.so/44cb7af5763744c89c26973e43dc5062?pvs=21)
    

```bash
1. 제대로 넣어야 해! 의 단계 

2. '넣긴 었었는데, 정말 제대로 들어간거냐?' 를 체크!!! (⭐검증의 예술⭐)

3. 검증을 어디서 해? 
	- PC 는 콜백함수가 있음 
	- MO 는 콜백함수가 없음. 대신, Ret_URL 이 있음 
	- 이 Ret_URL 이 의미하는게, '리디렉션 페이지' 가 아니라, '배포된 API' 를 의미 ⭐⭐⭐
		- 이전에는 value={`${process.env.NEXT_PUBLIC_URL}/charge-point`} 이렇게 해서 -> npm run serve 를 하면 -> localhost:3000 이게, 도메인으로 들어감 
		- 그러다, Ret_URL="<http://test.kcp.co.kr/returnpage>" 이렇게 '공식 문서 대로' 넣어봄 ⭐⭐⭐ -> 405 에러로 변함 
		- ⭐⭐⭐405,post 에러⭐⭐⭐ 해석 -> 그래서 '백엔드가 처리할 수 있는 api' 를 만들어줘야! 로 감 

4. 추가로 해야 하는 것 
	- 1) 프로세스 설명 2) api 열어 달라 3) 데이터 들어오면 2단계 처리 해 달라 

5. 알게 된 것
	[변화준 포인트-1] Ret_URL 을 '페이지 주소' 가 아니라 'PG가 접근할 수 있는 배포 API 주소' 로 변경 
	[알게된 것-1] npm serve 로 실행해도 -> 배포 주소니까, 접속 가능
	[wow point] 405를 해석 한 것 ⭐⭐⭐⭐⭐ 405가 왜 이렇게 해석된거지
	[405에러 뜬 원인] 있지도 않은 엔드 포인트로 가서 -> 그래서 이걸 받을 수 있는 api 만들어달라 
	[요청할 사항] 3개 res 처리하고 -> 어떤 페이지로 갈지 리다이렉트 설정 
	
6. 포인트 
	- 405 및 POST 에러를 해석하는게 중요했음 
	- '검증의 예술' 이라는 것. 정말 그러냐!!! 라는 것  
	

```
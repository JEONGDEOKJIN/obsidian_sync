

## done í•œ task ê¸°ë¡

### [240813] ìº˜ë¦°ë” ê°€ì ¸ì˜¤ëŠ” êµ¬ì¡°

``` bash 
    1. ì‚¬ìš©ìê°€ ì €ì¥í•˜ë©´ -> DB ë¥¼ ê±°ì³¤ë‹¤ê°€ -> ê·¸ë ¤ì§€ê²Œ í•  ê²ƒ ì¸ê°€ 
    2. êµ¬ê¸€ ìº˜ë¦°ë”ì— ì €ì¥ëœ ê²ƒì„ ê°€ì ¸ì™€ì„œ -> ê·¸ë ¤ì§€ê²Œ í•  ê²ƒ ì¸ê°€ 
```

- ì´ ì¤‘ 2ê°€ì§€ë¥¼ ë‹¤ í•œë‹¤. 
- ì‚¬ì‹¤, full calendar ìì²´ì— 'íœ´ì¼' ì„ ê°€ì ¸ì˜¤ëŠ” ê¸°ëŠ¥ì´ ìˆìœ¼ë©´, êµ³ì´ google api ì—°ë™ì„ ì•ˆ í•´ë„ ëœë‹¤. 


### [240813-1340] ë”ë¯¸date ì— event ìƒê¸°ê²Œ í•˜ê¸° 

- ì°¸ê³  
``` bash 
https://bit.ly/3YGzr81
views\fullcalendar.ejs
```

- í¬ì¸íŠ¸ 
```bash
1. ì¼ì • ìƒì„± ë²„íŠ¼ í´ë¦­ -> addEvent(calendarRef) ì´ ì‹¤í–‰ë¨ 

2. ë§Œë“¤ì–´ë†“ê³  -> ëª¨ë“ˆë¡œ ë¹¼ë‹ˆê¹Œ ì¢‹ìŒ â­â­â­â­â­â­â­â­â­ 
    - ì´ê±°ë¥¼ ì´ì œ í…ŒìŠ¤íŠ¸ íŒŒì¼ì—ì„œ ë¹¼ì„œ -> í”„ë¡œì íŠ¸ì— ì ìš©í•  ìˆ˜ ìˆìŒ. 

```

<br>

- addEvent ë‚´ë¶€ êµ¬í˜„
```jsx
/* 1. const calendarApi = calendarRef?.current?.getApi();
    - calendarRef ì´ê²Œ ì‘ë™í•˜ë ¤ë©´, FullCalendar ì˜ ref ì†ì„±ì— ì—°ê²°í•´ì„œ, addEvent ë¥¼ í˜¸ì¶œí•˜ëŠ” 'â­ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸â­' ì—ì„œ 'FullCalenar' ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì ¸ì™€ì•¼ í•œë‹¤. â­â­â­â­â­ 
        - ì§€ê¸ˆ ì˜ˆì‹œ í”„ë¡œì íŠ¸ì˜ ê²½ìš°ì—ëŠ” 'calendar.js' ì—ì„œ!!! 
    - ì´ ë¶€ë¶„ì—ì„œ ì´ë¡ ì ìœ¼ë¡œ ë¶€ì¡±í–ˆë‹¤. 
*/
    <FullCalendar
        ref={calendarRef} // ì´ ë¶€ë¶„ ì¶”ê°€ âœ…âœ…
        plugins={[
        resourceTimelinePlugin,
        dayGridPlugin,
        interactionPlugin,
        timeGridPlugin,
    ]}

/* 2. ê·¸ë˜ì„œ, full calendar ë‚´ë¶€ì— ì¡´ì¬í•˜ëŠ” addEvent ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. â­â­â­  
    - ì´ addEvent ë¥¼ ê°€ì ¸ì˜¤ë ¤ë©´, useRef ê°€ í•„ìˆ˜ì ì´ë‹¤. 
*/

```

<br>

- ì „ì²´ ì˜ˆì‹œ ì½”ë“œ 
``` jsx
export function addEvent(calendarRef) {
    const calendarApi = calendarRef?.current?.getApi();
  
    const dateString = '2024-08-11';
    const testDate = new Date(dateString + 'T00:00:00');
  
    calendarApi?.addEvent({
      title: 'í…ŒìŠ¤íŠ¸ ì…ë‹ˆë‹¤âœ…âœ…',
      start: testDate,
      allday: true,
      color: 'blue',
    });
  }


```

<br>


### [240813-1340] 'calendarì˜ íŠ¹ì •ì¼ì'ë¥¼ 'í´ë¦­'í•˜ë©´, event ê°€ ìƒê¸°ê²Œ í•˜ê¸° 

``` jsx 
/* 1. 'calendarì˜ íŠ¹ì •ì¼ì'ë¥¼ 'í´ë¦­'í•˜ë©´ ì„ ì–´ë–»ê²Œ ì•Œì•„? 
    - Full Calendar ê°€ ì´ë¯¸ ë§Œë“¤ì–´ë‘ì—ˆì„ ê²ƒ. 
    - ì°¾ì•„ë³´ë‹ˆ, dateClick ì†ì„±ì´ ìˆìŒ 
        -> í•´ë‹¹ ì†ì„±ì— ë°”ì¸ë”©ë˜ëŠ” í•¨ìˆ˜(handleDateClick) ë¥¼ ë„£ì„ ì˜ˆì •. 
        (ì¶œì²˜: https://fullcalendar.io/docs/dateClick)
*/
  const handleDateClick = (clickedDate) => {
    const {date} = clickedDate
    addEvent(calendarRef, date)
    debugger
  }

/* 2. clickedDate ê°ì²´ ë‚´ë¶€ë¥¼ ì—´ì–´ë³´ë‹ˆâ­â­â­, date ì†ì„±ì´ ë‚ ì§œê°’ì„ ê°€ì§€ê³  ìˆì—ˆìŒ
    - ê·¸ë˜ì„œ, const {date} = clickedDate ì´ë ‡ê²Œ ê¹Œë³´ê²Œ ë¨
    - ì´ê±¸ ìœ„ì—ì„œ ë§Œë“  addEvent í•¨ìˆ˜ì— ì „ë‹¬í•˜ë©´ ë¨
*/

```

- ì „ì²´ ì½”ë“œ 
``` jsx
// Contextë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì»¤ìŠ¤í…€ í›… â­â­â­â­â­â­â­â­
export function useModal() {
  return useContext(ModalContext)
}

export default function CalendarPage() {
  const calendarRef = useRef(null) // ìº˜ë¦°ë” ì°¸ì¡°

  const [isModalOpen, setIsModalOpen] = useState(false)

  const handleDateClick = (clickedDate) => {
    const {date} = clickedDate
    addEvent(calendarRef, date)
    debugger
  }

  return (
    <ModalContext.Provider value={{ isModalOpen, setIsModalOpen }}>
      <Layout>
        <div className='calendar-container'>
          <FullCalendar
            ref={calendarRef} // ì´ ë¶€ë¶„ ì¶”ê°€ âœ…âœ…
            plugins={[
              resourceTimelinePlugin,
              dayGridPlugin,
              interactionPlugin,
              timeGridPlugin,
            ]}
            // ì»¤ìŠ¤í…€ ë²„íŠ¼ ì¶”ê°€
            customButtons={{
              createEventButton: {
                text: 'ì¼ì • ìƒì„±',
                click: function () {
                  addEvent(calendarRef)
                  // setIsModalOpen(true)
                },
              },
            }}
            headerToolbar={{
              left: 'prev,next today createEventButton',
              center: 'title',
              right: 'resourceTimelineWeek,dayGridMonth,timeGridWeek',
            }}
            initialView='resourceTimelineWeek'
            nowIndicator={true}
            editable={true}
            selectable={true}
            selectMirror={true}
            resources={[
              { id: 'a', title: 'Auditorium A' },
              { id: 'b', title: 'Auditorium B', eventColor: 'green' },
              { id: 'c', title: 'Auditorium C', eventColor: 'orange' },
            ]}
            initialEvents={[
              { title: 'nice event', start: new Date(), resourceId: 'a' },
            ]}
            dateClick={handleDateClick} // ìº˜ë¦°ë”ì˜ ë‚ ì§œ í´ë¦­ì‹œ 'handleDateClick' ì‹¤í–‰
          />
        </div>

        {isModalOpen ? <Modal setIsModalOpen={setIsModalOpen} /> : <></>}
      </Layout>
    </ModalContext.Provider>
  )
}
```

<br>


### [240813-1400] 'ìƒì„±ë²„íŠ¼' ì„ í´ë¦­í–ˆì„ ë•Œ, event ê°€ ìƒê¸°ê²Œ í•˜ê¸° 

- ë³€ê²½ëœ ìƒê° 
``` bash
1. ë‚ ì§œë¥¼ í´ë¦­í•˜ë©´, event ë¥¼ ìƒì„±í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼, 'ìƒì„± ë²„íŠ¼' ì„ í´ë¦­í•˜ë©´, eventê°€ ìƒì„±ë˜ê²Œ í•˜ëŠ”ê²Œ, ì¢€ ë” ìš°ì„ ì´ë¼ê³  ìƒê°í•¨ 
    - ì™œëƒë©´, ë‹¬ë ¥ì„ ë’¤ë¡œ ë„˜ê¸°ë ¤ë©´, ì‚¬ì‹¤ ê·€ì°®ë‹¤. 
    - ì¶”í›„ì—, ë‹¬ë ¥í´ë¦­í–ˆì„ ë•Œ -> ì´ë²¤íŠ¸ê°€ ë‚˜ì˜¤ê²Œ í•˜ëŠ”ê±¸ ë¦¬íŒ©í† ë§ í•˜ì
    -> ë” ì´ìƒ ì‹ ê²½ì“°ì§€ ë§ê³  ë„˜ì–´ê°€ì â­â­â­ | ìš°ì„ ìˆœìœ„ë¥¼ ìƒê° â­â­â­ 
```

<br>

```jsx
// 1. Modal ì´ ì—´ë¦´ ë•Œ, calendarRef ì „ë‹¬ í•´ì•¼ í•˜ëŠ”ë°, 
   {isModalOpen ? (
          <Modal calendarRef={calendarRef} setIsModalOpen={setIsModalOpen} />
        ) : (
          <></>
    )}

// 2. ë¬¸ì œê°€ ë˜ì—ˆë˜ ê±´, onSubmit ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ë˜ëŠ” ì‹œì ì´ 'í´ë¦­' ì´ ì•„ë‹ˆë¼, 'Modal ì´ ì‹¤í–‰' ë  ë•Œ ì˜€ìŒ. 
    // ì´ê±´, onClick={onSubmit(calendarRef)} ì´ë ‡ê²Œ ì‘ì„±í•´ì„œ ì˜€ìŒ
    <button type='submit'  onClick={()=>onSubmit(calendarRef)}> ì œì¶œ </button>
```

<br>


### [240813-1820] google calendar ì—ì„œ 'íœ´ì¼' ê°€ì ¸ì˜¤ê¸° 

1. google api key ë°œê¸‰ë°›ê¸° 

``` bash
    - ì°¸ê³  : https://idealist.tistory.com/92 â­â­â­
    - ë°œê¸‰ë°›ì€ api key : AIzaSyDOp-C30NyBcZVgTUER4WYZp4zBLwAPC1s
```

2. [ë°œê¸‰ê³¼ì •ì—ì„œ ë¸”ë¡œê·¸ì™€ ë‹¤ë¥´ê²Œ í–ˆë˜ ê²ƒ] api key ë°œê¸‰ ë°›ëŠ” ê²ƒ. 
    - https://www.notion.so/google-calendar-12a5ca4f91e8410c9b69a21166bf0c5c
    - ì—¬ê¸° ë…¸ì…˜ ê¸°ë¡ ì°¸ê³ 

3. [ë¸”ë¡œê·¸ì— ì—†ì—ˆê³ , ì‹¤ì œ ê°œë°œí•  ë•ŒëŠ” ë³´ì™„í•´ì•¼ í•˜ëŠ” ê²ƒ] O Auth ì„¤ì •í•˜ëŠ” ê²ƒ 
    - ì—¬ê¸° ë…¸ì…˜ ê¸°ë¡ ì°¸ê³  
    - https://www.notion.so/google-calendar-12a5ca4f91e8410c9b69a21166bf0c5c


<br>


### [240813-1900] calendar ì—ì„œ ë³´ì´ëŠ” í™”ë©´ì„, month ë¡œ ì¡°ì ˆ

- ì• ì´ˆì˜ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ìŒ
``` jsx 
    headerToolbar={{
    left: 'prev,next today createEventButton',
    center: 'title',
    right: 'resourceTimelineWeek,dayGridMonth,timeGridWeek',
    }}
```

<br>

- ì´ê±¸ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì • 
``` jsx 
headerToolbar={{
    left: 'prev,next today createEventButton',
    center: 'title',
    right: 'dayGridMonth,timeGridWeek',
}}
```



### [240813] DB ì—ì„œ ë°›ì€ ì¼ì •ì„ ê·¸ë ¤ì£¼ê¸° 

1. ë°ì´í„°ë¥¼ fetchedData ë³€ìˆ˜ì— ì €ì¥ 
```jsx
const fetchedData = [ 
    { title: 'test event - 1', start: '2024-08-12', resourceId: 'a' , color: 'blue'},
    { title: 'test event - 2', start: '2024-08-11', resourceId: 'a' , color: 'yellow'},
    { title: 'test event - 3', start: '2024-08-11', end : '2024-08-16' , resourceId: 'a' , color: 'green'},
]
```

<br>

2. `events={combinedEvents}` ì´ë ‡ê²Œ events ì†ì„±ì— ë°”ì¸ë”© ë  ìˆ˜ ìˆê²Œ ë°°ì—´ë¡œ ì¤€ë¹„ 
``` jsx
  const combinedEvents = [
    ...fetchedData,
    ...googleCalendarEvents,
  ]
```

<br>

3. ì´ë ‡ê²Œ events ì†ì„±ì—, `ê°ì²´ ìš”ì†Œë¡œ ëœ ë°°ì—´` ë¡œ ê½‚ì•„ì£¼ë©´, ê·¸ë ¤ì§„ë‹¤. 

![Image](https://i.imgur.com/8pY2MdJ.png)


<br>


## ì œëŒ€ë¡œ í•™ìŠµì´ í•„ìš”í•œ ë¶€ë¶„ 

### 1. ìŠ¤í”„ë ˆë“œ ì—°ì‚°ì í•™ìŠµ â­â­â­ 
``` jsx 
  const fetchedData = [ 
    { title: 'nice event', start: '2024-08-12', resourceId: 'a' , color: 'blue'},
    { title: 'nice event', start: '2024-08-11', resourceId: 'a' , color: 'yellow'},
    { title: 'nice event', start: '2024-08-11', end : '2024-08-16' , resourceId: 'a' , color: 'green'},
  ]

  const googleCalendarEvents = [
    {
      googleCalendarId : 'ko.south_korea#holiday@group.v.calendar.google.com', 
      className: 'holiday',
    }
  ]

  // ğŸ“›ğŸ“›ğŸ“› ì´ê²Œ í˜„ì¬ ì™œ ì‘ë™?
  const combinedEvents = [
    ...fetchedData,
    ...googleCalendarEvents,
  ]
```

```jsx 
<FullCalendar
            ref={calendarRef} // ì´ ë¶€ë¶„ ì¶”ê°€ âœ…âœ…
            plugins={[
              resourceTimelinePlugin,
              dayGridPlugin,
              interactionPlugin,
              timeGridPlugin,
              googleCalendarPlugin, 
            ]}
            // ì»¤ìŠ¤í…€ ë²„íŠ¼ ì¶”ê°€
            customButtons={{
              createEventButton: {
                text: 'ì¼ì • ìƒì„±',
                click: function () {
                  // addEvent(calendarRef)
                  setIsModalOpen(true)
                },
              },
            }}
            headerToolbar={{
              left: 'prev,next today createEventButton',
              center: 'title',
              right: 'resourceTimelineWeek,dayGridMonth,timeGridWeek',
            }}
            initialView='resourceTimelineWeek'
            nowIndicator={true}
            editable={true}
            selectable={true}
            selectMirror={true}
            resources={[
              { id: 'a', title: 'Auditorium A' },
              { id: 'b', title: 'Auditorium B', eventColor: 'green' },
              { id: 'c', title: 'Auditorium C', eventColor: 'orange' },
            ]}

```

<br>

### 2. ë¶€ëª¨ì—ì„œ ìì‹ì—ê²Œ useState ë¡œì¨ 'set í•¨ìˆ˜' ë¥¼ ë‚´ë ¤ë³´ë‚´ì¤€ë‹¤. í•˜ì§€ë§Œ, ì´ ë°©ì‹ì€ flux íŒ¨í„´ì— ë°˜í•œë‹¤ê³  í–ˆë‹¤. ê·¸ ëŒ€ì•ˆìœ¼ë¡œì¨ context api ê°€ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ê±´ê°€? 

- í˜„ì¬ gpt ì˜ ì˜ê²¬ì„ ë“£ê³  ì‘ì„±í•œ ê±´, context api ë¥¼ ê·¸ë ‡ê²Œ ì“´ê±´ë°, ì´ ë¶€ë¶„ì€ context api ì— ëŒ€í•œ ê³µë¶€ê°€ í•„ìš” 



<br>

## ë¦¬íŒ©í† ë§ í•  ê²ƒ ë“¤ 
### 1. event ìƒì„± 'ë²„íŠ¼' ì´ ì•„ë‹ˆë¼, 'ë‹¬ë ¥' ì„ ëˆŒë €ì„ ë•Œë„, ìƒì„±ë  ìˆ˜ ìˆê²Œ í•˜ê¸° 

